(this.webpackJsonpgcode_preview=this.webpackJsonpgcode_preview||[]).push([[0],{235:function(e,t,n){"use strict";(function(e){var a=n(389),r=n(18),i=n(19),o=n(30),s=n(29),c=n(0),l=n.n(c),u=n(24),d=n(367),h=n.n(d),p=n(53),m=n.n(p),f=n(368),v=n.n(f),g=n(123),b=n(143),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return Math.min(Math.max(e,t),n)};function M(e,t,n,a){return e.addEventListener(t,n,a),{remove:function(){e.removeEventListener(t,n,a)}}}function y(e,t,n){return(n-t)*e/100+t}function S(t,n,a,r){var i=t.getBoundingClientRect(),o=i.width,s=i.height,c=function(t){var n=e,a=n.scrollY,r=n.scrollX,i=t.getBoundingClientRect(),o=i.left;return{top:i.top+a,left:o+r}}(t),l=c.top,u=c.left,d=function(e){return e.changedTouches&&e.changedTouches[0]?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}(n),h=d.x,p=d.y,m=a?p-l:h-u,f=(a?s:o)/100;return r?100-O(m/f):O(m/f)}function x(e){e.preventDefault()}var j=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={currentState:"initial"},e.handleKeyDown=function(t){var n,a=e.props,r=a.min,i=a.max,o=a.value,s=Math.abs((i-r)/100),c=e.props.step||s;switch(h()(t)){case"home":n=r;break;case"end":n=i;break;case"page up":n=o+10*s;break;case"page down":n=o-10*s;break;case"right":case"up":n=o+c;break;case"left":case"down":n=o-c;break;default:return}t.preventDefault(),n=O(n,r,i),e.emitChange(t,n)},e.handleFocus=function(){e.setState({currentState:"focused"})},e.handleBlur=function(){e.setState({currentState:"normal"})},e.handleClick=function(t){var n=e.props,a=n.min,r=n.max,i=n.vertical,o=n.reverse,s=y(S(e.container,t,i,o),a,r);e.emitChange(t,s,(function(){e.playJumpAnimation()}))},e.handleTouchStart=function(t){e.setState({currentState:"activated"}),e.globalMouseUpListener=M(document,"touchend",e.handleMouseUp),"function"===typeof e.props.onDragStart&&e.props.onDragStart(t)},e.handleMouseDown=function(t){e.setState({currentState:"activated"}),e.globalMouseUpListener=M(document,"mouseup",e.handleMouseUp),e.globalMouseMoveListener=M(document,"mousemove",e.handleMouseMove),"function"===typeof e.props.onDragEnd&&e.props.onDragEnd(t)},e.handleMouseUp=function(t){e.setState({currentState:"normal"}),e.globalMouseUpListener&&e.globalMouseUpListener.remove(),e.globalMouseMoveListener&&e.globalMouseMoveListener.remove(),"function"===typeof e.props.onDragEnd&&e.props.onDragEnd(t)},e.handleMouseMove=function(t){var n=e.props,a=n.min,r=n.max,i=n.vertical,o=n.reverse,s=y(S(e.container,t,i,o),a,r);e.emitChange(t,s)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.container&&this.container.addEventListener("touchstart",x,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener("touchstart",x,{passive:!1})}},{key:"emitChange",value:function(e,t,n){var a=this.props,r=a.step,i=a.trackValue,o=a.value,s=a.onChange,c=t;c=r?function(e,t){return Math.round(e/t)*t}(t,r):Number(t.toFixed(3)),"function"===typeof s&&c!==o&&(s(e,Math.min(c,i)),"function"===typeof n&&n())}},{key:"calculateTrackAfterStyles",value:function(e){switch(this.state.currentState){case"activated":return"calc(100% - ".concat(0===e?7:5,"px)");case"disabled":return"calc(".concat(100-e,"% - 6px)");default:return"calc(100% - 5px)"}}},{key:"calculateTrackBeforeStyles",value:function(e){switch(this.state.currentState){case"disabled":return"calc(".concat(e,"% - 6px)");default:return"".concat(e,"%")}}},{key:"playJumpAnimation",value:function(){var e=this;this.setState({currentState:"jumped"},(function(){setTimeout((function(){e.setState({currentState:"normal"})}),e.props.theme.transitions.duration.complex)}))}},{key:"render",value:function(){var e=this,t=this.state.currentState,n=this.props,r=n.component,i=n.classes,o=n.value,s=n.trackValue,c=n.min,d=n.max,h=n.vertical,p=n.reverse,f=n.disabled,v=Object(a.a)(n,["component","classes","value","trackValue","min","max","vertical","reverse","disabled"]),b=O(100*(o-c)/(d-c)),M=O(100*(s-c)/(d-c)),y={[i.disabled]:f,[i.jumped]:!f&&"jumped"===t,[i.focused]:!f&&"focused"===t,[i.activated]:!f&&"activated"===t},S=m()(i.container,{[i.vertical]:h,[i.reverse]:p,[i.disabled]:f}),x=m()(i.track,i.trackBefore,y,{[i.vertical]:h}),j=m()(i.track,i.trackAfter,y,{[i.vertical]:h}),w=m()(i.thumb,y,{[i.zero]:0===b}),E=h?"height":"width",T=h?"top":"left",P={[E]:this.calculateTrackBeforeStyles(M)},A={[E]:this.calculateTrackAfterStyles(M)},C={[T]:"".concat(b,"%")};return l.a.createElement(r,Object.assign({role:"slider",className:S,"aria-valuenow":o,"aria-valuemin":c,"aria-valuemax":d,"aria-orientation":h?"vertical":"horizontal",onClick:this.handleClick,ref:function(t){e.container=Object(u.findDOMNode)(t)}},v),l.a.createElement("div",{className:x,style:P}),l.a.createElement(g.a,{className:w,disableRipple:!0,style:C,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchStartCapture:this.handleTouchStart,onTouchMove:this.handleMouseMove,onFocusVisible:this.handleFocus}),l.a.createElement("div",{className:j,style:A}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.disabled?{currentState:"disabled"}:e.disabled||"disabled"!==t.currentState?null:{currentState:"normal"}}}]),n}(l.a.Component);j.defaultProps={min:0,max:100,value:50,component:"div"},t.a=v()((function(e){var t={duration:e.transitions.duration.short,easing:e.transitions.easing.easeOut},n=e.transitions.create(["width","height","box-shadow","left","top"],t),a={loaded:"#999999",loading:"#777777",handle:"#dddddd",primary:e.palette.primary.main,secondary:e.palette.grey[400],focused:e.palette.grey[500],disabled:e.palette.grey[400]};return{container:{position:"relative",width:"100%",margin:"10px 0",padding:"6px 0",cursor:"pointer",WebkitTapHighlightColor:"transparent","&$disabled":{cursor:"no-drop"},"&$vertical":{height:"100%",margin:"0 10px",padding:"0 6px"},"&$reverse":{transform:"scaleX(-1)"},"&$vertical$reverse":{transform:"scaleY(-1)"}},track:{position:"absolute",transform:"translate(0, -50%)",top:"50%",height:2,"&$focused, &$activated":{transition:"none"},"&$disabled":{backgroundColor:a.secondary},"&$vertical":{transform:"translate(-50%, 0)",left:"50%",top:"initial",width:2},"&$jumped":{}},trackBefore:{zIndex:1,left:0,backgroundColor:a.loaded,transition:n,"&$focused, &$activated, &$jumped":{backgroundColor:a.loaded}},trackAfter:{right:0,backgroundColor:a.loading,transition:n,"&$vertical":{bottom:0}},thumb:{position:"absolute",zIndex:2,transform:"translate(-50%, -50%)",width:12,height:12,borderRadius:"50%",transition:n,backgroundColor:a.handle,"&$focused":{boxShadow:"0px 0px 0px 9px ".concat(Object(b.fade)(a.handle,.16))},"&$activated":{width:17,height:17,transition:"none"},"&$disabled":{cursor:"no-drop",width:9,height:9,backgroundColor:a.disabled},"&$zero":{border:"2px solid ".concat(a.disabled),backgroundColor:"transparent"},"&$focused$zero":{border:"2px solid ".concat(a.focused),backgroundColor:Object(b.fade)(a.focused,.34),boxShadow:"0px 0px 0px 9px ".concat(Object(b.fade)(a.focused,.34))},"&$activated$zero":{border:"2px solid ".concat(a.focused)},"&$jumped":{width:17,height:17}},focused:{},activated:{},disabled:{},zero:{},vertical:{},reverse:{},jumped:{}}}),{name:"MuiSlider",withTheme:!0})(j)}).call(this,n(32))},357:function(e,t,n){e.exports=n.p+"static/media/pocketnc.2eac3182.png"},407:function(e,t,n){e.exports=n(714)},412:function(e,t,n){},436:function(e,t){},438:function(e,t){},449:function(e,t){},451:function(e,t){},476:function(e,t){},478:function(e,t){},479:function(e,t){},486:function(e,t){},488:function(e,t){},506:function(e,t){},508:function(e,t){},520:function(e,t){},523:function(e,t){},528:function(e,t){},530:function(e,t){},551:function(e,t){},657:function(e,t){ace.define("ace/mode/gcode_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var a=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,i=function(){var e=this.createKeywordMapper({"support.function":"ATAN|ABS|ACOS|ASIN|SIN|COS|EXP|FIX|FUP|ROUND|LN|TAN",keyword:"IF|DO|WHILE|ENDWHILE|CALL|ENDIF|SUB|ENDSUB|GOTO|REPEAT|ENDREPEAT|CALL","constant.language":"PI"},"identifier",!0);this.$rules={start:[{token:"comment",regex:"\\(.*\\)"},{token:"blockNumber",regex:"([N])([0-9]+)"},{token:"string",regex:"([G])([0-9]+\\.?[0-9]?)"},{token:"string",regex:"([M])([0-9]+\\.?[0-9]?)"},{token:"constant.numeric",regex:"([-+]?([0-9]*\\.?[0-9]+\\.?))|(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)"},{token:e,regex:"[A-Z]"},{token:"keyword.operator",regex:"EQ|LT|GT|NE|GE|LE|OR|XOR"},{token:"paren.lparen",regex:"[\\[]"},{token:"paren.rparen",regex:"[\\]]"},{token:"text",regex:"\\s+"}]}};a.inherits(i,r),t.GcodeHighlightRules=i})),ace.define("ace/mode/gcode",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/gcode_highlight_rules","ace/range"],(function(e,t,n){var a=e("../lib/oop"),r=e("./text").Mode,i=e("./gcode_highlight_rules").GcodeHighlightRules,o=function(){this.HighlightRules=i,this.$behaviour=this.$defaultBehaviour};a.inherits(o,r),function(){this.$id="ace/mode/gcode"}.call(o.prototype),t.Mode=o}))},660:function(e,t,n){},714:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"BASE",(function(){return be})),n.d(a,"B_AXIS",(function(){return Oe})),n.d(a,"A_AXIS",(function(){return Me})),n.d(a,"Y_AXIS",(function(){return ye})),n.d(a,"TOOL",(function(){return Se})),n.d(a,"DENTAL_FIXTURE",(function(){return xe}));var r={};n.r(r),n.d(r,"ABSOLUTE",(function(){return je})),n.d(r,"INCREMENTAL",(function(){return we})),n.d(r,"ABSOLUTE_ARC",(function(){return Ee})),n.d(r,"INCREMENTAL_ARC",(function(){return Te}));var i={};n.r(i),n.d(i,"INVERSE_TIME",(function(){return Pe})),n.d(i,"UNITS_PER_MINUTE",(function(){return Ae})),n.d(i,"UNITS_PER_REVOLUTION",(function(){return Ce}));var o={};n.r(o),n.d(o,"FIVE_AXIS",(function(){return ke})),n.d(o,"TRIVIAL",(function(){return Re}));var s={};n.r(s),n.d(s,"XY",(function(){return Le})),n.d(s,"ZX",(function(){return Ie})),n.d(s,"YZ",(function(){return Ge})),n.d(s,"UV",(function(){return Ne})),n.d(s,"WU",(function(){return _e})),n.d(s,"VW",(function(){return De}));var c={};n.r(c),n.d(c,"IN",(function(){return Fe})),n.d(c,"MM",(function(){return ze}));var l={};n.r(l),n.d(l,"OFF",(function(){return Ze}));var u={};n.r(u),n.d(u,"LOAD_MODEL",(function(){return Ve})),n.d(u,"POSITION_MODEL",(function(){return He})),n.d(u,"EDIT_PATH",(function(){return Be})),n.d(u,"PREVIEW_PATH",(function(){return Ue})),n.d(u,"CUT_PATH",(function(){return Xe})),n.d(u,"FIXTURE_HEIGHT",(function(){return Ye}));var d={};n.r(d),n.d(d,"toolOrientation",(function(){return ft})),n.d(d,"workPieceSpace",(function(){return vt})),n.d(d,"forwardFiveAxis",(function(){return gt})),n.d(d,"inverseFiveAxis",(function(){return bt})),n.d(d,"kinematics",(function(){return Ot})),n.d(d,"limits",(function(){return Mt})),n.d(d,"jointLabels",(function(){return yt})),n.d(d,"getLimitErrors",(function(){return St}));var h={};n.r(h),n.d(h,"toolOrientation",(function(){return xt})),n.d(h,"workPieceSpace",(function(){return jt})),n.d(h,"forwardFiveAxis",(function(){return wt})),n.d(h,"inverseFiveAxis",(function(){return Et})),n.d(h,"kinematics",(function(){return Tt})),n.d(h,"limits",(function(){return Pt})),n.d(h,"jointLabels",(function(){return At})),n.d(h,"getLimitErrors",(function(){return Ct}));var p={};n.r(p),n.d(p,"messages",(function(){return Hn})),n.d(p,"annotations",(function(){return Bn})),n.d(p,"maxLimitMessage",(function(){return Un})),n.d(p,"minLimitMessage",(function(){return Xn})),n.d(p,"unimplementedMessages",(function(){return Yn})),n.d(p,"nonSummarizedErrors",(function(){return Wn})),n.d(p,"nonSummarizedWarnings",(function(){return Kn})),n.d(p,"setToolLengthOffsetMessages",(function(){return Jn}));var m=n(0),f=n.n(m),v=n(24),g=n.n(v),b=(n(412),n(28)),O=n(7),M=n(765),y=Object(M.a)({MACHINE_STATE:{DISTANCE_MODE:{SET_ABSOLUTE:void 0,SET_INCREMENTAL:void 0,SET_ABSOLUTE_ARC:void 0,SET_INCREMENTAL_ARC:void 0}}}),S=Object(M.a)({MACHINE_STATE:{FEED_RATE_MODE:{SET_INVERSE_TIME:void 0,SET_UNITS_PER_MINUTE:void 0,SET_UNITS_PER_REVOLUTION:void 0}}}),x=Object(M.a)({MACHINE_STATE:{FEED_RATE:{SET:function(e){return e}}}}),j=Object(M.a)({MACHINE_STATE:{UNITS:{SET_IN:void 0,SET_MM:void 0}}}),w=Object(M.a)({MACHINE_STATE:{KINEMATICS_MODE:{SET_FIVE_AXIS:void 0,SET_TRIVIAL:void 0}}}),E=Object(M.a)({MACHINE_STATE:{CUTTER_COMPENSATION:{OFF:void 0}}}),T=Object(M.a)({MACHINE_STATE:{MOTION:{OFF:void 0,RAPID:void 0,LINEAR:void 0,ARC_C_W:void 0,ARC_C_C_W:void 0,SET_POSITION:void 0,NON_MOTION_COMMAND:void 0}}}),P=Object(M.a)({MACHINE_STATE:{PLANE_SELECT:{SET_X_Y:void 0,SET_Z_X:void 0,SET_Y_Z:void 0,SET_U_V:void 0,SET_W_U:void 0,SET_V_W:void 0}}}),A=Object(M.a)({MACHINE_STATE:{SPINDLE_CONTROL:{OFF:void 0,CW:void 0,CCW:void 0}}}),C=Object(M.a)({MACHINE_STATE:{SPINDLE_SPEED:{SET:void 0}}}),k=Object(M.a)({MACHINE_STATE:{TOOL:{SET:void 0,CHANGE:void 0,SET_TOOL_LENGTH_OFFSET:void 0,CLEAR_TOOL_LENGTH_OFFSET:void 0,TABLE:{SET_TOOL:void 0}}}}),R=Object(M.a)({MACHINE_STATE:{MACHINE:{SET:void 0}}}),L={machineState:Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)({},y.machineState),S.machineState),x.machineState),w.machineState),P.machineState),j.machineState),E.machineState),T.machineState),A.machineState),C.machineState),k.machineState),R.machineState)},I=Object(M.a)({INTERPRETER:{SET_FILE_NAME:void 0,START_LOADING:void 0,END_LOADING:void 0,SET_LOADING_PROGRESS:void 0,SET_LINES:function(e,t){return{lines:e,preview:t}},START_PROCESSING:void 0,END_PROCESSING:void 0,SET_PROCESSING_PROGRESS:void 0,SET_INITIAL_STATE:void 0,APPEND_INDICES:void 0,APPEND_TIMES:void 0,APPEND_MESSAGES:void 0,INCREMENT_TIME:void 0,SET_CURRENT_LINE_WITH_PERCENTAGE:void 0,SET_CURRENT_LINE_WITH_TIME:void 0,SET_CURRENT_LINE:void 0,NEXT_LINE:void 0,PREVIOUS_LINE:void 0,PAUSE:void 0,UNPAUSE:void 0,RUN:void 0,STOP:void 0,SET_TIME_MULTIPLIER:void 0}}),G=Object(M.a)({UI:{GCODE_PANE:{TOGGLE_PANE:void 0,SET_WIDTH:void 0,SET_SELECTED:void 0,SET_LINE_OFFSET:void 0,SET_SHOW_LINES:void 0,SCROLL:void 0,SET_TAB:void 0}}}),N=Object(M.a)({UI:{CONTROLS_OVERLAY:{SET_VISIBLE:void 0,TOGGLE_PANE:void 0,PLAY:void 0,PREVIOUS:void 0,NEXT:void 0,HOME:void 0,SHUFFLE:void 0}}}),_={ui:Object(O.a)(Object(O.a)({},G.ui),N.ui)},D=Object(M.a)({IFRAME:{INITIALIZE:void 0,ROCKHOPPER:void 0,TO_ROCKHOPPER:void 0,EMBED_GCODE:void 0}}),F=Object(M.a)({VIEWER3D:{PARENT_CAMERA:void 0,SHOW_MODEL:void 0,HIDE_MODEL:void 0,LOAD_MODEL:void 0,SET_PERSPECTIVE:void 0,SET_ORTHOGRAPHIC:void 0,SET_DIMENSIONS:function(e,t){return{width:e,height:t}},CAMERA_ZOOM:void 0,CAMERA_START_ROTATING:void 0,CAMERA_ROTATE:function(e,t){return{dx:e,dy:t}},CAMERA_STOP_ROTATING:void 0,CAMERA_SET_DIRECTION:function(e,t,n){return{x:e,y:t,z:n}},CAMERA_SET_RADIUS:void 0,CAMERA_SET_ORTHOGRAPHIC_ZOOM:void 0,CAMERA_SET_PHI:void 0,CAMERA_SET_THETA:void 0}}),z=Object(M.a)({ALIGNER_STATE:{SET_RFID:void 0,SET_STEP:void 0,MODEL_LOADED:void 0,MODEL_UPLOADED:void 0,FINISHED_PROCESSING:void 0,FINALIZE_MODEL:void 0,FINALIZE_MODEL_CLICK:void 0,CLEAR_FINALIZE_MODEL_CLICK:void 0,UPLOAD_MODEL:void 0,LOADING:function(e,t,n,a){return{id:e,label:t,variant:n,progress:a}},LOADING_PROGRESS:function(e,t){return{id:e,progress:t}},STOP_LOADING:function(e){return{id:e}},ALIGNER_STATUS_RESPONSE:void 0,DOWNLOAD_PROCESSED_MODEL:void 0,DOWNLOAD_G_CODE:void 0,SET_JOINTS:void 0,RESET_TO_DEFAULTS:void 0,SHOW_GHOST_SPHERE:void 0,HIDE_GHOST_SPHERE:void 0,SET_GHOST_SPHERE_OPACITY:void 0,SET_GHOST_SPHERE_POSITION:function(e,t,n){return{x:e,y:t,z:n}},ADD_POINT:function(e,t,n,a,r,i){return{posx:e,posy:t,posz:n,dirx:a,diry:r,dirz:i}},UPDATE_POINT_POSITION:function(e,t,n){return{posx:e,posy:t,posz:n}},DELETE_POINT:void 0,CLOSE_PATH:void 0,SET_ACTIVE_POINT:void 0,NEXT_POINT:void 0,PREV_POINT:void 0,INCREMENT_TIME:void 0,PLAY:void 0,PAUSE:void 0,SET_TIME_MULTIPLIER:void 0,SET_TIME_WITH_PERCENTAGE:void 0,SET_HIGHLIGHTED_POINT:void 0,START_ROTATING_MACHINE:function(e,t){return{x:e,y:t}},ROTATE_MACHINE:function(e,t){return{x:e,y:t}},STOP_ROTATING_MACHINE:void 0,SET_DIMENSIONS:function(e,t){return{width:e,height:t}},SAVE_TRANSFORM:void 0,TRANSFORM_SAVED:void 0,SAVE_POINTS:void 0,POINTS_SAVED:void 0,RESET_STATE:void 0,SET_HIGHLIGHT_MODEL:void 0,SET_DRAG_MODEL_START_POINT:function(e,t){return{x:e,z:t}},DRAG_MODEL:function(e,t){return{x:e,z:t}},SET_MODEL_ORIENTATION:function(e,t,n){return{x:e,y:t,z:n}},SET_MODEL_POSITION:function(e,t,n){return{x:e,y:t,z:n}},ROTATE_C_W:void 0,ROTATE_C_C_W:void 0,SET_MACHINE:void 0,IMPORT_TRANSFORM_AND_POINTS:void 0,CANCEL_IMPORT_TRANSFORM_AND_POINTS:void 0,IMPORTED_TRANSFORM_AND_POINTS:void 0,SET_TIMES:void 0}}),Z=Object(M.a)({RFID:{RECEIVED_RFID_SCAN_MESSAGE:void 0,RECEIVED_ERROR_MESSAGE:void 0,RECEIVED_INCOMPLETE_MESSAGE:void 0,CONNECTED_SCANNER:void 0,DISCONNECTED_SCANNER:void 0}}),V=Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)(Object(O.a)({},L),I),_),D),F),z),Z),H=n(18),B=n(19),U=n(30),X=n(29),Y=n(52),W=n(31),K=n.n(W),J=n(230),q=n.n(J),$=n(353),Q=n.n($),ee=function(){function e(){Object(H.a)(this,e),this.callback=function(e){e&&console.error("Error while issuing analytics request",e)};var t=window.sessionStorage,n=t.getItem("uuid");n||(n=q()(),t.setItem("uuid",n)),this.visitor=Q()("UA-129057873-2",n),this.originalVisitor=this.visitor}return Object(B.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(B.a)(e,[{key:"pageview",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).pageview.apply(e,n),this}},{key:"send",value:function(){return this.visitor.send(),this.visitor=this.originalVisitor,this}},{key:"event",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).event.apply(e,n),this}},{key:"exception",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).exception.apply(e,n),this}},{key:"timing",value:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.visitor=(e=this.visitor).timing.apply(e,n),this}}]),e}().getInstance,te=n(11),ne=n(354),ae=n(355),re=te;re.STLLoader=ae.a,re.OBJLoader=ne.a;var ie=re,oe=new Float32Array([0,0,.5]),se=new Float32Array([1,1,1]),ce=(new Float32Array([1,.5,0]),new Float32Array([0,0,1]),function(){function e(t,n){Object(H.a)(this,e);var a="object"===typeof t;if(this.capacity=a?2*t.capacity:t,this.numPoints=0,this.geometry=new ie.BufferGeometry,this.vertices=new Float32Array(3*this.capacity),this.colors=new Float32Array(3*this.capacity),this.normals=new Float32Array(3*this.capacity),this.lines=new Float32Array(this.capacity),this.times=new Float32Array(this.capacity),a){var r=t;this.vertices.set(r.vertices),this.colors.set(r.colors),this.normals.set(r.normals),this.lines.set(r.lines),this.times.set(r.times),this.geometry.setDrawRange(r.geometry.drawRange.start,r.geometry.drawRange.count),this.numPoints=r.numPoints}this.geometry.setAttribute("position",new ie.BufferAttribute(this.vertices,3)),this.geometry.setAttribute("color",new ie.BufferAttribute(this.colors,3)),this.geometry.setAttribute("normal",new ie.BufferAttribute(this.normals,3)),this.geometry.setAttribute("line",new ie.BufferAttribute(this.lines,1)),this.geometry.setAttribute("time",new ie.BufferAttribute(this.times,1)),a&&(this.geometry.attributes.position.updateRange.offset=0,this.geometry.attributes.color.updateRange.offset=0,this.geometry.attributes.normal.updateRange.offset=0,this.geometry.attributes.line.updateRange.offset=0,this.geometry.attributes.time.updateRange.offset=0,this.geometry.attributes.position.updateRange.count=3*this.numPoints,this.geometry.attributes.color.updateRange.count=3*this.numPoints,this.geometry.attributes.normal.updateRange.count=3*this.numPoints,this.geometry.attributes.line.updateRange.count=this.numPoints,this.geometry.attributes.time.updateRange.count=this.numPoints,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0,this.geometry.attributes.normal.needsUpdate=!0,this.geometry.attributes.line.needsUpdate=!0,this.geometry.attributes.time.needsUpdate=!0),this.geometry.attributes.position.setUsage(ie.DynamicDrawUsage),this.geometry.attributes.color.setUsage(ie.DynamicDrawUsage),this.geometry.attributes.normal.setUsage(ie.DynamicDrawUsage),this.geometry.attributes.line.setUsage(ie.DynamicDrawUsage),this.geometry.attributes.time.setUsage(ie.DynamicDrawUsage),this.geometry.setDrawRange(0,0),this.object=new ie.Line(this.geometry,n),this.object.frustumCulled=!1}return Object(B.a)(e,[{key:"clear",value:function(){this.numPoints=0,this.updateDrawRange()}},{key:"updateDrawRange",value:function(){this.geometry.setDrawRange(0,this.numPoints)}},{key:"updateAttribute",value:function(e,t,n){var a=this.geometry.attributes[e];a.updateRange.count>-1?(a.updateRange.count+=n,a.needsUpdate=!0):(a.updateRange.offset=t,a.updateRange.count=n,a.needsUpdate=!0)}},{key:"addPoint",value:function(e){var t=3*this.numPoints;this.vertices[t]=e.position[0],this.vertices[t+1]=e.position[1],this.vertices[t+2]=e.position[2],this.colors[t]=e.color[0],this.colors[t+1]=e.color[1],this.colors[t+2]=e.color[2],this.normals[t]=e.normal[0],this.normals[t+1]=e.normal[1],this.normals[t+2]=e.normal[2],this.lines[this.numPoints]=e.line,this.times[this.numPoints]=e.time,this.updateAttribute("position",t,3),this.updateAttribute("color",t,3),this.updateAttribute("normal",t,3),this.updateAttribute("line",this.numPoints,1),this.updateAttribute("time",this.numPoints,1),this.numPoints++,this.updateDrawRange()}}]),e}()),le=function(){function e(){Object(H.a)(this,e),this.material=new ie.ShaderMaterial({uniforms:{offset:{value:.004},minTime:{value:0},maxTime:{value:9999999999},minLine:{value:0},maxLine:{value:9999999999},maxY:{value:99999999},maxXZ:{value:99999999}},vertexColors:ie.VertexColors,vertexShader:"\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float offset;\nuniform float maxXZ;\nuniform float maxY;\n\nattribute float line;\nattribute float time;\nattribute float speed;\nvarying vec3 vPos;\nvarying vec3 vColor;\nvarying float vLine;\nvarying float vTime;\nvoid main() {\n  vPos = position + offset*normal;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( vPos, 1.0 );\n  vColor = color;\n  vLine = line;\n  vTime = time;\n}\n",fragmentShader:"\nuniform float minTime;\nuniform float maxTime;\nuniform float minLine;\nuniform float maxLine;\nuniform float maxXZ;\nuniform float maxY;\n\nvarying vec3 vColor;\nvarying vec3 vPos;\nvarying float vLine;\nvarying float vTime;\nvoid main()\t{\n  if(length(vPos.xz) > maxXZ || \n     abs(vPos.y) > maxY ||\n     vTime < minTime || vTime > maxTime ||\n     vLine < minLine || vLine > maxLine) {\n\n    discard;\n  }\n  gl_FragColor = vec4(vColor, 1.);\n}\n"}),this.object=new ie.Group,this.lineObject=new ce(1e5,this.material),this.object.frustumCulled=!1,this.object.add(this.lineObject.object)}return Object(B.a)(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),Object(B.a)(e,[{key:"clear",value:function(){this.lineObject.clear()}},{key:"setMaxXZ",value:function(e){this.material.uniforms.maxXZ.value=e}},{key:"setMaxY",value:function(e){this.material.uniforms.maxY.value=e}},{key:"setOffset",value:function(e){this.material.uniforms.offset.value=e}},{key:"setMinLine",value:function(e){this.material.uniforms.minLine.value=e}},{key:"setMaxLine",value:function(e){this.material.uniforms.maxLine.value=e}},{key:"setMinTime",value:function(e){this.material.uniforms.minTime.value=e}},{key:"setMaxTime",value:function(e){this.material.uniforms.maxTime.value=e}},{key:"addPoints",value:function(e){var t=this;e.forEach((function(e){t.lineObject.numPoints===t.lineObject.capacity&&(t.object.remove(t.lineObject.object),t.lineObject=new ce(t.lineObject,t.material),t.object.add(t.lineObject.object)),t.lineObject.addPoint(e)}))}}]),e}(),ue=(new Float32Array([0,0,.5]),new Float32Array([1,1,1]),new Float32Array([1,.5,0]),new Float32Array([0,0,1]),function(){function e(t,n){Object(H.a)(this,e);var a="object"===typeof t;if(this.capacity=a?2*t.capacity:t,this.numPoints=0,this.geometry=new ie.BufferGeometry,this.vertices=new Float32Array(3*this.capacity),this.colors=new Float32Array(3*this.capacity),this.normals=new Float32Array(3*this.capacity),this.lines=new Float32Array(this.capacity),this.times=new Float32Array(this.capacity),a){var r=t;this.vertices.set(r.vertices),this.colors.set(r.colors),this.normals.set(r.normals),this.lines.set(r.lines),this.times.set(r.times),this.geometry.setDrawRange(r.geometry.drawRange.start,r.geometry.drawRange.count),this.numPoints=r.numPoints}this.geometry.setAttribute("position",new ie.BufferAttribute(this.vertices,3)),this.geometry.setAttribute("normal",new ie.BufferAttribute(this.normals,3)),a&&(this.geometry.attributes.position.updateRange.offset=0,this.geometry.attributes.normal.updateRange.offset=0,this.geometry.attributes.position.updateRange.count=3*this.numPoints,this.geometry.attributes.normal.updateRange.count=3*this.numPoints,this.geometry.attributes.position.needsUpdate=!0,this.geometry.attributes.normal.needsUpdate=!0),this.geometry.attributes.position.setUsage(ie.DynamicDrawUsage),this.geometry.attributes.normal.setUsage(ie.DynamicDrawUsage),this.geometry.setDrawRange(0,0),this.object=new ie.Mesh(this.geometry,n),this.object.frustumCulled=!1}return Object(B.a)(e,[{key:"clear",value:function(){this.numPoints=0,this.updateDrawRange()}},{key:"updateDrawRange",value:function(){this.geometry.setDrawRange(0,this.numPoints)}},{key:"updateAttribute",value:function(e,t,n){var a=this.geometry.attributes[e];a.updateRange.count>-1?(a.updateRange.count+=n,a.needsUpdate=!0):(a.updateRange.offset=t,a.updateRange.count=n,a.needsUpdate=!0)}},{key:"addPoint",value:function(e){var t=3*this.numPoints;this.vertices[t]=e.position[0],this.vertices[t+1]=e.position[1],this.vertices[t+2]=e.position[2],this.colors[t]=e.color[0],this.colors[t+1]=e.color[1],this.colors[t+2]=e.color[2],this.normals[t]=e.normal[0],this.normals[t+1]=e.normal[1],this.normals[t+2]=e.normal[2],this.lines[this.numPoints]=e.line,this.times[this.numPoints]=e.time,this.updateAttribute("position",t,3),this.updateAttribute("normal",t,3),this.numPoints++,this.updateDrawRange()}}]),e}()),de=function(){function e(){Object(H.a)(this,e),this.material=new ie.MeshBasicMaterial({color:16777215,opacity:.5,transparent:!0}),this.object=new ie.Group,this.stripObject=new ue(1e5,this.material),this.object.frustumCulled=!1,this.object.add(this.stripObject.object)}return Object(B.a)(e,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),Object(B.a)(e,[{key:"clear",value:function(){this.stripObject.clear()}},{key:"setMaxXZ",value:function(e){this.material.uniforms.maxXZ.value=e}},{key:"setMaxY",value:function(e){this.material.uniforms.maxY.value=e}},{key:"setOffset",value:function(e){this.material.uniforms.offset.value=e}},{key:"setMinLine",value:function(e){this.material.uniforms.minLine.value=e}},{key:"setMaxLine",value:function(e){this.material.uniforms.maxLine.value=e}},{key:"setMinTime",value:function(e){this.material.uniforms.minTime.value=e}},{key:"setMaxTime",value:function(e){this.material.uniforms.maxTime.value=e}},{key:"addPoints",value:function(e){var t=this;e.forEach((function(e){t.stripObject.numPoints===t.stripObject.capacity&&(t.object.remove(t.stripObject.object),t.stripObject=new ue(t.stripObject,t.material),t.object.add(t.stripObject.object)),t.stripObject.addPoint(e)}))}}]),e}(),he=function(){return new ie.ShaderMaterial({uniforms:{hitNormal:{value:new ie.Vector3},myTexture:{type:"t"},opacity:{value:.25}},vertexColors:ie.VertexColors,vertexShader:"\n      varying vec3 vNormal;\n      varying vec2 vUV;\n      void main() {\n        vNormal = normal;\n        vUV = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n    ",fragmentShader:"\n      uniform sampler2D myTexture;\n      uniform vec3 hitNormal;\n      uniform float opacity;\n\n      varying vec3 vNormal;\n      varying vec2 vUV;\n      void main() {\n        vec3 multColor = vec3(1,1,1);\n        if(dot(vNormal, hitNormal) > .99) {\n          multColor = vec3(.3,.7, .9);\n        }\n        gl_FragColor = vec4(texture2D(myTexture, vUV).xyz*multColor, opacity);\n      }\n    "})},pe=function(){function e(t,n,a,r,i){var o=this;Object(H.a)(this,e),this.callbacks={click:[],mouseover:[]},this.left=n,this.top=a,this.width=r,this.height=i,this.opacity=.25,this.scene=new ie.Scene;var s=this.height/this.width;this.camera=new ie.OrthographicCamera(-2.5,2.5,2.5*s,-2.5*s,-2.5,2.5),this.scene.add(this.camera),this.raycaster=new ie.Raycaster,this.material=new he;var c=new ie.OBJLoader,l=new ie.TextureLoader;c.load("models/rhombicuboctahedron.obj",(function(e){o.object=e,e.traverse((function(e){e instanceof ie.Mesh&&(e.material=o.material)})),o.scene.add(e),o.loadedModel=!0,o.loaded=o.loadedModel&&o.loadedTexture}),(function(e){}),(function(e){console.error(e)})),this.material.uniforms.myTexture.value=l.load("textures/viewCube.png",(function(e){o.material.uniforms.myTexture.value=e,o.loadedTexture=!0,o.loaded=o.loadedModel&&o.loadedTexture}),void 0,(function(e){console.error(e)})),t.addEventListener("click",(function(e){var t=e.offsetX-o.left,n=e.offsetY,a=t/o.width*2-1,r=-n/o.height*2+1;if(o.loaded&&a>-1&&a<1&&r>-1&&r<1){o.raycaster.set(new ie.Vector3(2.5*a,2.5*r,10).applyQuaternion(o.camera.quaternion),new ie.Vector3(0,0,-1).applyQuaternion(o.camera.quaternion));var i=o.raycaster.intersectObject(o.object,!0);if(i.length>0){var s=i[0];o.doCallback("click",s.face.normal)}}})),t.addEventListener("mousemove",(function(e){var t=e.offsetX-o.left,n=e.offsetY,a=t/o.width*2-1,r=-n/o.height*2+1;if(o.loaded)if(a>-1&&a<1&&r>-1&&r<1){o.raycaster.set(new ie.Vector3(2.5*a,2.5*r,10).applyQuaternion(o.camera.quaternion),new ie.Vector3(0,0,-1).applyQuaternion(o.camera.quaternion));var i=o.raycaster.intersectObject(o.object,!0);if(i.length>0){var s=i[0];o.doCallback("mouseover",s.face.normal),o.material.uniforms.hitNormal.value.copy(s.face.normal),o.opacity=1}else o.material.uniforms.hitNormal.value.set(0,0,0),o.opacity=.25}else o.material.uniforms.hitNormal.value.set(0,0,0),o.opacity=.25}))}return Object(B.a)(e,[{key:"doCallback",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.callbacks[e].forEach((function(e){return e.apply(void 0,n)}))}},{key:"addEventListener",value:function(e,t){this.callbacks[e].push(t)}},{key:"removeEventListener",value:function(e,t){this.callbacks[e].splice(this.callbacks[e].indexOf(t),1)}},{key:"setOrientation",value:function(e){this.camera.quaternion.copy(e)}},{key:"setPosition",value:function(e,t){this.left=e,this.top=t}},{key:"setDimensions",value:function(e,t){this.width=e,this.height=t}},{key:"step",value:function(e){this.material.uniforms.opacity.value=.9*this.material.uniforms.opacity.value+.1*this.opacity,this.material.uniforms.opacity.value<1?this.material.transparent=!0:this.material.transparent=!1}},{key:"render",value:function(e){this.loaded&&(e.setViewport(this.left,this.top,this.width,this.height),e.setScissor(this.left,this.top,this.width,this.height),e.setScissorTest(!0),e.clearDepth(),e.render(this.scene,this.camera))}}]),e}(),me=function(){function e(t,n){Object(H.a)(this,e),this.width=n.width,this.height=n.height,this.spherical=new ie.Spherical(10,Math.PI/4,-Math.PI/2),this.spherical.makeSafe(),this.currentSpherical=new ie.Spherical(10,Math.PI/4,-Math.PI/2),this.currentSpherical.makeSafe(),this.Y=new ie.Vector3(0,1,0),this.X=new ie.Vector3(1,0,0),this.rotatedX=new ie.Vector3(1,0,0),this.focus=new ie.Vector3(0,0,0),this.parent=new ie.Object3D,this.parentPosition=new ie.Vector3,this.parentOrientation=new ie.Quaternion,this.worldPosition=new ie.Vector3(-10,0,0),this.worldOrientation=new ie.Quaternion,this.localOrientation=new ie.Quaternion,this.phiOrientation=new ie.Quaternion,this.thetaOrientation=new ie.Quaternion,this.localOrientation.setFromAxisAngle(new ie.Vector3(0,1,0),-Math.PI/2),this.worldOrientation.copy(this.localOrientation),this.startRotate=new ie.Vector2,this.dRotate=new ie.Vector2,this.transitionFilter=.1,this.transitionSphericalFilter=.4,this.rotateFilter=.4,this.rotateSphericalFilter=.8,this.lockedFilter=1,this.lockedSphericalFilter=1,this.filter=1,this.sphericalFilter=1,this.scene=t;var a=this.width/this.height,r=this.height/this.width;this.perspectiveCamera=new ie.PerspectiveCamera(60,a,.1,1e3),this.orthographicCamera=new ie.OrthographicCamera(-10,10,10*r,-10*r,-100,100),this.camera=this.perspectiveCamera,this.camera.position.x=-3,this.scene.add(this.camera),this.canvas=n}return Object(B.a)(e,[{key:"updateCanvasDimensions",value:function(e,t){this.width=e,this.height=t;var n=this.width/this.height,a=this.height/this.width;this.perspectiveCamera.aspect=n,this.perspectiveCamera.updateProjectionMatrix(),this.orthographicCamera.top=10*a,this.orthographicCamera.bottom=-10*a,this.orthographicCamera.updateProjectionMatrix()}},{key:"setPerspective",value:function(){this.camera=this.perspectiveCamera}},{key:"setOrthographic",value:function(){this.camera=this.orthographicCamera}},{key:"update",value:function(){var e=this.rotating?this.rotateFilter:this.transitionFilter,t=this.rotating?this.rotateFilter:this.transitionSphericalFilter;this.currentSpherical.radius=(1-t)*this.currentSpherical.radius+t*this.spherical.radius,this.currentSpherical.phi=(1-t)*this.currentSpherical.phi+t*this.spherical.phi,this.currentSpherical.theta-this.spherical.theta>Math.PI?this.currentSpherical.theta-=2*Math.PI:this.spherical.theta-this.currentSpherical.theta>Math.PI&&(this.currentSpherical.theta+=2*Math.PI),this.currentSpherical.theta=(1-t)*this.currentSpherical.theta+t*this.spherical.theta,this.currentSpherical.makeSafe(),this.worldPosition.setFromSpherical(this.currentSpherical),this.parent.getWorldQuaternion(this.parentOrientation),this.parent.getWorldPosition(this.parentPosition),this.worldPosition.applyQuaternion(this.parentOrientation),this.worldPosition.add(this.parentPosition),this.thetaOrientation.setFromAxisAngle(this.Y,this.currentSpherical.theta),this.phiOrientation.setFromAxisAngle(this.rotatedX.copy(this.X).applyQuaternion(this.thetaOrientation),-Math.PI/2+this.currentSpherical.phi),this.localOrientation.copy(this.thetaOrientation),this.localOrientation.premultiply(this.phiOrientation),this.worldOrientation.copy(this.localOrientation),this.worldOrientation.premultiply(this.parentOrientation),this.perspectiveCamera.quaternion.slerp(this.worldOrientation,e),this.perspectiveCamera.position.lerp(this.worldPosition,e),this.orthographicCamera.quaternion.slerp(this.worldOrientation,e),this.orthographicCamera.position.lerp(this.worldPosition,e)}},{key:"setParent",value:function(e){e&&this.parent!==e&&(this.parent=e,this.filter=this.transitionFilter,this.sphericalFilter=this.transitionSphericalFilter)}}]),e}(),fe="LONG",ve="V2",ge=n(388),be="BASE",Oe="B_AXIS",Me="A_AXIS",ye="Y_AXIS",Se="TOOL",xe="DENTAL_FIXTURE",je="ABSOLUTE",we="INCREMENTAL",Ee="ABSOLUTE_ARC",Te="INCREMENTAL_ARC",Pe="INVERSE_TIME",Ae="UNITS_PER_MINUTE",Ce="UNITS_PER_REVOLUTION",ke="FIVE_AXIS",Re="TRIVIAL",Le="XY",Ie="ZX",Ge="YZ",Ne="UV",_e="WU",De="VW",Fe="IN",ze="MM",Ze="OFF",Ve=0,He=1,Be=2,Ue=3,Xe=4,Ye=28.775,We=1e-6,Ke=ee(),Je=function(e){var t;if(e instanceof ie.Mesh)t=e;else for(var n=[e];n.length>0;)for(var a=n.shift(),r=0;r<a.children.length;r++){var i=a.children[r];if(i instanceof ie.Mesh)return i;n.push(i)}return t},qe=function(){function e(t,n){var a=this;Object(H.a)(this,e),this.wheelEventListener=function(e){var t=a.props,n=t.onCameraZoom,r=t.respondToCameraGestures;e.preventDefault(),e.stopPropagation(),r&&n&&n(e.deltaY)},this.keyDownListener=function(e){var t=a.props.onDeleteActiveSphere;"Backspace"===e.key&&t&&t()},this.getViewDirection=function(){return new ie.Vector3(0,0,-1).applyMatrix4(a.cameraTransitions.camera.matrixWorld).normalize()},this.getCameraRay=function(e,t){return a.mouse.x=e/a.width*2-1,a.mouse.y=-t/a.height*2+1,a.raycaster.setFromCamera(a.mouse,a.cameraTransitions.camera),a.raycaster.ray.clone()},this.mouseDownListener=function(e){var t=a.props,n=t.onCameraStartRotating,r=t.respondToModelGestures,i=t.respondToCameraGestures,o=t.onModelPointerDown,s=t.onSpherePointerDown,c=t.onMouseDown;if(e.preventDefault(),r){var l=!1;if(a.parts.model&&(a.mouse.x=e.offsetX/a.width*2-1,a.mouse.y=-e.offsetY/a.height*2+1,a.hits.length=0,a.raycaster.setFromCamera(a.mouse,a.cameraTransitions.camera),a.raycaster.intersectObject(a.parts.model.object,!0,a.hits),a.hits.length>0&&(a.hits[0].object===a.parts.model.object?(a.modelPointerDown=!0,o&&(o(a.hits[0],e,a),l=!0)):s&&(a.spherePointerDown=a.hits[0],s(a.hits[0],e,a),l=!0),l)))return}if(i&&n&&e.button===ie.MOUSE.LEFT)return a.startRotatingX=e.offsetX,a.startRotatingY=e.offsetY,void n();c&&c(e,a)},this.mouseUpListener=function(e){e.preventDefault();var t=a.props,n=t.rotating,r=t.machineRotating,i=t.respondToCameraGestures,o=t.respondToModelGestures,s=t.onCameraStopRotating,c=t.onModelPointerUp,l=t.onSpherePointerUp,u=t.onSphereExit,d=t.onMouseUp;if(!n&&!r&&o){var h=!1;if(a.parts.model)if(a.mouse.x=e.offsetX/a.width*2-1,a.mouse.y=-e.offsetY/a.height*2+1,a.hits.length=0,a.raycaster.setFromCamera(a.mouse,a.cameraTransitions.camera),a.raycaster.intersectObject(a.parts.model.object,!0,a.hits),a.hits.length>0){if(a.hits[0].object===a.parts.model.object?(a.spherePointerDown&&l&&(l(void 0,e,a),h=!0),a.spherePointerDown=!1,c&&a.modelPointerDown&&(c(a.hits[0],e,a),h=!0),a.modelPointerDown=!1):(a.modelPointerDown&&c&&(c(void 0,e,a),h=!0),a.modelPointerDown=!1,a.spherePointerDown&&(a.hits[0].object===a.spherePointerDown.object?(l(a.hits[0],e,a),h=!0):(l(void 0,e,a),h=!0)),a.spherePointerDown=!1),h)return}else if(a.modelPointerDown&&(c&&(c(void 0,e,a),h=!0),a.modelPointerDown=!1),a.spherePointerDown&&(l&&(l(void 0,e,a),h=!0),u&&(u(a.spherePointerDown,e,a),h=!0),a.spherePointerDown=!1),h)return}i?s&&e.button===ie.MOUSE.LEFT&&s():d&&d(e,a)},this.mouseMoveListener=function(e){var t=a.props,n=t.rotating,r=t.onCameraRotate,i=t.respondToModelGestures,o=t.respondToCameraGestures,s=t.onModelEnter,c=t.onModelExit,l=t.onModelHover,u=t.onModelDrag,d=t.onSphereHover,h=t.onSphereEnter,p=t.onSphereDrag,m=t.onSphereExit,f=t.onMouseMove,v=t.machineRotating;if(!n&&!v&&i){var g=!1;if(a.parts.model)if(a.mouse.x=e.offsetX/a.width*2-1,a.mouse.y=-e.offsetY/a.height*2+1,a.hits.length=0,a.raycaster.setFromCamera(a.mouse,a.cameraTransitions.camera),a.raycaster.intersectObject(a.parts.model.object,!0,a.hits),a.hits.length>0){if(a.hits[0].object===a.parts.model.object)a.lastHitSphere&&!a.spherePointerDown&&m&&(m(a.lastHitSphere,e,a),a.lastHitSphere=!1,g=!0),a.lastHitWasModel||a.spherePointerDown||(s&&(s(a.hits[0],e,a),g=!0),a.lastHitWasModel=a.hits[0]),a.modelPointerDown?u&&(u(a.hits[0],e,a),g=!0):a.spherePointerDown?p&&(a.spherePointerDown.point.x=a.hits[0].point.x,a.spherePointerDown.point.y=a.hits[0].point.y,a.spherePointerDown.point.z=a.hits[0].point.z,a.spherePointerDown.model=a.parts.model.object,p(a.spherePointerDown,e,a),g=!0):l&&(l(a.hits[0],e,a),g=!0);else if(a.lastHitWasModel&&!a.modelPointerDown&&c&&(c(a.lastHitWasModel,e,a),g=!0),a.lastHitWasModel=!1,(!a.lastHitSphere||a.lastHitSphere&&a.hits[0].object!==a.lastHitSphere.object&&!a.spherePointerDown)&&(a.lastHitSphere&&m&&(m(a.lastHitSphere,e,a),g=!0),h&&(h(a.hits[0],e,a),g=!0),a.lastHitSphere=a.hits[0]),a.lastHitSphere&&a.spherePointerDown&&a.lastHitSphere.object===a.spherePointerDown.object){if(p)for(var b=0;b<a.hits.length;b++)if(a.parts.model.object===a.hits[b].object){a.hits[0].point.x=a.hits[b].point.x,a.hits[0].point.y=a.hits[b].point.y,a.hits[0].point.z=a.hits[b].point.z,a.hits[0].model=a.parts.model.object,p(a.hits[0],e,a),g=!0;break}}else d&&(d(a.hits[0],e,a),g=!0);if(g)return}else if(a.modelPointerDown?u&&(u(void 0,e,a),g=!0):(a.lastHitWasModel&&c&&(c(a.lastHitWasModel,e,a),g=!0),a.lastHitWasModel=!1),a.lastHitSphere&&!a.spherePointerDown&&(m&&(m(a.lastHitSphere,e,a),g=!0),a.lastHitSphere=!1),g)return}o?r&&n&&(r(e.offsetX-a.startRotatingX,e.offsetY-a.startRotatingY),a.startRotatingX=e.offsetX,a.startRotatingY=e.offsetY):f&&f(e,a)},this.touchStartListener=function(e){var t=a.props,n=t.respondToCameraGestures,r=t.onCameraStartRotating,i=t.onCameraStopRotating,o=t.rotating;if(n)switch(e.touches.length){case 1:r&&(a.startRotateX=e.touches[0].pageX,a.startRotateY=e.touches[0].pageY,r());break;case 2:i&&o&&i();var s=e.touches[0].pageX-e.touches[1].pageX,c=e.touches[0].pageY-e.touches[1].pageY;a.touchZoomStart=Math.sqrt(s*s+c*c)}},this.touchEndListener=function(e){var t=a.props,n=t.respondToCameraGestures,r=t.onCameraStartRotating,i=t.onCameraStopRotating,o=t.rotating;if(n)switch(e.touches.length){case 0:i&&o&&i();break;case 1:r&&(a.startRotateX=e.touches[0].pageX,a.startRotateY=e.touches[0].pageY,r());break;case 2:i&&o&&i()}},this.touchMoveListener=function(e){e.preventDefault(),e.stopPropagation();var t=a.props,n=t.respondToCameraGestures,r=t.onCameraRotate,i=t.onCameraStopRotating,o=t.onCameraZoom,s=t.rotating;if(n)switch(e.touches.length){case 1:r&&s&&(r(e.touches[0].pageX-a.startRotateX,e.touches[0].pageY-a.startRotateY),a.startRotateX=e.touches[0].pageX,a.startRotateY=e.touches[0].pageY);break;case 2:if(i&&s&&i(),o){var c=e.touches[0].pageX-e.touches[1].pageX,l=e.touches[0].pageY-e.touches[1].pageY,u=Math.sqrt(c*c+l*l);o(-(u-a.touchZoomStart)),a.touchZoomStart=u}}},this.addGestureListeners=function(){a.canvas.addEventListener("wheel",a.wheelEventListener,!1),a.canvas.addEventListener("mousedown",a.mouseDownListener,!1),document.addEventListener("mouseup",a.mouseUpListener,!1),a.canvas.addEventListener("mousemove",a.mouseMoveListener),a.canvas.addEventListener("touchstart",a.touchStartListener),document.addEventListener("touchend",a.touchEndListener),a.canvas.addEventListener("touchmove",a.touchMoveListener),document.addEventListener("keydown",a.keyDownListener)},this.showDentalFixture=function(){if(a.parts.dentalFixture)a.parts.dentalFixture.object.visible=!0;else if(a.parts.bAxis){var e={id:"dentalFixture",path:"models/dental_fixture.obj",material:a.toolMaterial};a.objLoader.load(e.path,(function(t){t.traverse((function(t){t instanceof ie.Mesh&&(t.material=e.material)})),e.object=t,a.parts.dentalFixture=e;var n=Je(a.parts.dentalFixture.object);n.geometry.computeBoundingBox(),a.parts.dentalFixture.boundingBox=n.geometry.boundingBox.clone(),a.parts.bAxis.object.add(a.parts.dentalFixture.object)}),(function(e){}),(function(e){console.error(e)}))}},this.hideDentalFixture=function(){a.parts.dentalFixture&&(a.parts.dentalFixture.object.visible=!1)},this.exportModelToSTL=function(){if(a.parts.model){var e,t=a.parts.model.object;if(a.parts.model.object instanceof ie.Mesh?e=a.parts.model.object:a.parts.model.object.traverse((function(t){t instanceof ie.Mesh&&(e=t)})),e)return t.updateMatrix(),ge.a(e.geometry,t.matrix,!0)}},this.showModel=function(){a.parts.model&&(a.parts.model.object.visible=!0)},this.hideModel=function(){a.parts.model&&(a.parts.model.object.visible=!1)},this.computePlaneWithLargestArea=function(){var e=a.props.onModelComputePlaneWithLargestArea;e&&e(function(e){var t={},n={},a=function(e,a,r,i,o,s,c,l,u){var d=i-e,h=o-a,p=s-r,m=c-e,f=l-a,v=u-r,g=h*v-p*f,b=p*m-d*v,O=d*f-h*m,M=Math.sqrt(g*g+b*b+O*O),y=1/M,S=y*g,x=y*b,j=y*O,w=-(e*S+a*x+r*j);S<.05&&S>-.05?S=0:Math.abs(1-S)<.05?S=1:Math.abs(-1-S)<.05&&(S=-1),x<.05&&x>-.05?x=0:Math.abs(1-x)<.05?x=1:Math.abs(-1-x)<.05&&(x=-1),j<.05&&j>-.05?j=0:Math.abs(1-j)<.05?j=1:Math.abs(-1-j)<.05&&(j=-1);var E=Math.round(S/.05),T=Math.round(x/.05),P=Math.round(j/.05),A=Math.round(w/.1),C="".concat(E,",").concat(T,",").concat(P,",").concat(A),k=.5*M;t[C]||(t[C]=0,n[C]={nx:S,ny:x,nz:j,dist:w}),t[C]+=k},r=e.geometry.getAttribute("position");if(null===e.geometry.getIndex()){for(var i=0;i<r.count;i+=9){a(r.array[i],r.array[i+1],r.array[i+2],r.array[i+3],r.array[i+4],r.array[i+5],r.array[i+6],r.array[i+7],r.array[i+8])}var o,s=Object.entries(t);s.sort((function(e,t){return t[1]-e[1]}));for(var c=0;c<s.length;c++){for(var l=n[s[c][0]],u=l.nx,d=l.ny,h=l.nz,p=l.dist,m=!1,f=0;f<r.count&&!m;f+=3){r.array[f]*u+r.array[f+1]*d+r.array[f+2]*h+p>.05+We&&(m=!0)}if(!m){o=n[s[c][0]];break}}return new ie.Plane(new ie.Vector3(o.nx,o.ny,o.nz),o.dist)}}(Je(a.parts.model.object)),a)},this.loadSTLModel=function(e){var t=a.props.smoothModelTransition,n=a.stlLoader.parse(e),r=new ie.Mesh(n,a.modelMaterial);if(r.scale.x=1/25.4,r.scale.y=1/25.4,r.scale.z=1/25.4,a.parts.model)if(a.parts.smoothModel){var i=a.parts.smoothModel.object;a.leavingModel=i,setTimeout((function(){a.parts.bAxis.object.remove(i)}),1e3)}else a.parts.bAxis.object.remove(a.parts.model.object);else a.parts.model={id:"model",material:a.modelMaterial};a.parts.model.object=r,r.traverse((function(e){e instanceof ie.Mesh&&(e.material=a.parts.model.material)})),t?(a.parts.smoothModel={id:"smoothModel",object:new ie.Object3D},a.parts.smoothModel.object.position.y=a.modelTransitionStartY,a.parts.bAxis.object.add(a.parts.smoothModel.object),a.parts.smoothModel.object.add(a.parts.model.object)):a.parts.bAxis.object.add(a.parts.model.object)},this.loadObjModel=function(e){var t=a.props.smoothModelTransition,n=a.objLoader.parse(e);if(n.scale.x=1/25.4,n.scale.y=1/25.4,n.scale.z=1/25.4,a.parts.model)if(a.parts.smoothModel){var r=a.parts.smoothModel.object;a.leavingModel=r,setTimeout((function(){a.parts.bAxis.object.remove(r)}),1e3)}else a.parts.bAxis.object.remove(a.parts.model.object);else a.parts.model={id:"model",material:a.modelMaterial};a.parts.model.object=n,n.traverse((function(e){e instanceof ie.Mesh&&(e.material=a.parts.model.material)})),t?(a.parts.smoothModel={id:"smoothModel",object:new ie.Object3D},a.parts.smoothModel.object.position.y=a.modelTransitionStartY,a.parts.bAxis.object.add(a.parts.smoothModel.object),a.parts.smoothModel.object.add(a.parts.model.object)):a.parts.bAxis.object.add(a.parts.model.object)},this.parentCameraToTool=function(){a.ready&&a.cameraTransitions.setParent(a.parts.tool.object)},this.parentCameraToDentalFixture=function(){a.ready&&a.cameraTransitions.setParent(a.parts.dentalFixtureFocusPoint.object)},this.parentCameraToB=function(){a.ready&&a.cameraTransitions.setParent(a.parts.bAxis.object)},this.parentCameraToA=function(){a.ready&&a.cameraTransitions.setParent(a.parts.aAxis.object)},this.parentCameraToY=function(){a.ready&&a.cameraTransitions.setParent(a.parts.yAxis.object)},this.parentCameraToBase=function(){a.ready&&a.cameraTransitions.setParent(a.parts.base.object)},this.update=function(e){a.props=e;var t=a.props,n=t.cameraParent,r=t.cameraMode,i=t.showModel,o=t.showDentalFixture,s=t.rotating,c=t.phi,l=t.theta,u=t.radius,d=t.orthographicZoom,h=t.showGhostSphere,p=t.ghostSpherePosition,m=t.ghostSphereOpacity,f=t.points,v=t.activePoint,g=t.highlightedPoint,b=t.hideTool,O=t.highlightModel,M=t.modelRX,y=t.modelRY,S=t.modelRZ,x=t.modelTX,j=t.modelTY,w=t.modelTZ,E=t.machine;if(a.ready)switch(E){case"V2_50":a.parts.v250ToolHolder.object.visible=!0,a.parts.toolHolder.object.visible=!1,a.parts.toolHolderShort.object.visible=!1,a.parts.v250Spindle.object.visible=!0,a.parts.v210Spindle.object.visible=!1;break;case ve:a.parts.v250ToolHolder.object.visible=!1,a.parts.v250Spindle.object.visible=!1,a.parts.v210Spindle.object.visible=!0}a.parts.model&&(Je(a.parts.model.object).material=O?a.highlightedModelMaterial:a.modelMaterial,"undefined"!==typeof x&&(a.parts.model.object.position.x=x),"undefined"!==typeof j&&(a.parts.model.object.position.y=j),"undefined"!==typeof w&&(a.parts.model.object.position.z=w),"undefined"!==typeof M&&(a.parts.model.object.rotation.x=M),"undefined"!==typeof y&&(a.parts.model.object.rotation.y=y),"undefined"!==typeof S&&(a.parts.model.object.rotation.z=S),a.parts.model.object.updateMatrix(),a.parts.model.object.updateMatrixWorld()),a.parts.tool&&(a.parts.tool.object.visible=!b),a.ghostSphere.visible=h,p&&(a.ghostSphere.position.x=p.x,a.ghostSphere.position.y=p.y,a.ghostSphere.position.z=p.z);var T=m||0;if(a.ghostSphere.material.opacity=T,a.ghostSphere.material.transparent=!(T>=1),f&&a.parts.model){if(a.spheres.length<f.length)for(var P=f.length-a.spheres.length,A=0;A<P;A++){var C=new ie.Mesh(a.sphereGeometry,a.sphereMaterial);C.userData.index=a.spheres.length,a.parts.model.object.add(C),a.spheres.push(C)}for(var k=0;k<a.spheres.length;k++)a.spheres[k].parent!==a.parts.model.object&&a.parts.model.object.add(a.spheres[k]),a.spheres[k].material=k===v?k===g?a.highlightedActiveSphereMaterial:a.activeSphereMaterial:k===g?a.highlightedSphereMaterial:a.sphereMaterial,k<f.length?(a.spheres[k].visible=!0,a.spheres[k].position.x=f[k][0],a.spheres[k].position.y=f[k][1],a.spheres[k].position.z=f[k][2]):a.spheres[k].visible=!1}switch(a.cameraTransitions.rotating=s,a.cameraTransitions.spherical.phi=c,a.cameraTransitions.spherical.theta=l,a.cameraTransitions.spherical.radius=u,a.cameraTransitions.orthographicCamera.zoom=d,a.cameraTransitions.orthographicCamera.updateProjectionMatrix(),n){case be:a.parentCameraToBase();break;case ye:a.parentCameraToY();break;case Oe:a.parentCameraToB();break;case Me:a.parentCameraToA();break;case Se:a.parentCameraToTool();break;case xe:a.parentCameraToDentalFixture()}switch(r){case"PERSPECTIVE":a.cameraTransitions.setPerspective();break;case"ORTHOGRAPHIC":a.cameraTransitions.setOrthographic()}i?a.showModel():a.hideModel(),o?a.showDentalFixture():a.hideDentalFixture()},this.updateDimensions=function(e,t){a.width=e,a.height=t,a.renderer.setSize(a.width,a.height),a.cameraTransitions.updateCanvasDimensions(e,t),a.viewCube.setPosition(e-150,a.height-100)},this.updateMachine=function(){var e=a.props,t=e.smoothJointTransitions,n=e.smoothModelTransition;if(a.ready){if(a.checkLimits(),a.cameraTransitions.update(),t){for(var r=0;r<a.smoothJoints.length;r++){if(4===r){var i=((a.props.joints[r]-a.smoothJoints[r])%360+360)%360;i>180&&(i-=360),a.smoothJoints[r]=a.props.joints[r]-i}a.smoothJoints[r]=a.smoothJoints[r]*a.smoothJointsFilter+a.props.joints[r]*(1-a.smoothJointsFilter)}a.parts.bAxis.object.rotation.y=a.smoothJoints[4]*Math.PI/180,a.parts.aAxis.object.rotation.x=a.smoothJoints[3]*Math.PI/180,a.parts.yAxis.object.position.y=-a.smoothJoints[1],a.parts.zAxis.object.position.z=6.26+a.smoothJoints[2],a.parts.xAxis.object.position.x=a.smoothJoints[0]}else a.parts.bAxis.object.rotation.y=a.props.joints[4]*Math.PI/180,a.parts.aAxis.object.rotation.x=a.props.joints[3]*Math.PI/180,a.parts.yAxis.object.position.y=-a.props.joints[1],a.parts.zAxis.object.position.z=6.26+a.props.joints[2],a.parts.xAxis.object.position.x=a.props.joints[0];a.parts.model&&n&&(a.parts.smoothModel.object.position.y=a.parts.smoothModel.object.position.y*a.modelTransitionFilter),a.leavingModel&&n&&(a.leavingModel.position.y=a.leavingModel.position.y*a.modelTransitionFilter+a.modelTransitionStartY*(1-a.modelTransitionFilter)),a.parts.tool&&(a.parts.tool.object.position.z=-a.props.toolLength,a.parts.tool.object.scale.x=a.props.toolDiameter,a.parts.tool.object.scale.y=a.props.toolDiameter,a.parts.toolHolder.object.rotation.z=a.props.spindleAngle,a.parts.toolHolderShort.object.rotation.z=a.props.spindleAngle,a.props.machine===ve&&("SHORT"===a.props.toolHolder?(a.parts.toolHolderShort.object.visible=!0,a.parts.toolHolder.object.visible=!1):a.props.toolHolder===fe?(a.parts.toolHolderShort.object.visible=!1,a.parts.toolHolder.object.visible=!0):(a.parts.toolHolderShort.object.visible=!1,a.parts.toolHolder.object.visible=!1)))}},this.render=function(){var e=a.props.showViewCube;a.renderer.clear(),a.renderer.setViewport(0,0,a.width,a.height),a.renderer.setScissorTest(!1),a.renderer.render(a.scene,a.cameraTransitions.camera),e&&(a.viewCube.setOrientation(a.cameraTransitions.localOrientation),a.viewCube.render(a.renderer))},this.checkLimits=function(){for(var e={0:a.parts.xAxis,1:a.parts.yAxis,2:a.props.machine===ve?a.parts.v210Spindle:a.parts.v250Spindle,3:a.parts.aAxis,4:a.parts.bAxis},t=0;t<a.props.joints.length;t++)a.props.joints[t]<a.props.limits.min[t]-We||a.props.joints[t]>a.props.limits.max[t]+We?(e[t].material&&(e[t].material.color=new ie.Color(1,0,0),e[t].material.emissive=new ie.Color(.3,0,0)),a.totalTime=0):e[t].material&&(e[t].material.color=new ie.Color(1,1,1),e[t].material.emissive=new ie.Color(0,0,0))},this.createLights=function(){var e=new ie.DirectionalLight(16777215,.15);e.position.set(-30,30,30),e.lookAt(0,0,0);var t=new ie.DirectionalLight(16777215,.15);t.position.set(-30,30,-30),t.lookAt(0,0,0);var n=new ie.DirectionalLight(16777215,.07);n.position.set(30,30,30),n.lookAt(0,0,0);var r=new ie.DirectionalLight(16777215,.07);r.position.set(30,30,-30),r.lookAt(0,0,0);var i=new ie.DirectionalLight(16777215,.07);i.position.set(30,-30,-30),i.lookAt(0,0,0),a.scene.add(i),a.scene.add(e),a.scene.add(t),a.scene.add(n),a.scene.add(r)},this.findTime=function(e){if(e>=a.times[a.times.length-1])return a.times.length-1;for(var t=0,n=a.times.length-1,r=Math.floor(a.times.length/2);!(a.times[r]<e&&a.times[r+1]>=e);)a.times[r]>=e?n=r:t=r,r=Math.floor(.5*(t+n));return r},this.step=function(e){a.viewCube.step(e)},this.props=n,this.canvas=t,this.startTime=K()(),this.smoothJoints=Object(Y.a)(n.joints),this.smoothJointsFilter=.6,this.modelTransitionFilter=.85,this.modelTransitionStartY=10,this.raycaster=new ie.Raycaster,this.hits=[],this.mouse=new ie.Vector2,this.backplot=le.getInstance(),this.backplotStrip=de.getInstance(),this.scene=new ie.Scene,this.scene.background=new ie.Color(13421772),this.renderer=new ie.WebGLRenderer({canvas:t}),this.renderer.autoClear=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.width=window.innerWidth,this.height=window.innerHeight,this.viewCube=new pe(t,this.width-150,this.height-100,100,100);this.viewCube.addEventListener("click",(function(e){var t=a.props.onCameraSetDirection;t&&t(e.x,e.y,e.z);var n=Math.max(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z)),r=e.x/n,i=e.y/n,o=e.z/n;Ke.event("ViewCube","clicked face ("+(r<We&&r>-We?0:r)+", "+(i<We&&i>-We?0:i)+", "+(o<We&&o>-We?0:o)+")").send()})),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(16777215,1),this.cameraTransitions=new me(this.scene,t),this.createLights();var r=new ie.OBJLoader;this.stlLoader=new ie.STLLoader,this.objLoader=r;var i=new ie.TextureLoader;this.textureLoader=i;var o="textures/cube/",s=[o+"px.jpg",o+"nx.jpg",o+"py.jpg",o+"ny.jpg",o+"pz.jpg",o+"nz.jpg"];this.envMap=(new ie.CubeTextureLoader).load(s),this.envMap.format=ie.RGBFormat,this.envMap.mapping=ie.CubeReflectionMapping;var c=new ie.MeshStandardMaterial({color:4539717,metalness:1,roughness:.5,envMap:this.envMap,envMapIntensity:1.5});this.toolMaterial=new ie.MeshStandardMaterial({color:16777215,metalness:1,roughness:.3,envMap:this.envMap});var l=this.toolMaterial,u=new ie.MeshStandardMaterial({color:1118481,metalness:.5,roughness:.6,envMap:this.envMap,emissive:14483456}),d=new ie.MeshStandardMaterial({color:16777215,metalness:.2,roughness:.6,envMap:this.envMap,emissive:4473929});this.sphereGeometry=new ie.SphereGeometry(.5,32,32),this.ghostSphereGeometry=new ie.SphereGeometry(.01968,32,32),this.ghostMaterial=new ie.MeshStandardMaterial({color:2616319,metalness:.7,roughness:.7,envMap:this.envMap,envMapIntensity:3,opacity:.5,transparent:!0}),this.sphereMaterial=new ie.MeshStandardMaterial({color:2616319,metalness:.7,roughness:.7,envMap:this.envMap,envMapIntensity:3}),this.highlightedSphereMaterial=new ie.MeshStandardMaterial({color:2616319,metalness:.7,roughness:.7,envMap:this.envMap,envMapIntensity:4}),this.activeSphereMaterial=new ie.MeshStandardMaterial({color:13434641,metalness:.7,roughness:.7,envMap:this.envMap,envMapIntensity:3}),this.highlightedActiveSphereMaterial=new ie.MeshStandardMaterial({color:13434641,metalness:.7,roughness:.7,envMap:this.envMap,envMapIntensity:4}),this.ghostSphere=new ie.Mesh(this.ghostSphereGeometry,this.ghostMaterial),this.ghostSphere.visible=this.props.showGhostSphere,this.scene.add(this.ghostSphere),this.spheres=[],this.modelMaterial=new ie.MeshStandardMaterial({color:16777215,metalness:.5,roughness:.6,envMap:this.envMap,emissive:2236962}),this.highlightedModelMaterial=new ie.MeshStandardMaterial({color:2616319,metalness:.5,roughness:.6,envMap:this.envMap,envMapIntensity:1.5,opacity:.75,transparent:!0,emissive:738892});var h=[{id:"aAxis",path:"models/v2/aAxis.obj",map:"textures/v2/aAxisMap.png"},{id:"bAxis",path:"models/v2/bAxis.obj",map:"textures/v2/bAxisMap.png"},{id:"xAxis",path:"models/v2/xAxis.obj",map:"textures/v2/xAxisMap.png"},{id:"yAxis",path:"models/v2/yAxis.obj",map:"textures/v2/yAxisMap.png"},{id:"v250Spindle",path:"models/v2/zAxisV250.obj",map:"textures/v2/zAxisV250Map.png"},{id:"v210Spindle",path:"models/v2/zAxis.obj",map:"textures/v2/zAxisMap.png"},{id:"base",path:"models/v2/base.obj",map:"textures/v2/baseMap.png"},{id:"baseButtons",path:"models/v2/base_buttons.obj",material:l},{id:"estopRing",path:"models/v2/estop_ring.obj",material:u},{id:"startStopRing",path:"models/v2/start_stop_ring.obj",material:d},{id:"v250ToolHolder",path:"models/v2/v250ToolHolder.obj",map:"textures/v2/v250ToolHolderAO.png",shiny:!0},{id:"toolHolder",path:"models/long_tool_holder.obj",material:l},{id:"toolHolderShort",path:"models/short_tool_holder.obj",material:l},{id:"toolColletHolder",path:"models/long_tool_collet_holder.obj",material:c},{id:"toolColletHolderShort",path:"models/short_tool_collet_holder.obj",material:c}];this.props.showDentalFixture&&h.push({id:"dentalFixture",path:"models/dental_fixture.obj",material:this.toolMaterial}),this.parts={},h.forEach((function(e){r.load(e.path,(function(t){e.material&&t.traverse((function(t){t instanceof ie.Mesh&&(t.material=e.material)})),e.object=t,Ke.timing("Viewer3D","Loaded Model "+e.id,Math.round(K()()-a.startTime)).send()}),(function(e){}),(function(e){console.error(e)})),e.map?i.load(e.map,(function(t){e.shiny?e.material=new ie.MeshStandardMaterial({map:t,metalness:1,roughness:.3,envMap:a.envMap}):e.material=new ie.MeshStandardMaterial({map:t,metalness:1,roughness:.4,envMapIntensity:1.25,envMap:a.envMap}),e.object&&e.object.traverse((function(t){t instanceof ie.Mesh&&(t.material=e.material)})),Ke.timing("Viewer3D","Loaded Texture "+e.id,Math.round(K()()-a.startTime)).send()}),void 0,(function(e){console.error(e)})):e.object&&e.object.traverse((function(t){t instanceof ie.Mesh&&(t.material=e.material)}))}));this.time=0,function e(){var t=!0;if(h.forEach((function(e){e.object&&e.material||(t=!1)})),t){h.forEach((function(e){a.parts[e.id]=e}));var n=new ie.CylinderGeometry(.5,.5,6,32),r=new ie.SphereGeometry(.5,32,32),i=new ie.Mesh(n,l),o=new ie.Mesh(r,l),s=new ie.Group;if(i.position.z=3,i.rotation.x=Math.PI/2,o.position.z=.03125,s.add(i),a.parts.tool={object:s,material:l},a.parts.zAxis={object:new ie.Group},a.parts.zAxis.object.add(a.parts.v250Spindle.object),a.parts.zAxis.object.add(a.parts.v210Spindle.object),"V2_50"===a.props.machine?a.parts.v210Spindle.object.visible=!1:(a.parts.v250Spindle.object.visible=!1,a.parts.v250ToolHolder.object.visible=!1),a.parts.zAxis.object.position.z=3,a.parts.aAxis.object.rotation.x=0,a.parts.xAxis.object.add(a.parts.zAxis.object),a.parts.yAxis.object.add(a.parts.aAxis.object),a.parts.zAxis.object.add(a.parts.tool.object),a.parts.zAxis.object.add(a.parts.toolHolder.object),a.parts.zAxis.object.add(a.parts.v250ToolHolder.object),a.parts.toolHolder.object.add(a.parts.toolColletHolder.object),a.parts.toolHolder.object.visible=!1,a.parts.zAxis.object.add(a.parts.toolHolderShort.object),a.parts.toolHolderShort.object.add(a.parts.toolColletHolderShort.object),a.parts.aAxis.object.add(a.parts.bAxis.object),a.parts.bAxis.object.add(a.backplot.object),a.parts.bAxis.object.add(a.backplotStrip.object),a.parts.base.object.add(a.parts.yAxis.object),a.parts.base.object.add(a.parts.xAxis.object),a.parts.base.object.add(a.parts.baseButtons.object),a.parts.base.object.add(a.parts.estopRing.object),a.parts.base.object.add(a.parts.startStopRing.object),a.props.showDentalFixture){a.parts.bAxis.object.add(a.parts.dentalFixture.object);var c=Je(a.parts.dentalFixture.object);c.geometry.computeBoundingBox(),a.parts.dentalFixture.boundingBox=c.geometry.boundingBox.clone(),a.parts.dentalFixtureFocusPoint={id:"dentalFixtureFocusPoint",object:new ie.Object3D},a.parts.dentalFixtureFocusPoint.object.position.y=(3+Ye)/25.4,a.parts.bAxis.object.add(a.parts.dentalFixtureFocusPoint.object)}a.scene.add(a.parts.base.object),a.props.showDentalFixture?a.cameraTransitions.setParent(a.parts.dentalFixtureFocusPoint.object):a.cameraTransitions.setParent(a.parts.yAxis.object),a.ready=!0,Ke.timing("Viewer3D","Ready",Math.round(K()()-a.startTime)).send()}else window.setTimeout(e,500)}(),this.addGestureListeners()}return Object(B.a)(e,null,[{key:"getInstance",value:function(){return e.instance}},{key:"createInstance",value:function(t,n){return e.instance=new e(t,n),e.instance}}]),e}(),$e=n(8),Qe=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).updateDimensions=function(){var t=e.props,n=t.hideTitleBar,a=t.onUpdateDimensions,r=window.innerWidth,i=window.innerHeight-(n?0:64);e.viewer.updateDimensions(r,i),a&&a(r,i)},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hideTitleBar,a=t.onUpdateDimensions;window.addEventListener("resize",this.updateDimensions),this.viewer=qe.createInstance(this.canvas,this.props);var r=window.innerWidth,i=window.innerHeight-(n?0:64);this.viewer.updateDimensions(r,i),a&&a(r,i);!function t(){e.animationRequestID=window.requestAnimationFrame(t),e.viewer.step(.01667),e.viewer.updateMachine(),e.viewer.render()}()}},{key:"componentWillUnmount",value:function(){this.animationRequestID&&window.cancelAnimationFrame(this.animationRequestID),this.viewer=null,window.removeEventListener("resize",this.updateDimensions)}},{key:"componentDidUpdate",value:function(){this.viewer.update(this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.hideTitleBar;return f.a.createElement("div",{className:a?"":n.container},f.a.createElement("canvas",{ref:function(t){return e.canvas=t}}))}}]),n}(m.Component),et=Object($e.a)({container:{paddingTop:64,overflow:"hidden"}})(Qe),tt={G4:!0,G5:!0,"G5.1":!0,"G5.2":!0,"G5.3":!0,G7:!0,G8:!0,G10:!0,"G17.1":!0,"G18.1":!0,"G19.1":!0,G28:!0,"G28.1":!0,G30:!0,"G30.1":!0,G33:!0,"G33.1":!0,"G38.2":!0,"G38.3":!0,"G38.4":!0,"G38.5":!0,G41:!0,G42:!0,"G41.1":!0,"G42.1":!0,"G43.1":!0,"G43.2":!0,G54:!0,G55:!0,G56:!0,G57:!0,G58:!0,G59:!0,"G59.1":!0,"G59.2":!0,"G59.3":!0,G61:!0,"G61.1":!0,G64:!0,G73:!0,G76:!0,G80:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,G92:!0,"G92.1":!0,"G92.2":!0,"G92.3":!0,G95:!0,G96:!0,G97:!0,G98:!0,G99:!0,M0:!0,M1:!0,M2:!0,M30:!0,M7:!0,M8:!0,M9:!0,M19:!0,M48:!0,M49:!0,M50:!0,M51:!0,M52:!0,M53:!0,M61:!0,M62:!0,M63:!0,M64:!0,M65:!0,M66:!0,M67:!0,M68:!0,M70:!0,M71:!0,M72:!0,M73:!0},nt={G0:"Move at machine's maximum speed.",G1:"Move at the current feed rate.",G2:"Make a clockwise arc move.",G3:"Make a counter-clockwise arc move.",G4:"Dwell in place.",G5:"Make a cubic spline move.","G5.1":"Make a quadratic spline move.","G5.2":"Make a NURBS move.","G5.3":"Make a NURBS move.",G80:"Cancel canned cycle.",G17:"Select XY plane.",G18:"Select XZ plane.",G19:"Select YZ plane.",G40:"Turn off cutter compensation.",G43:"Enable tool length offset.",G49:"Disable tool length offset.",G60:"Enable 5-axis inverse kinematics.","G60.1":"Disable 5-axis inverse Kinematics.",G90:"Set absolute distance mode.",G91:"Set incremental distance mode.","G90.1":"Set absolute arc distance mode.","G91.1":"Set incremental arc distance mode.",G93:"Set inverse time feed rate mode.",G94:"Set units per minute feed rate mode.",G7:"Enable lathe diameter mode.",G8:"Enable lathe radius mode.",G10:"Set tool table and coordinate system.","G17.1":"Select UV plane.","G18.1":"Select WU plane.","G19.1":"Select VW plane.",G28:"Go to predefined absolute position stored in parameters 5161-5166.","G28.1":"Store current position in parameters 5161-5166",G30:"Go to predefined absolute position stored in parameters 5181-5186.","G30.1":"Store current position in parameters 5181-5186.",G33:"Spindle synchronized motion.","G33.1":"Rigid tapping.","G38.2":"Probe toward workpiece, stop on contact, signal error if failure. Implemented to behave like G1.","G38.3":"Probe toward workpiece, stop on contact. Implemented to behave like G1.","G38.4":"Probe away from workpiece, stop on loss of contact, signal error if failure. Implemented to behave like G1.","G38.5":"Probe away from workpiece, stop on loss of contact. Implemented to behave like G1.",G41:"Enable cutter compensation left of programmed path.",G42:"Enable cutter compensation right of programmed path.","G41.1":"Enable cutter compensation left of programmed path with tool diameter.","G42.1":"Enable cutter compensation right of programmed path with tool diameter.","G43.1":"Dynamic tool length offset.","G43.2":"Apply additional tool length offset.",G54:"Select coordinate system 1 (the default).",G55:"Select coordinate system 2.",G56:"Select coordinate system 3.",G57:"Select coordinate system 4.",G58:"Select coordinate system 5.",G59:"Select coordinate system 6.","G59.1":"Select coordinate system 7.","G59.2":"Select coordinate system 8.","G59.3":"Select coordinate system 9.",G61:"Enable exact path mode.","G61.1":"Enable exact path mode.",G64:"Set path blending parameters.",G73:"Drilling cycle with chip breaking.",G76:"Threading cycle.",G81:"Drilling cycle.",G82:"Drilling cycle, dwell.",G83:"Peck drilling cycle.",G84:"Right-hand tapping cycle.",G85:"Boring cycle, feed out.",G86:"Boring cycle, spindle stop, rapid move out.",G87:"Back boring cycle.",G88:"Boring cycle, spindle stop, manual out.",G89:"Boring cycle, dwell, feed out.",G92:"Offsets the coordinate system by setting the current point to the axis numbers you want and stores the offsets in parameters 5211-5219.","G92.1":"Reset G92 offsets to zero and sets parameters 5211-5219 to zero.","G92.2":"Reset G92 offsets to zero.","G92.3":"Set the G92 offsets to the values saved in parameters 5211-5219.",G95:"Set units per revolution feed rate mode.",G96:"Spindle control mode, constant surface speed.",G97:"Spindle control mode, RPM mode.",G98:"Retract to the position that axis was in just before this series of one or more contiguous canned cycles was started.",G99:"Retract to the position specified by the R word of the canned cycle.",M3:"Turn on spindle going clockwise.",M4:"Turn on spindle going counter-clockwise.",M5:"Turn off spindle.",M6:"Change tool.",M0:"Pause program.",M1:"Pause program if optional stop switch is on.",M2:"End the program. Pressing cycle start will start the program at the beginning of the file.",M30:"End the program. Pressing cycle start will start the program at the beginning of the file.",M7:"Turn mist coolant on.",M8:"Turn flood coolant on.",M9:"Turn both mist and flood coolant off.",M19:"Orient spindle.",M48:"Enable speed and feed rate override controls.",M49:"Disable spindle speed and feed rate override controls.",M50:"Feed override control.",M51:"Spindle speed override control.",M52:"Use adaptive feed.",M53:"Enable feed stop switch.",M61:"Change the current tool number while in MDI or Manual mode.",M62:"Turn on digital output synchronized with motion.",M63:"Turn on digital output synchronized with motion.",M64:"Turn on digital output immediately.",M65:"Turn on digital output immediately.",M66:"Wait on digital input.",M67:"Set an analog output synchronized with motion.",M68:"Set an analog output immediately.",M70:"Save modal state.",M71:"Invalidate saved modal state.",M72:"Restore modal state.",M73:"Save modal state with a subroutine and restore state on subroutine endsub or any return path."},at={G0:L.machineState.motion.rapid,G1:L.machineState.motion.linear,G2:L.machineState.motion.arcCW,G3:L.machineState.motion.arcCCW,"G38.2":L.machineState.motion.linear,"G38.3":L.machineState.motion.linear,"G38.4":L.machineState.motion.linear,"G38.5":L.machineState.motion.linear,G17:L.machineState.planeSelect.setXY,G18:L.machineState.planeSelect.setZX,G19:L.machineState.planeSelect.setYZ,G40:L.machineState.cutterCompensation.off,G43:L.machineState.tool.setToolLengthOffset,G49:L.machineState.tool.clearToolLengthOffset,G60:L.machineState.kinematicsMode.setFiveAxis,"G60.1":L.machineState.kinematicsMode.setTrivial,G90:L.machineState.distanceMode.setAbsolute,G91:L.machineState.distanceMode.setIncremental,"G90.1":L.machineState.distanceMode.setAbsoluteArc,"G91.1":L.machineState.distanceMode.setIncrementalArc,G93:L.machineState.feedRateMode.setInverseTime,G94:L.machineState.feedRateMode.setUnitsPerMinute,M3:L.machineState.spindleControl.cw,M4:L.machineState.spindleControl.ccw,M5:L.machineState.spindleControl.off,M6:L.machineState.tool.change},rt={G20:L.machineState.units.setIn,G21:L.machineState.units.setMm},it={T:L.machineState.tool.set,S:L.machineState.spindleSpeed.set,F:L.machineState.feedRate.set},ot={G53:!0},st=L.machineState.motion.setPosition,ct="UNIMPLEMENTED",lt="MINIMUM_LIMIT",ut="MAXIMUM_LIMIT";function dt(e,t){return{message:"Can't run multiple commands in the same modal group on the same line. Codes "+e.slice(0,e.length-1).join(", ")+" and "+e[e.length-1]+" are in modal group "+t+".",codes:e,group:t,type:"MULTIPLE_COMMANDS_IN_MODAL_GROUP",severity:"error"}}function ht(e,t){return{message:e+" axis exceeded maximum limit by "+t.toFixed(4)+".",axis:e,amount:t,type:ut,severity:"error"}}function pt(e){var t=function(e){return nt[e]}(e);return{message:"Ignoring "+e+" as it is currently unimplemented in the simulator. Intended usage: "+t,description:t,severity:"warning",type:ct,code:e}}function mt(e,t){return Object(O.a)(Object(O.a)({},e),{},{line:t})}var ft=function(e){var t=e[3],n=e[4],a=t*Math.PI/180,r=n*Math.PI/180,i=Math.cos(a),o=Math.sin(a),s=Math.cos(r);return{X:-Math.sin(r)*i,Y:o,Z:s*i}},vt=function(e,t){return gt(e,t)},gt=function(e,t){var n=e[3],a=e[4],r=n*Math.PI/180,i=a*Math.PI/180,o=Math.cos(r),s=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=t,d=e[0],h=e[1],p=e[2];return{X:d*c+h*l*s-(p-u)*l*o,Y:h*o+(p-u)*s,Z:d*l-h*c*s+(p-u)*c*o,A:n,B:a}},bt=function(e,t){var n=e.A,a=e.B,r=n*Math.PI/180,i=a*Math.PI/180,o=Math.cos(r),s=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=t,d=e.X,h=e.Y,p=e.Z;return[d*c+p*l,d*l*s+h*o-p*c*s,-d*l*o+h*s+p*c*o+u,n,a]},Ot={inverseKinematics:function(e,t){var n=e.kinematicsMode,a=0;t||(a=e.tool.toolLengthOffset.Z);var r=e.motion.position;return n===ke?bt(r,a):[r.X,r.Y,r.Z+a,r.A,r.B]},forwardKinematics:function(e,t){var n=e.kinematicsMode,a=t?0:e.tool.toolLengthOffset.Z,r=e.joints;return n===ke?gt(r,a):{X:r[0],Y:r[1],Z:r[2]-a,A:r[3],B:r[4]}}},Mt={extents:{max:[2.55,2.55,.1,135,9999],min:[-2,-2.5,-3.45,-25,-9999]},velocities:[1,1,1,37.5,37.5],accelerations:[10,10,10,300,300]},yt=["X","Y","Z","A","B"],St=function(e,t){for(var n,a,r=[],i=0;i<e.length;i++){var o=e[i];o<t.extents.min[i]-We?r.push((n=yt[i],a=Math.abs(o-t.extents.min[i]),{message:n+" axis exceeded minimum limit by "+a.toFixed(4)+".",axis:n,amount:a,type:lt,severity:"error"})):o>t.extents.max[i]+We&&r.push(ht(yt[i],Math.abs(o-t.extents.max[i])))}return r.length>0?r:[]},xt=ft,jt=vt,wt=gt,Et=bt,Tt=Ot,Pt={extents:{max:[2.55,2.55,0,135,9999],min:[-2,-2.5,-3.54,-25,-9999]},velocities:[1,1,1,37.5,37.5],accelerations:[10,10,10,300,300]},At=yt,Ct=St,kt={[ve]:d,V2_50:h},Rt=Object(b.b)((function(e,t){var n=e.machineState,a=n.tool.loaded-1,r=0,i=.125,o="NONE";if(a>=0){var s=n.tool.table[a];r=6.26+s.Z,i=2*s.R,o=s.holder}var c=n.tool.toolLengthOffset.Z,l=e.interpreter.currentTime,u=0;"OFF"!==n.spindleControl&&(u=2*l*Math.PI*n.spindleSpeed,"CCW"===n.spindleControl&&(u*=-1));var d=n.joints,h=kt[n.machine].limits.extents;return{machine:n.machine,responseToCameraGestures:!0,toolLength:r,toolDiameter:i,toolHolder:o,spindleAngle:u,toolOffsetZ:c,joints:d,limits:h,axes:"XYZAB",currentTime:e.interpreter.currentTime,currentLine:e.interpreter.currentLine,hideTitleBar:!e.ui.titleBar.visible,cameraParent:e.viewer3d.cameraParent,showModel:e.viewer3d.showModel,dentalAlignerMode:e.viewer3d.dentalAlignerMode,cameraMode:e.viewer3d.cameraMode,rotating:e.viewer3d.rotating,radius:e.viewer3d.radius,orthographicZoom:e.viewer3d.orthographicZoom,phi:e.viewer3d.phi,theta:e.viewer3d.theta,showViewCube:!0,smoothJointTransitions:!1,smoothModelTransition:!0,respondToCameraGestures:!0}}),(function(e,t){return{onUpdateDimensions:function(t,n){return e(V.viewer3d.setDimensions(t,n))},onCameraZoom:function(t){return e(V.viewer3d.cameraZoom(t))},onCameraStartRotating:function(){return e(V.viewer3d.cameraStartRotating())},onCameraStopRotating:function(){return e(V.viewer3d.cameraStopRotating())},onCameraRotate:function(t,n){return e(V.viewer3d.cameraRotate(t,n))},onCameraSetDirection:function(t,n,a){return e(V.viewer3d.cameraSetDirection(t,n,a))}}}))(et),Lt=n(95),It=n(753),Gt=n(754),Nt=n(184),_t=n(749),Dt=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFileSelect=function(t){var n=e.props,a=n.onFileSelect,r=n.onRead;1===t.target.files.length&&(a&&a(t.target.files[0]),r&&e.readFile(t.target.files[0]),e.fileInput.value="")},e.handleFileOpen=function(t){e.fileInput.click()},e.readFile=function(t){var n=e.props,a=n.onRead,r=n.onFinished,i=n.onError,o=n.chunkSize,s=n.stopReading,c=n.binary,l=t.size,u=o||65536,d=0,h=null,p=function(e){null===e.target.error?(c?(a(e.target.result,Math.min(u,e.target.result.byteLength),l),d+=e.target.result.byteLength):(a(e.target.result,Math.min(u,e.target.result.length),l),d+=e.target.result.length),d>=l||s&&s()?r&&r():h(d,u)):i&&i(e.target.error)};(h=function(e,n){var a=new FileReader,r=t.slice(e,n+e);a.onload=p,c?a.readAsArrayBuffer(r):a.readAsText(r)})(d,u)},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.children,r=t.color,i=t.component,o=t.disabled,s=t.disableFocusRipple,c=t.disableRipple,l=t.fullWidth,u=t.href,d=t.mini,h=t.size,p=t.variant,m=t.buttonClasses,v=t.accept;return f.a.createElement("span",null,f.a.createElement(_t.a,{onClick:this.handleFileOpen,classes:m,component:i,color:r,disabled:o,disableFocusRipple:s,disableRipple:c,fullWidth:l,href:u,mini:d,size:h,variant:p},a),f.a.createElement("input",{onChange:this.handleFileSelect,ref:function(t){return e.fileInput=t},type:"file",accept:v,className:n.fileSelect}))}}]),n}(m.Component),Ft=Object($e.a)((function(e){return{fileSelect:{display:"none"}}}))(Dt),zt=n(178),Zt=n.n(zt),Vt=ee(),Ht=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFileSelect=function(t){var n=e.props,a=n.onLoading,r=n.onSetFileName;e.fileSize=t.size,e.fileName=t.name,e.read=0,e.lines=[],e.buffer="",r&&r(t.name),Vt.event("GCodeLoader","GCode File Size","GCode File Size",e.fileSize).send(),e.startTime=K()(),a&&a()},e.handleFinished=function(){var t=e.props.onFinished;e.stopReadingFile=!1,t&&t(),Vt.timing("GCodeLoader","loaded gcode file",Math.round(K()()-e.startTime)).send()},e.handleRead=function(t,n){var a,r=e.props,i=r.onProgress,o=r.onLines,s=r.onError;e.read+=n;var c=Math.min(e.read/e.fileSize*100,100),l=(e.buffer+t).split("\n");e.buffer=l.pop(),(a=e.lines).push.apply(a,Object(Y.a)(l.map((function(e){return e.replace(/\r/,"")})))),s&&e.lines.length>2e6&&(e.stopReadingFile=!0,o(e.lines),s(new Error("GCode program exceeds 2 million lines. Program truncated to "+e.lines.length+" lines."))),i&&i(c),o&&(e.read===n?o(e.lines.slice(),!0):e.read>=e.fileSize&&(o(e.lines),Vt.event("GCodeLoader","Lines In GCode Program","Lines In GCode Program",e.lines.length).send()))},e.stopReading=function(){return e.stopReadingFile},e}return Object(B.a)(n,[{key:"render",value:function(){return f.a.createElement(Ft,{onFileSelect:this.handleFileSelect,onFinished:this.handleFinished,onRead:this.handleRead,stopReading:this.stopReading,chunkSize:65536,size:"small",accept:".ngc, .nc",color:"inherit"},f.a.createElement(Zt.a,null)," GCode")}}]),n}(m.Component),Bt=Object(b.b)((function(e,t){return{machineState:e.machineState}}),(function(e,t){return{onSetFileName:function(t){return e(I.interpreter.setFileName(t))},onLoading:function(){return e(I.interpreter.startLoading())},onFinished:function(){return e(I.interpreter.endLoading())},onProgress:function(t){return e(I.interpreter.setLoadingProgress(t))},onLines:function(t,n){return e(I.interpreter.setLines(t,n))}}}))(Ht),Ut=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFileSelect=function(t){var n=e.props,a=n.binary,r=n.onLoading;e.fileSize=t.size,e.fileName=t.name,a?(e.read=0,e.buffer=""):(e.data=void 0,e.buffer=void 0,e.offset=0),r&&r()},e.handleFinished=function(){var t=e.props.onLoadModel;e.stopReadingFile=!1,t(e.buffer,e.fileName)},e.handleRead=function(t,n,a){var r=e.props,i=r.onProgress,o=r.onError;e.data||(e.buffer=new ArrayBuffer(a),e.data=new Uint8Array(e.buffer),e.offset=0);try{e.data.set(new Uint8Array(t),e.offset)}catch(c){o&&o(new Error("Error reading data chunk: "+c.message+", "+e.offset))}e.offset+=n;var s=Math.min(e.offset/e.fileSize*100,100);i&&i(s)},e.stopReading=function(){return e.stopReadingFile},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this.props,t=e.iconOnly,n=e.labelOnly,a=e.variant,r=e.size,i=e.color,o=e.label,s=void 0===o?"Model":o;return f.a.createElement(Ft,{onFileSelect:this.handleFileSelect,onFinished:this.handleFinished,onRead:this.handleRead,stopReading:this.stopReading,chunkSize:65536,binary:!0,size:r,color:i,accept:".obj,.stl",variant:a},n?null:f.a.createElement(Zt.a,null)," ",t?null:s)}}]),n}(m.Component),Xt=ee(),Yt=Object(b.b)((function(e,t){return{}}),(function(e,t){return{onLoadModel:function(t,n){var a=qe.getInstance();if(n.toLowerCase().endsWith(".obj"))if(a){var r=K()(),i=new TextDecoder("utf-8");a.loadObjModel(i.decode(t));var o=K()();Xt.timing("ModelLoader","load obj",Math.round(o-r)).send(),Xt.event("ModelLoader","OBJ File Size","OBJ File Size",t.byteLength).send()}else console.error("viewer not loaded yet");else if(n.toLowerCase().endsWith(".stl"))if(a){var s=K()();a.loadSTLModel(t);var c=K()();Xt.timing("ModelLoader","load stl",Math.round(c-s)).send(),Xt.event("ModelLoader","STL File Size","STL File Size",t.byteLength).send()}else console.error("viewer not loaded yet");e(V.viewer3d.loadModel()),e(V.viewer3d.showModel())}}}))(Ut),Wt=n(752),Kt=n(769);var Jt=function(e){var t=e.value,n=e.thickness;if(e.loading){var a=t.toFixed(2)+"%";return f.a.createElement(Kt.a,{title:a},f.a.createElement(Wt.a,{variant:"determinate",color:"inherit",value:t,thickness:n}))}return null},qt=Object(b.b)((function(e,t){var n=0,a=3.6,r=!1;return e.interpreter.loading?(n=e.interpreter.loadingProgress,a=1,r=!0):e.interpreter.processing&&(n=e.interpreter.processingProgress,a=3.6,r=!0),{value:n,thickness:a,loading:r}}),(function(e,t){return{}}))(Jt),$t=n(357),Qt=n.n($t),en=n(358),tn=n.n(en),nn=n(755),an=ee(),rn=Object($e.a)((function(e){return{videoPane:{width:900,height:500},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#333333"},title:{flex:1,color:"white",textDecoration:"none"},logo:{height:32,marginRight:10}}}))((function(e){var t=e.classes,n=e.hideButtons,a=e.title,r=Object(m.useState)(!1),i=Object(Lt.a)(r,2),o=i[0],s=i[1],c=Object(m.useCallback)((function(){return s(!0)}),[]),l=Object(m.useCallback)((function(){return s(!1)}),[]);return f.a.createElement(It.a,{className:t.appBar},f.a.createElement(Gt.a,null,f.a.createElement("a",{href:"https://www.pocketnc.com",target:"_blank",rel:"noopener noreferrer"},f.a.createElement("img",{src:Qt.a,alt:"Pocket NC",className:t.logo,onClick:function(){return an.event("TitleBar","clicked link to pocketnc.com").send()}})),f.a.createElement(Nt.a,{className:t.title},f.a.createElement("a",{href:"https://www.pocketnc.com",className:t.title,target:"_blank",rel:"noopener noreferrer",onClick:function(){return an.event("TitleBar","clicked link to pocketnc.com").send()}},a||"Pocket NC Simulator")),f.a.createElement(qt,null),n?null:f.a.createElement(f.a.Fragment,null,f.a.createElement(Bt,{onError:function(e){return console.error(e)}}),f.a.createElement(Yt,{size:"small",color:"inherit",onError:function(e){return console.error(e)}}),f.a.createElement(_t.a,{onClick:c,color:"inherit",size:"small"},f.a.createElement(tn.a,null)),f.a.createElement(nn.a,{open:o,onClose:l,maxWidth:"lg"},f.a.createElement("iframe",{title:"Pocket NC Simulator Tutorial",width:"800",height:"450",src:"https://www.youtube.com/embed/EQxXC_ySR7k",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))))})),on=n(771),sn=n(766),cn=n(760),ln=n(53),un=n.n(ln),dn=n(359),hn=(n(657),n(658),n(659),n(764)),pn=n(360),mn=n.n(pn),fn=(n(660),ee()),vn=function(){var e=document.getElementsByClassName("ace_tooltip");if(e.length>0)for(var t=0;t<e.length;t++)document.body.appendChild(e[t])},gn=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var n=e.props.onSetCurrentLine,a=t.editor,r=a.getCursorPosition();a.getSelection().isEmpty()&&n(r.row)},e.handleChange=function(e){fn.event("Editor",e.action,e.action,e.lines.length).send()},e.handleDownload=function(){var t=e.props.fileName,n=e.editor.getValue(),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),a.setAttribute("download",t),a.click()},e.handleFileNameChange=function(t){(0,e.props.onSetFileName)(t.target.value)},e.handleRef=function(t){e.container=t},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.gcode,a=t.annotations;this.editor=dn.edit(this.container),this.editor.getSession().setMode("ace/mode/gcode"),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,this.editor.setShowPrintMargin(!1),this.editor.setOptions({readOnly:!0}),this.editor.session.on("changeScrollLeft",(function(t){0!==t&&e.editor.session.setScrollLeft(0)}));var r=this.editor.getSelection(),i=this.editor.getSession();r.on("changeCursor",(function(e,t,n){})),r.on("changeSelection",(function(e,t,n){}));var o=i.getDocument();o.setValue(""),o.insertFullLines(0,n),i.setAnnotations(a),o.on("change",this.handleChange),this.editor.on("guttermousemove",vn),this.editor.on("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){this.editor=null}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.gcode,a=t.annotations,r=t.currentLine,i=t.currentTab,o=t.running,s=t.fileName,c=e.gcode,l=e.annotations,u=e.currentLine,d=e.currentTab,h=e.running;return s!==e.fileName||h!==o||d!==i||c!==n||r!==u||a!==l}},{key:"componentDidUpdate",value:function(e){var t=e.gcode,n=e.annotations,a=e.running,r=this.props,i=r.gcode,o=r.annotations,s=r.currentLine,c=r.running,l=r.setLines,u=this.editor.getSession(),d=u.getDocument();if(!a&&c&&i===t){for(var h=1;!u.getLine(u.getLength()-h);)h++;l(u.getLines(0,u.getLength()-h))}c?(this.editor.container.style.backgroundColor="#f3f3f3",this.editor.setOptions({readOnly:!0})):(this.editor.container.style.backgroundColor="#ffffff",this.editor.setOptions({readOnly:!1})),t!==i&&(d.off("change",this.handleChange),d.setValue(""),d.insertFullLines(0,i),d.on("change",this.handleChange)),n!==o&&u.setAnnotations(o),this.editor.gotoLine(s+1,1/0),this.editor.resize()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.fileName,a=e.running;return f.a.createElement("div",{className:t.mainDiv},f.a.createElement("div",{ref:this.handleRef,className:t.container}),f.a.createElement("div",{className:t.gcodeTitleBar},f.a.createElement(hn.a,{disabled:a,value:n,onChange:this.handleFileNameChange,style:{width:"calc(100% - 70px)"}})," ",f.a.createElement(_t.a,{size:"small",onClick:this.handleDownload},f.a.createElement(mn.a,null))))}}]),n}(m.Component),bn=Object($e.a)((function(e){return{mainDiv:{width:"100%",height:"100%"},container:{width:"100%",height:"calc(100% - 39px)"},gcodeTitleBar:{width:"100%",fontSize:"15px",borderTop:"1px solid #dddddd",color:"gray",paddingLeft:"5px"}}}))(gn),On=n(145),Mn=n(756),yn=n(719),Sn=n(757),xn=n(758),jn=n(364),wn=n.n(jn),En=n(365),Tn=n.n(En),Pn=n(366),An=n.n(Pn),Cn=n(146),kn=n(767);function Rn(){var e=Object(On.a)(["\n  && {\n    color: #ff0000;\n    width: 15px;\n  }"]);return Rn=function(){return e},e}function Ln(){var e=Object(On.a)(["\n  && {\n    color: #d4ba62;\n    width: 15px;\n  }"]);return Ln=function(){return e},e}function In(){var e=Object(On.a)(["\n  && {\n    color: #3f51b5;\n    width: 15px;\n  }"]);return In=function(){return e},e}function Gn(){var e=Object(On.a)(["\n  && {\n    padding-left: 8px\n  }\n"]);return Gn=function(){return e},e}var Nn=Cn.a.div(Gn()),_n=Object(Cn.a)(wn.a)(In()),Dn=Object(Cn.a)(Tn.a)(Ln()),Fn=Object(Cn.a)(An.a)(Rn()),zn=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSetToolLengthOffset=function(t,n){return function(a){var r=e.props.onSetTool;if("Enter"===a.key||"blur"===a.type){var i=parseFloat(a.target.value);if(isNaN(i))a.target.value=n;else a.target.value=i,r({P:t,Z:i});a.target.blur(),a.preventDefault()}}},e.handleSetToolDiameter=function(t,n){return function(a){var r=e.props.onSetTool;if("Enter"===a.key||"blur"===a.type){var i=parseFloat(a.target.value);if(isNaN(i))a.target.value=n;else a.target.value=i,r({P:t,R:.5*i});a.target.blur(),a.preventDefault()}}},e.handleSetToolHolder=function(t){return function(n){(0,e.props.onSetTool)({P:t,holder:n.target.value})}},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this.props,t=e.numLines,n=e.approximateTime,a=e.maxLimitMessage,r=e.minLimitMessage,i=e.unimplementedMessages,o=e.nonSummarizedWarnings,s=e.nonSummarizedErrors,c=e.toolLengthOffsetMessages,l=e.running,u=e.classes,d=e.toolTable,h=[],p=[];for(var m in a){var v=a[m],g=m+" positive limit exceeded by maximum of "+v.amount.toFixed(4)+" on line "+(v.line+1)+".";"Z"===m&&(g+=" Try shortening your tool by at least "+v.amount.toFixed(4)+" inches."),h.push(f.a.createElement(yn.a,{key:m+"maxlimit",className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Fn,null)),f.a.createElement(xn.a,null,g)))}for(var b in r){var O=r[b],M=b+" negative limit exceeded by maximum of "+O.amount.toFixed(4)+" on line "+(O.line+1)+".";"Z"===b&&(M+=" Try extending your tool by at least "+O.amount.toFixed(4)+" inches."),h.push(f.a.createElement(yn.a,{key:b+"minlimit",className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Fn,null)),f.a.createElement(xn.a,null,M)))}var y=Math.floor(n/60/60),S=Math.floor(n/60)%60,x=Math.floor(n)%60,j=[];y>0&&j.push(y+" hour"+(1!==y?"s":"")),S>0&&j.push(S+" minute"+(1!==S?"s":"")),x>0&&j.push(x+" second"+(1!==x?"s":""));var w=null;if(i.length>0){var E={};i.forEach((function(e){E[e.code]=e.description}));var T=[];for(var P in E)T.push(f.a.createElement(yn.a,{key:P,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Dn,null)),f.a.createElement(xn.a,null,P,"'s intended usage: ",E[P])));w=[f.a.createElement(yn.a,{key:"unimplementedText",className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Dn,null)),f.a.createElement(xn.a,null,"Found ",T.length," code",1!==T.length?"s":""," on ",i.length," line",1!==i.length?"s":""," that ",1!==T.length?"aren't":"isn't"," implemented in the simulator. A real Pocket NC's behavior may differ from what is shown. Check the intended usage of each code below.")),f.a.createElement(Nn,{key:"unimplementedCodes"},f.a.createElement(Mn.a,{dense:!0,disablePadding:!0,className:u.nested},T))]}var A=o.map((function(e,t){return f.a.createElement(yn.a,{key:e.message+t,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Dn,null)),f.a.createElement(xn.a,null,"undefined"!==typeof e.line?"Warning on line "+(e.line+1)+": ":"",e.message))})),C=s.map((function(e,t){return f.a.createElement(yn.a,{key:e.message+t,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(Fn,null)),f.a.createElement(xn.a,null,"undefined"!==typeof e.line?"Error on line "+(e.line+1)+": ":"",e.message))})),k=[];if(c.length>0){var R={};for(var L in c.forEach((function(e){R[e.toolNumber]={toolLengthOffset:e.toolLengthOffset,toolDiameter:e.toolDiameter,toolHolder:e.toolHolder}})),R)k.push(f.a.createElement(yn.a,{key:"usingTool"+L,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,null)),f.a.createElement(xn.a,null,"Using tool ",L))),k.push(f.a.createElement(yn.a,{key:"toolLengthOffset"+L,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,null)),f.a.createElement(xn.a,null,"Tool ",L," Z offset ",f.a.createElement(hn.a,{disabled:l,onBlur:this.handleSetToolLengthOffset(L,R[L].toolLengthOffset),onKeyPress:this.handleSetToolLengthOffset(L,R[L].toolLengthOffset),defaultValue:R[L].toolLengthOffset.toFixed(4)}),"."))),k.push(f.a.createElement(yn.a,{key:"toolDiameter"+L,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,null)),f.a.createElement(xn.a,null,"Tool ",L," Diameter ",f.a.createElement(hn.a,{disabled:l,onBlur:this.handleSetToolDiameter(L,R[L].toolDiameter),onKeyPress:this.handleSetToolDiameter(L,R[L].toolDiameter),defaultValue:R[L].toolDiameter.toFixed(4)}),"."))),k.push(f.a.createElement(yn.a,{key:"toolHolder"+L,className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,null)),f.a.createElement(xn.a,null,"Tool ",L," Holder",f.a.createElement(kn.a,{disabled:l,checked:"SHORT"===d[parseInt(L)-1].holder,value:"SHORT",name:"toolHolder"+L,"aria-label":"Short Tool Holder",onChange:this.handleSetToolHolder(L),color:"primary"})," Short",f.a.createElement(kn.a,{disabled:l,checked:d[parseInt(L)-1].holder===fe,value:fe,name:"toolHolder"+L,"aria-label":"Long Tool Holder",onChange:this.handleSetToolHolder(L),color:"primary"})," Long")))}return f.a.createElement("div",{className:u.container},f.a.createElement(Mn.a,{dense:!0},p,h,C,A,w,f.a.createElement(yn.a,{className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,{fontSize:"inherit",color:"primary"})),f.a.createElement(xn.a,null,t," lines")),f.a.createElement(yn.a,{className:u.li},f.a.createElement(Sn.a,{className:u.liIcon},f.a.createElement(_n,{fontSize:"inherit",color:"primary"})),f.a.createElement(xn.a,null,"Approximately ",j.join(" ")," to run.")),k))}}]),n}(m.Component),Zn=Object($e.a)((function(e){return{container:{height:"100%",overflow:"scroll",marginLeft:10},nested:{paddingLeft:e.spacing(1)},li:{paddingLeft:"8px",paddingRight:"8px"},liIcon:{marginRight:0}}}))(zn),Vn=n(96),Hn=function(e){return e.interpreter.messages},Bn=Object(Vn.a)([Hn],(function(e){return e.filter((function(e){return"undefined"!==typeof e.line})).map((function(e){return{row:e.line,column:0,text:e.message,type:e.severity}}))})),Un=Object(Vn.a)([Hn],(function(e){var t=e.filter((function(e){return e.type===ut})),n={};t.forEach((function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)}));var a={};for(var r in n)a[r]=n[r].reduce((function(e,t){return t.amount>e.amount?t:e}),n[r][0]);return a})),Xn=Object(Vn.a)([Hn],(function(e){var t=e.filter((function(e){return e.type===lt})),n={};t.forEach((function(e){n[e.axis]||(n[e.axis]=[]),n[e.axis].push(e)}));var a={};for(var r in n)a[r]=n[r].reduce((function(e,t){return t.amount>e.amount?t:e}),n[r][0]);return a})),Yn=Object(Vn.a)([Hn],(function(e){return e.filter((function(e){return e.type===ct}))})),Wn=Object(Vn.a)([Hn],(function(e){return e.filter((function(e){return"error"===e.severity&&-1===[ut,lt].indexOf(e.type)}))})),Kn=Object(Vn.a)([Hn],(function(e){return e.filter((function(e){return"warning"===e.severity&&-1===[ct].indexOf(e.type)}))})),Jn=Object(Vn.a)([Hn],(function(e){return e.filter((function(e){return"SET_TOOL_LENGTH_OFFSET"===e.type}))})),qn=p,$n=function(e){return e.alignerState},Qn=function(e){return e.interpreter},ea=function(e){return e.machineState},ta=function(e){return e.interpreter.lines},na=function(e){return e.interpreter.linesPerIndex},aa=function(e){return e.interpreter.times[e.interpreter.times.length-1]},ra=function(e){var t=e.tool,n=t.table,a=t.loaded;return a>0?n[a-1]:{Z:-6,R:0}},ia=Object(b.b)((function(e,t){return{numLines:e.interpreter.lines.length,approximateTime:e.interpreter.times[e.interpreter.times.length-1],maxLimitMessage:qn.maxLimitMessage(e),minLimitMessage:qn.minLimitMessage(e),unimplementedMessages:qn.unimplementedMessages(e),nonSummarizedWarnings:qn.nonSummarizedWarnings(e),nonSummarizedErrors:qn.nonSummarizedErrors(e),toolLengthOffsetMessages:qn.setToolLengthOffsetMessages(e),running:e.interpreter.running,toolTable:e.machineState.tool.table}}),(function(e,t){return{onSetTool:function(t){return e(V.machineState.tool.table.setTool(t))}}}))(Zn),oa=ee();var sa=Object($e.a)((function(e){return{summary:{padding:"10px"},hidden:{display:"none"},toolbar:e.mixins.toolbar,tabNoTitleBar:{height:"100%",width:"100%"},tab:{height:"calc(100% - 112px)",width:"100%"},paper:{}}}))((function(e){var t=e.classes,n=e.width,a=e.visible,r=e.currentLine,i=e.annotations,o=e.onScroll,s=e.onTabChange,c=e.onSetCurrentLine,l=e.currentTab,u=e.running,d=e.gcode,h=e.setLines,p=e.hideTitleBar,m=e.fileName,v=e.onSetFileName;return f.a.createElement(on.a,{variant:"persistent",open:a,PaperProps:{style:{width:n,height:"100vh"}},classes:{paper:t.paper}},p?null:f.a.createElement("div",{className:t.toolbar}),f.a.createElement(It.a,{position:"static",color:"default"},f.a.createElement(sn.a,{value:l,onChange:s,indicatorColor:"primary",textColor:"primary"},f.a.createElement(cn.a,{label:"GCode",onClick:function(){return oa.event("GCodePane","clicked gcode tab").send()}}),f.a.createElement(cn.a,{label:"Summary",onClick:function(){return oa.event("GCodePane","clicked summary tab").send()}}))),f.a.createElement("div",{className:un()(p?t.tabNoTitleBar:t.tab,{[t.hidden]:0!==l})},f.a.createElement(bn,{gcode:d,annotations:i,currentLine:r,onScroll:o,currentTab:l,running:u,setLines:h,fileName:m,onSetCurrentLine:c,onSetFileName:v})),f.a.createElement("div",{className:un()(t.tab,{[t.hidden]:1!==l})},f.a.createElement(ia,null)))})),ca=Object(b.b)((function(e,t){var n=e.ui.gcodePane,a=e.interpreter.lines;return{width:n.width,visible:n.visible,annotations:qn.annotations(e),currentLine:e.interpreter.currentLine,gcode:a,currentTab:n.currentTab,running:e.interpreter.running,hideTitleBar:!e.ui.titleBar.visible,fileName:e.interpreter.fileName}}),(function(e,t){return{onScroll:function(t){return e(V.ui.gcodePane.scroll(t))},onTabChange:function(t,n){return e(V.ui.gcodePane.setTab(n))},setLines:function(t){return e(V.interpreter.setLines(t))},onSetCurrentLine:function(t){return e(V.interpreter.setCurrentLine(t))},onSetFileName:function(t){return e(V.interpreter.setFileName(t))}}}))(sa),la=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMouseUp=function(t){e.dragging=!1},e.handleMouseDown=function(t){t.preventDefault(),e.dragging=!0},e.handleMouseMove=function(t){var n=e.props.onDrag;e.dragging&&n&&(t.preventDefault(),n(Math.min(Math.max(t.pageX,0),window.innerWidth)))},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.left,a=e.width;return f.a.createElement("div",{className:t.divider,style:{left:n-.5*a,width:a},onMouseDown:this.handleMouseDown})}}]),n}(m.Component),ua=Object($e.a)((function(e){return{divider:{position:"absolute",height:"100%",zIndex:e.zIndex.drawer+1,cursor:"col-resize"}}}))(la),da=Object(b.b)((function(e,t){return{left:e.ui.gcodePane.width}}),(function(e,t){return{onDrag:function(t){return e(_.ui.gcodePane.setWidth(t))}}}))(ua),ha=n(391),pa=n(759),ma=n(235),fa=n(369),va=n.n(fa),ga=n(375),ba=n.n(ga),Oa=n(370),Ma=n.n(Oa),ya=n(371),Sa=n.n(ya),xa=n(374),ja=n.n(xa),wa=n(372),Ea=n.n(wa),Ta=n(373),Pa=n.n(Ta),Aa=n(376),Ca=n.n(Aa),ka=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},Ra=ee(),La=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(H.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMouseMove=function(t){var n=e.props,a=n.visible,r=n.onShow,i=n.onHide,o=n.visibleTimeout;t.buttons&&!e.clickedInOverlay||(!a&&r&&r(),i&&!e.over&&(e.timeout&&window.clearTimeout(e.timeout),e.timeout=setTimeout((function(){i()}),o||2e3)))},e.handleMouseOver=function(){e.over=!0,e.timeout&&(window.clearTimeout(e.timeout),e.timeout=null)},e.handleMouseOut=function(){e.over=!1;var t=e.props,n=t.onHide,a=t.visibleTimeout;n&&(e.timeout&&window.clearTimeout(e.timeout),e.timeout=setTimeout((function(){n()}),a||2e3))},e.handleMouseDown=function(){e.clickedInOverlay=!0},e.handleMouseUp=function(){e.clickedInOverlay=!1},e.handlePlay=function(t){var n=e.props.onPlay;Ra.event("ControlsOverlay","clicked play").send(),n&&n(t)},e.handlePause=function(t){var n=e.props.onPause;Ra.event("ControlsOverlay","clicked pause").send(),n&&n(t)},e.handleRun=function(t){var n=e.props.onRun;Ra.event("ControlsOverlay","clicked run").send(),n&&n(t)},e.handlePrevious=function(t){var n=e.props.onPrevious;Ra.event("ControlsOverlay","clicked previous").send(),n&&n(t)},e.handleNext=function(t){var n=e.props.onNext;Ra.event("ControlsOverlay","clicked next").send(),n&&n(t)},e.handleStop=function(t){var n=e.props.onStop;Ra.event("ControlsOverlay","clicked stop").send(),n&&n(t)},e.handleTogglePane=function(t){var n=e.props,a=n.onTogglePane;n.gcodePaneVisible?Ra.event("ControlsOverlay","clicked hide gcode pane").send():Ra.event("ControlsOverlay","clicked show gcode pane").send(),a&&a(t)},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.visible,a=e.paused,r=e.running,i=e.loadedValue,o=e.value,s=e.timeMultiplierValue,c=e.currentTime,l=e.fadeTime,u=e.onSlider,d=e.onTimeSlider,h=Math.floor(c)%60,p=Math.floor(c/60)%60,m=Math.floor(c/60/60),v=ka(m,2)+":"+ka(p,2)+":"+ka(h,2),g=Math.log(s+1)/Math.log(1001);return f.a.createElement(ha.a,{in:n,timeout:l||500},f.a.createElement("div",{className:t.overlay,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown},f.a.createElement("div",null,f.a.createElement("div",{className:t.left},f.a.createElement(Kt.a,{title:"Toggle GCode Pane",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handleTogglePane},f.a.createElement(va.a,{className:t.button})))),f.a.createElement("div",{className:t.center},f.a.createElement(Kt.a,{title:"Previous Line",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handlePrevious},f.a.createElement(Ma.a,{className:t.button}))),r?a?f.a.createElement(Kt.a,{title:"Play",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handlePlay},f.a.createElement(Sa.a,{className:t.button}))):f.a.createElement(Kt.a,{title:"Pause",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handlePause},f.a.createElement(Ea.a,{className:t.button}))):null,r?f.a.createElement(Kt.a,{title:"Stop Program",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handleStop},f.a.createElement(Pa.a,{className:t.button}))):f.a.createElement(Kt.a,{title:"Run Program",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handleRun},f.a.createElement(ja.a,{className:t.button}))),f.a.createElement(Kt.a,{title:"Next Line",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(pa.a,{onClick:this.handleNext},f.a.createElement(ba.a,{className:t.button})))),f.a.createElement("div",{className:t.right},f.a.createElement("div",{className:t.timeSliderContainer},f.a.createElement(ma.a,{min:0,max:1,value:g,trackValue:1,onChange:function(e,t){return d(Math.pow(1001,t)-1)}})),f.a.createElement("div",{className:t.timeIconContainer},f.a.createElement(Kt.a,{title:"Time Scale",enterDelay:500,placement:"top",disableFocusListener:!0},f.a.createElement(Ca.a,{onClick:function(e){Ra.event("ControlsOverlay","clicked reset time scale").send(),d(1)},className:t.timeIcon})),f.a.createElement("span",{className:t.timeMultiplierLabel},s.toFixed(2))))),f.a.createElement("br",{className:t.break}),f.a.createElement("div",{className:t.sliderControls},f.a.createElement("div",{className:t.sliderTime},v),f.a.createElement("div",{className:t.sliderContainer},f.a.createElement(ma.a,{value:o,trackValue:i,onChange:function(e,t){return u(t)}})))))}}]),n}(m.Component),Ia=Object($e.a)((function(e){return{toolbar:e.mixins.toolbar,overlay:{zIndex:e.zIndex.drawer+3,position:"absolute",left:0,bottom:20,right:0,marginLeft:"auto",marginRight:"auto",width:"670px",maxWidth:"100%",textAlign:"center",verticalAlign:"middle",backgroundColor:"rgba(100,100,100,.75)",borderRadius:5,color:"white"},button:{color:"#dddddd"},left:{float:"left",width:"33.333%",textAlign:"left"},center:{float:"left",width:"33.333%",textAlign:"center"},right:{float:"left",width:"33.333%",marginBottom:0,textAlign:"right"},break:{lineHeight:0,clear:"both"},sliderTime:{float:"left",width:50,marginLeft:15,fontSize:10,lineHeight:"32px",verticalAlign:"middle"},sliderContainer:{float:"left",width:"calc(100% - 95px)",marginLeft:15,marginRight:15},timeSliderContainer:{width:"calc(100% - 100px)",float:"right",marginRight:15},timeIconContainer:{float:"right",lineHeight:"32px",cursor:"pointer"},timeIcon:{color:"#dddddd",verticalAlign:"middle"},timeMultiplierLabel:{fontSize:"10px",marginRight:5}}}))(La),Ga=Object(b.b)((function(e,t){return{visible:e.ui.controlsOverlay.visible,gcodePaneVisible:e.ui.gcodePane.visible,loadedValue:e.interpreter.processingProgress,value:e.interpreter.totalTime>0?e.interpreter.currentTime/e.interpreter.totalTime*100:0,currentTime:e.interpreter.currentTime,paused:e.interpreter.paused,running:e.interpreter.running,timeMultiplierValue:e.interpreter.timeMultiplier}}),(function(e,t){return{onShow:function(){return e(V.ui.controlsOverlay.setVisible(!0))},onHide:function(){return e(V.ui.controlsOverlay.setVisible(!1))},onTogglePane:function(){return e(V.ui.gcodePane.togglePane())},onHome:function(){return e(V.ui.controlsOverlay.home())},onShuffle:function(){return e(V.ui.controlsOverlay.shuffle())},onPrevious:function(){return e(V.interpreter.previousLine())},onPlay:function(){return e(V.interpreter.unpause())},onRun:function(){return e(V.interpreter.run())},onStop:function(){return e(V.interpreter.stop())},onPause:function(){return e(V.interpreter.pause())},onNext:function(){return e(V.interpreter.nextLine())},onSlider:function(t){return e(V.interpreter.setCurrentLineWithPercentage(t))},onTimeSlider:function(t){return e(V.interpreter.setTimeMultiplier(t))}}}))(Ia),Na=n(386),_a=n(761),Da=n(762),Fa=n(378),za=n.n(Fa),Za=n(377),Va=n.n(Za),Ha=n(387),Ba=n(763),Ua=ee(),Xa=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;return Object(H.a)(this,n),(e=t.call(this)).handleClickOutOfMenu=function(){e.setState({parentMenuOpen:!1,perspectiveMenuOpen:!1})},e.handleMouseOver=function(){e.setState({active:!0})},e.handleMouseOut=function(){e.setState({active:!1})},e.toggleParentMenu=function(t){var n;e.setState((n=t.currentTarget,function(e){return{parentMenuOpen:!e.parentMenuOpen,parentAnchorEl:n}}))},e.togglePerspectiveMenu=function(t){var n;e.setState((n=t.currentTarget,function(e){return{perspectiveMenuOpen:!e.perspectiveMenuOpen,perspectiveAnchorEl:n}}))},e.handlePerspective=function(){var t=e.props.setPerspective;e.setState({perspectiveMenuOpen:!1}),Ua.event("CameraButtons","set perspective").send(),t()},e.handleOrthographic=function(){var t=e.props.setOrthographic;e.setState({perspectiveMenuOpen:!1}),Ua.event("CameraButtons","set orthographic").send(),t()},e.handleParentCamera=function(t){var n=e.props.parentCamera;Ua.event("CameraButtons","parent camera to "+t).send(),n(t),e.setState({parentMenuOpen:!1})},e.state={parentMenuOpen:!1,perspectiveMenuOpen:!1,active:!1,parentAnchorEl:null,perspectiveAnchorEl:null},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.hideTitleBar,r=t.showDentalFixture,i=this.state,o=i.parentMenuOpen,s=i.perspectiveMenuOpen,c=i.active,l=i.parentAnchorEl,u=i.perspectiveAnchorEl;return f.a.createElement("div",{className:a?n.cameraButtonsNoTitleBar:n.cameraButtons},f.a.createElement(Da.a,{className:un()(n.button,{[n.active]:c}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.toggleParentMenu},f.a.createElement(Va.a,null)),f.a.createElement("br",null),f.a.createElement(Da.a,{className:un()(n.button,n.marginTop,{[n.active]:c}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.togglePerspectiveMenu},f.a.createElement(za.a,null)),f.a.createElement("br",null),f.a.createElement(Ha.a,{open:o,anchorEl:l,onClose:this.handleClickOutOfMenu},f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(be)}},"Base"),f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(ye)}},"Y"),f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(Me)}},"A"),f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(Oe)}},"B"),f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(Se)}},"Tool"),r?f.a.createElement(Ba.a,{onClick:function(){return e.handleParentCamera(xe)}},"Dental Fixture"):null),f.a.createElement(Ha.a,{open:s,anchorEl:u,onClose:this.handleClickOutOfMenu},f.a.createElement(Ba.a,{onClick:function(){return e.handlePerspective()}},"Perspective"),f.a.createElement(Ba.a,{onClick:function(){return e.handleOrthographic()}},"Orthographic")))}}]),n}(m.Component),Ya=Object($e.a)((function(e){return{button:{width:"30px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s"},extendedButton:{width:"110px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s",textTransform:"none"},marginLeft:{marginLeft:"10px"},active:{opacity:1},marginTop:{marginTop:"5px"},cameraButtonsNoTitleBar:{position:"absolute",right:"20px",top:"20px",textAlign:"right"},cameraButtons:{position:"absolute",right:"20px",top:"85px",textAlign:"right"}}}))(Xa),Wa=Object(b.b)((function(e,t){return{hideTitleBar:!e.ui.titleBar.visible}}),(function(e,t){return{parentCamera:function(t){return e(V.viewer3d.parentCamera(t))},setPerspective:function(){return e(V.viewer3d.setPerspective())},setOrthographic:function(){return e(V.viewer3d.setOrthographic())}}}))(Ya),Ka=n(379),Ja=n.n(Ka),qa=n(380),$a=n.n(qa),Qa=Object($e.a)((function(e){return{droNoTitleBar:{borderRadius:10,padding:"10px",backgroundColor:"rgba(100,100,100,.75)",color:"white",marginTop:10,textAlign:"right"},dro:{borderRadius:10,padding:"10px",backgroundColor:"rgba(100,100,100,.75)",color:"white",marginTop:10,textAlign:"right"},pre:{padding:0,margin:0}}}))((function(e){var t=e.classes,n=e.hideTitleBar,a=e.X,r=e.Y,i=e.Z,o=e.A,s=e.B;return f.a.createElement("div",{className:n?t.droNoTitleBar:t.dro},f.a.createElement("pre",{className:t.pre},"X: ",a,f.a.createElement("br",null),"Y: ",r,f.a.createElement("br",null),"Z: ",i,f.a.createElement("br",null),"A: ",o,f.a.createElement("br",null),"B: ",s))})),er=Object(b.b)((function(e,t){var n=e.machineState.motion.position;return{hideTitleBar:!e.ui.titleBar.visible,X:n.X.toFixed(4).padStart(8," "),Y:n.Y.toFixed(4).padStart(8," "),Z:n.Z.toFixed(4).padStart(8," "),A:n.A.toFixed(4).padStart(8," "),B:n.B.toFixed(4).padStart(8," ")}}),(function(e,t){return{}}))(Qa),tr=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;return Object(H.a)(this,n),(e=t.call(this)).handleMouseOver=function(){e.setState({active:!0})},e.handleMouseOut=function(){e.setState({active:!1})},e.handleToggleModel=function(){var t=e.props,n=t.modelShown,a=t.showModel,r=t.hideModel;n?r():a()},e.state={active:!1},e}return Object(B.a)(n,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.hideTitleBar,a=e.modelShown,r=e.modelLoaded,i=this.state.active;return f.a.createElement("div",{className:n?t.otherButtonsNoTitleBar:t.otherButtons},r?f.a.createElement(_t.a,{variant:"extendedFab",className:un()(t.extendedButton,t.marginTop,{[t.active]:i}),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleToggleModel},"Model ",a?f.a.createElement(Ja.a,{className:t.marginLeft}):f.a.createElement($a.a,{className:t.marginLeft})):null,f.a.createElement(er,null))}}]),n}(m.Component),nr=Object($e.a)((function(e){return{button:{width:"30px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s"},extendedButton:{width:"110px",height:"30px",minHeight:"30px",opacity:.25,transition:"opacity .5s",textTransform:"none"},marginLeft:{marginLeft:"10px"},active:{opacity:1},marginTop:{marginTop:"5px"},otherButtonsNoTitleBar:{position:"absolute",right:"20px",top:"180px",textAlign:"right"},otherButtons:{position:"absolute",right:"20px",top:"160px",textAlign:"right"}}}))(tr),ar=Object(b.b)((function(e,t){return{hideTitleBar:!e.ui.titleBar.visible,modelShown:e.viewer3d.showModel,modelLoaded:e.viewer3d.modelLoaded}}),(function(e,t){return{showModel:function(){return e(V.viewer3d.showModel())},hideModel:function(){return e(V.viewer3d.hideModel())}}}))(nr),rr=Object(Na.a)({typography:{useNextVariants:!0}}),ir=Object($e.a)((function(e){return{container:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"},machinePane:{position:"fixed",right:10,bottom:0},topSpacing:{marginTop:"10px"}}}))((function(e){var t=e.classes,n=e.hideTitleBar,a=e.machine,r=e.onChangeMachine,i=e.running;return f.a.createElement(_a.a,{theme:rr},f.a.createElement("div",{className:t.container},n?null:f.a.createElement(rn,null),f.a.createElement(ca,null),f.a.createElement(Wa,null),f.a.createElement(ar,null),f.a.createElement(da,{width:5}),f.a.createElement(Ga,null),f.a.createElement(Rt,null),f.a.createElement("div",{className:t.machinePane},f.a.createElement(kn.a,{value:"V2-10",name:"V2-10",color:"default",disabled:i,checked:a===ve,onClick:function(){return r(ve)}})," V2-10",f.a.createElement("br",null),f.a.createElement(kn.a,{value:"V2-50",name:"V2-50",color:"default",disabled:i,checked:"V2_50"===a,onClick:function(){return r("V2_50")}})," V2-50",f.a.createElement("br",null))))})),or=Object(b.b)((function(e,t){return{hideTitleBar:!e.ui.titleBar.visible,machine:e.machineState.machine,running:e.interpreter.running}}),(function(e,t){return{onChangeMachine:function(t){e(V.machineState.machine.set(t))}}}))(ir),sr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function cr(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var lr=n(384),ur=n(35),dr=function(){function e(){Object(H.a)(this,e),this.windows=[]}return Object(B.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(B.a)(e,[{key:"addWindow",value:function(e,t){console.log("added window",t),this.windows.push({window:e,origin:t}),e.postMessage({type:"IFRAME/INITIALIZE"},t)}},{key:"sendMessage",value:function(e){this.windows.forEach((function(t){var n=t.window,a=t.origin;console.log("sending message to window with origin",a),n.postMessage(e,a)}))}}]),e}(),hr=n(45),pr=n(87),mr=n(181),fr=n(768),vr=n(770),gr=function(e,t,n,a,r){r||(r=1);var i,o,s,c,l,u=e.X,d=e.Y,h=e.Z,p=t.I,m=t.J,f=t.K,v=t.X,g=t.Y,b=t.Z;switch(n){case Le:i=u-p,o=d-m,s=v-p,c=g-m,l=b-h;break;case Ie:i=h-f,o=u-p,s=b-f,c=v-p,l=g-d;break;case Ge:i=-(h-f),o=d-m,s=-(b-f),c=g-m,l=v-u}var O=Math.sqrt(i*i+o*o),M=Math.atan2(o,i);M<0&&(M+=2*Math.PI);var y,S=Math.atan2(c,s);S<0&&(S+=2*Math.PI),"ARC_CW"===a?(y=S-M)>We?y=-(2*Math.PI-y):y<We&&y>-We&&(y-=2*Math.PI*r):(y=S-M)<-We?y=2*Math.PI+y:y>-We&&y<We&&(y+=2*Math.PI*r);var x=l,j=y*O;return Math.sqrt(x*x+j*j)},br=function(e,t,n,a,r,i){switch(e){case"RAPID":case"LINEAR":return function(e,t,n){return{X:e.X*(1-n)+t.X*n,Y:e.Y*(1-n)+t.Y*n,Z:e.Z*(1-n)+t.Z*n,A:e.A*(1-n)+t.A*n,B:e.B*(1-n)+t.B*n,C:e.C*(1-n)+t.C*n}}(t,n,a);case"OFF":return n;case"ARC_CW":case"ARC_CCW":return function(e,t,n,a,r,i){i||(i=1);var o,s,c,l,u=e.X,d=e.Y,h=e.Z,p=t.I,m=t.J,f=t.K,v=t.X,g=t.Y,b=t.Z;switch(a){case Le:o=u-p,s=d-m,c=v-p,l=g-m;break;case Ie:o=h-f,s=u-p,c=b-f,l=v-p;break;case Ge:o=-(h-f),s=d-m,c=-(b-f),l=g-m}var O=Math.atan2(s,o);O<0&&(O+=2*Math.PI);var M,y=Math.atan2(l,c);y<0&&(y+=2*Math.PI),"ARC_CW"===r?(M=y-O)>We?M=-(2*Math.PI-M):M<We&&M>-We&&(M-=2*Math.PI*i):(M=y-O)<-We?M=2*Math.PI+M:M>-We&&M<We&&(M+=2*Math.PI*i),M*=n;var S,x,j,w=Math.cos(M),E=Math.sin(M);switch(a){case Le:S=p+(u-p)*w-(d-m)*E,x=m+(u-p)*E+(d-m)*w,j=h*(1-n)+b*n;break;case Ie:S=p+(u-p)*w+(h-f)*E,x=d*(1-n)+g*n,j=f-(u-p)*E+(h-f)*w;break;case Ge:S=u*(1-n)+v*n,x=m+(d-m)*w-(h-f)*E,j=f+(d-m)*E+(h-f)*w}return{X:S,Y:x,Z:j,A:e.A*(1-n)+t.A*n,B:e.B*(1-n)+t.B*n}}(t,n,a,r,e,i);default:return console.error(e," motion mode not implemented, jumping to final position."),n}},Or=Object(fr.a)({[S.machineState.feedRateMode.setInverseTime]:function(){return Pe},[S.machineState.feedRateMode.setUnitsPerMinute]:function(){return Ae},[S.machineState.feedRateMode.setUnitsPerRevolution]:function(){return Ce}},Ae),Mr=Object(fr.a)({[x.machineState.feedRate.set]:function(e,t){return t.payload}},0),yr=Object(fr.a)({[P.machineState.planeSelect.setXY]:function(){return Le},[P.machineState.planeSelect.setZX]:function(){return Ie},[P.machineState.planeSelect.setYZ]:function(){return Ge},[P.machineState.planeSelect.setUV]:function(){return Ne},[P.machineState.planeSelect.setWU]:function(){return _e},[P.machineState.planeSelect.setVW]:function(){return De}},Le),Sr=Object(fr.a)({[j.machineState.units.setIn]:function(){return Fe},[j.machineState.units.setMm]:function(){return ze}},Fe),xr={Z:0,R:0,holder:"NONE"},jr=Object(fr.a)({[k.machineState.tool.set]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{set:t.payload})},[k.machineState.tool.change]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{loaded:e.set})},[k.machineState.tool.setToolLengthOffset]:function(e,t){var n=t.payload.H,a=e.loaded-1;void 0!==n&&(a=n-1);var r=e.table[a];return Object(O.a)(Object(O.a)({},e),{},{toolLengthOffset:r})},[k.machineState.tool.clearToolLengthOffset]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{toolLengthOffset:xr})},[k.machineState.tool.table.setTool]:function(e,t){var n=t.payload,a=n.P,r={X:n.X,Y:n.Y,Z:n.Z,A:n.A,B:n.B,C:n.C,U:n.U,V:n.V,W:n.W,R:n.R,I:n.I,J:n.J,Q:n.Q,holder:n.holder};for(var i in r)void 0===r[i]&&delete r[i];var o=Object(Y.a)(e.table);return o[a-1]=Object(O.a)(Object(O.a)({},o[a-1]),r),Object(O.a)(Object(O.a)({},e),{},{table:o})}},{set:0,loaded:0,toolLengthOffset:xr,table:[{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe},{Z:-3,R:.0625,holder:fe}]}),wr=Object(fr.a)({[w.machineState.kinematicsMode.setFiveAxis]:function(){return ke},[w.machineState.kinematicsMode.setTrivial]:function(){return Re}},Re),Er=Object(fr.a)({[E.machineState.cutterCompensation.off]:void 0},Ze),Tr=Object(fr.a)({[C.machineState.spindleSpeed.set]:function(e,t){return t.payload}},0),Pr=Object(fr.a)({[A.machineState.spindleControl.off]:function(){return"OFF"},[A.machineState.spindleControl.ccw]:function(){return"CCW"},[A.machineState.spindleControl.cw]:function(){return"CW"}},"OFF"),Ar=Object(fr.a)({[R.machineState.machine.set]:function(e,t){return t.payload}},ve),Cr={mode:"OFF",distanceMode:je,arcDistanceMode:Te,turns:0,issuedMotionCommand:!1,position:{X:0,Y:1.5,Z:0,A:0,B:0,C:0,I:0,J:0,K:0}},kr=function(e,t){var n=e.position,a=t.payload,r=a.X,i=a.Y,o=a.Z,s=a.A,c=a.B,l=a.C,u=a.I,d=a.J,h=a.K,p=a.units,m=a.G53,f=e.distanceMode,v=e.arcDistanceMode,g={X:r,Y:i,Z:o,A:s,B:c,C:l};for(var b in g)void 0===g[b]?delete g[b]:p!==ze||"X"!==b&&"Y"!==b&&"Z"!==b||(g[b]=g[b]/25.4);var M={I:u,J:d,K:h};for(var y in M)void 0===M[y]?M[y]=0:p===ze&&(M[y]=M[y]/25.4);var S=e.position;if(!m)if(f===je)S=Object(O.a)(Object(O.a)({},e.position),g);else for(var x in S=Object(O.a)({},S),g)S[x]=n[x]+g[x];if(v===Ee)S=Object(O.a)(Object(O.a)({},e.position),M);else{var j={I:"X",J:"Y",K:"Z"};for(var w in S=Object(O.a)({},S),M)S[w]=n[j[w]]+M[w]}return S},Rr=Object(fr.a)({[L.machineState.distanceMode.setAbsolute]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{distanceMode:je})},[L.machineState.distanceMode.setIncremental]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{distanceMode:we})},[L.machineState.motion.nonMotionCommand]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{issuedMotionCommand:!1})},[L.machineState.motion.off]:function(e,t){return Object(O.a)(Object(O.a)({},e),{},{mode:"OFF"})},[L.machineState.motion.rapid]:function(e,t){var n=kr(e,t);return Object(O.a)(Object(O.a)({},e),{},{position:n,issuedMotionCommand:!0,mode:"RAPID"})},[L.machineState.motion.linear]:function(e,t){var n=kr(e,t);return Object(O.a)(Object(O.a)({},e),{},{position:n,issuedMotionCommand:!0,mode:"LINEAR"})},[L.machineState.motion.arcCW]:function(e,t){var n=t.payload.P,a=kr(e,t);return Object(O.a)(Object(O.a)({},e),{},{position:a,turns:n,issuedMotionCommand:!0,mode:"ARC_CW"})},[L.machineState.motion.arcCCW]:function(e,t){var n=t.payload.P,a=kr(e,t);return Object(O.a)(Object(O.a)({},e),{},{position:a,turns:n,issuedMotionCommand:!0,mode:"ARC_CCW"})},[L.machineState.motion.setPosition]:function(e,t){var n=kr(e,t);return Object(O.a)(Object(O.a)({},e),{},{position:n,issuedMotionCommand:!0})}},Cr),Lr=Rr,Ir={G4:0,G10:0,G28:0,G30:0,G53:0,G92:0,"G92.1":0,"G92.2":0,"G92.3":0,G0:1,G1:1,G2:1,G3:1,G33:1,"G38.2":1,G73:1,G76:1,G81:1,G82:1,G83:1,G84:1,G85:1,G86:1,G87:1,G88:1,G89:1,G17:2,G18:2,G19:2,"G17.1":2,"G18.1":2,"G19.1":2,G90:3,G91:3,"G90.1":4,"G91.1":4,G93:5,G94:5,G95:5,G20:6,G21:6,G40:7,G41:7,G42:7,"G41.1":7,"G42.1":7,G43:8,"G43.1":8,G49:8,G98:10,G99:10,G54:12,G55:12,G56:12,G57:12,G58:12,G59:12,"G59.1":12,"G59.2":12,"G59.3":12,G61:13,"G61.1":13,G664:13,G96:14,G97:14,G7:15,G8:15,M0:4,M1:4,M2:4,M30:4,M60:4,M3:7,M4:7,M5:7,M7:8,M8:8,M9:8,M48:9,M49:9},Gr={G10:!0,G92:!0,G0:!0,G1:!0,G2:!0,G3:!0,G33:!0,"G38.2":!0,G73:!0,G76:!0,G81:!0,G82:!0,G83:!0,G84:!0,G85:!0,G86:!0,G87:!0,G88:!0,G89:!0,"G43.1":!0},Nr=n(381),_r=function e(t){var n=this;Object(H.a)(this,e),this.getState=function(){return n.store.getState()},this.interpret=function(e){n.messages=[];var t,a={},r=[],i=Object(Nr.parseLine)(e);for(var o in i.words.forEach((function(e,t){var n=Object(Lt.a)(e,2),i=n[0]+n[1],o=function(e){return Ir[e]}(i);void 0!==o&&(a[o]?a[o].push(i):a[o]=[i]),function(e){return Gr[e]}(i)&&r.push(i)})),r.length>1&&n.messages.push({message:"Can't run multiple commands with positional arguments on the same line. Codes "+(t=r).slice(0,t.length-1).join(", ")+" and "+t[t.length-1]+" use positional arguments.",codes:t,type:"MULTIPLE_COMMANDS_WITH_POSITIONAL_ARGS",severity:"error"}),a)a[o].length>1&&n.messages.push(dt(a[o],o));var s={},c=[],l=[],u=[],d=!1;i.words.forEach((function(e,t){var a=function(e){return it[e]}(e[0]);a&&c.push([a,e[1]]);var r=e[0]+e[1];"G43"===r&&(d=!0);var i=function(e){return tt[e]}(r),o=function(e){return rt[e]}(r);o&&l.push(o());var h=function(e){return at[e]}(r);h&&u.push(h(s));var p=function(e){return ot[e]}(r);p&&(s[r]=!0),i&&n.messages.push(pt(r)),o||i||p||h||a||(s[e[0]]=e[1],"G"!==e[0]&&"M"!==e[0]||n.messages.push(function(e){return{message:"Unrecognized G or M code: "+e,severity:"error",type:"UNRECOGNIZED",code:e}}(r)))}));var h=a[1];0===r.length&&["X","Y","Z","A","B","C","I","J","K"].reduce((function(e,t){return e||void 0!==s[t]}),!1)&&(u.push(st(s)),h=!0),h||u.push(T.machineState.motion.nonMotionCommand()),l.forEach((function(e){n.store.dispatch(e)}));var p=n.store.getState().units;if(s.units=p,c.forEach((function(e){var t=Object(Lt.a)(e,2),a=t[0],r=t[1];n.store.dispatch(a(r))})),u.forEach((function(e){n.store.dispatch(e)})),h){var m=n.store.getState(),f=kt[m.machine];n.messages=n.messages.concat(f.getLimitErrors(m.joints,f.limits))}var v,g,b=n.store.getState();if(d){var O=b.tool,M=O.loaded,y=M;"undefined"!==typeof s.H&&(y=s.H),n.messages.push(function(e,t,n,a){return{message:"Set tool length offset to "+t.toFixed(4)+" which is what is stored under tool "+e+".",toolNumber:e,toolLengthOffset:t,toolDiameter:n,toolHolder:a,severity:"info",type:"SET_TOOL_LENGTH_OFFSET"}}(y,O.toolLengthOffset.Z,2*O.toolLengthOffset.R,O.toolLengthOffset.holder)),M!==y&&n.messages.push({message:"Tool specified by G43, T"+(v=y)+", differs from last tool loaded with M6, T"+(g=M)+". The simulator uses the last tool loaded with M6 to determine which tool to show, so your tool path may vary from what you would expect.",g43ToolNum:v,m6ToolNum:g,severity:"warning",type:"TOOL_LENGTH_OFFSET_COMMAND_DIFFERS_FROM_LOADED_TOOL"})}return b};var a=t.machineState;this.store=Object(hr.createStore)(Fr,a)},Dr=Object(hr.combineReducers)({machine:Ar,feedRateMode:Or,feedRate:Mr,units:Sr,tool:jr,planeSelect:yr,kinematicsMode:wr,cutterCompensation:Er,spindleSpeed:Tr,spindleControl:Pr,motion:Lr,joints:function(e,t){return e||[0,1.5,0,0,0]}}),Fr=Object(mr.a)(Dr,(function(e,t){var n,a=(n=e,Object(fr.a)({[Object(vr.a)(L.machineState.motion.rapid,L.machineState.motion.linear,L.machineState.motion.arcCW,L.machineState.motion.arcCCW,L.machineState.motion.setPosition)]:function(e,t){var a,r=t.payload,i=r.X,o=r.Y,s=r.Z,c=r.A,l=r.B,u=r.C,d=r.units,h=r.G53,p=kt[n.machine];if(h){var m=p.kinematics.forwardKinematics(n,h),f={X:i,Y:o,Z:s,A:c,B:l,C:u};for(var v in f)void 0===f[v]?delete f[v]:d!==ze||"X"!==v&&"Y"!==v&&"Z"!==v||(f[v]=f[v]/25.4);if(n.motion.distanceMode===je)m=Object(O.a)(Object(O.a)({},m),f);else for(var g in m=Object(O.a)({},m),f)m[g]=m[g]+f[g];a=p.kinematics.inverseKinematics(Object(O.a)(Object(O.a)({},n),{},{motion:Object(O.a)(Object(O.a)({},n.motion),{},{position:m})}),h)}else a=p.kinematics.inverseKinematics(n);return a}},[0,0,0,0,0]))(e.joints,t);return Object(O.a)(Object(O.a)({},e),{},{joints:a})}),(function(e,t){var n,a=(n=e,Object(fr.a)({[Object(vr.a)(L.machineState.tool.setToolLengthOffset,L.machineState.tool.clearToolLengthOffset,L.machineState.motion.rapid,L.machineState.motion.linear,L.machineState.motion.arcCW,L.machineState.motion.arcCCW,L.machineState.motion.setPosition,L.machineState.kinematicsMode.setFiveAxis,L.machineState.kinematicsMode.setTrivial)]:function(e,t){var a=kt[n.machine],r=Object(O.a)(Object(O.a)({},e.position),a.kinematics.forwardKinematics(n));return Object(O.a)(Object(O.a)({},e),{},{position:r})}},Cr))(e.motion,t);return Object(O.a)(Object(O.a)({},e),{},{motion:a})})),zr=n(6),Zr=Object(zr.a)((function(e,t,n){var a=e.times,r=0;if(t>=a[a.length-1])t=a[r=a.length-1];else if(0===t)r=0;else{for(var i=0,o=a.length-1,s=Math.floor(a.length/2);i+1<o;)a[s]>=t?o=s:i=s,s=Math.floor(.5*(i+o));r=t<a[i]?i:o}e.currentLine=r,e.currentTime=t,e.paused=n})),Vr=Object(fr.a)({[I.interpreter.startLoading]:Object(zr.a)((function(e,t){e.lines=[],e.loadingProgress=0,e.loading=!0,e.currentLine=0,e.totalTime=0,e.states=[],e.times=[],e.messages=[]})),[I.interpreter.endLoading]:Object(zr.a)((function(e,t){e.loading=!1})),[I.interpreter.setFileName]:Object(zr.a)((function(e,t){e.fileName=t.payload})),[I.interpreter.setLoadingProgress]:Object(zr.a)((function(e,t){e.loadingProgress=t.payload})),[I.interpreter.setLines]:Object(zr.a)((function(e,t){e.lines=Object.freeze(t.payload.lines),e.currentLine=0,e.currentTime=0,e.paused=!0,e.running=!0,e.linesPerIndex=Math.max(Math.min(Math.ceil(t.payload.lines.length/5e4),300),1),e.states=[],e.times=[],e.messages=[]})),[I.interpreter.startProcessing]:Object(zr.a)((function(e,t){e.processingProgress=0,e.processing=!0,e.states=[],e.times=[],e.messages=[]})),[I.interpreter.endProcessing]:Object(zr.a)((function(e,t){e.processing=!1})),[I.interpreter.setProcessingProgress]:Object(zr.a)((function(e,t){e.processingProgress=t.payload})),[I.interpreter.setInitialState]:Object(zr.a)((function(e,t){e.initialState=t.payload})),[I.interpreter.appendIndices]:function(e,t){return Object(zr.a)(e,(function(n){for(var a=[],r=0;r<e.states.length;r++)a.push(e.states[r]);for(var i=0;i<t.payload.length;i++)a.push(t.payload[i]);n.states=Object.freeze(a)}))},[I.interpreter.appendMessages]:function(e,t){return Object(zr.a)(e,(function(n){for(var a=[],r=0;r<e.messages.length;r++)a.push(e.messages[r]);for(var i=0;i<t.payload.length;i++)a.push(t.payload[i]);n.messages=Object.freeze(a)}))},[I.interpreter.appendTimes]:function(e,t){return Object(zr.a)(e,(function(n){for(var a=e.times,r=e.lines.length,i=[],o=0;o<a.length;o++)i.push(a[o]);for(var s=0;s<t.payload.length;s++)i.push(t.payload[s]);n.times=Object.freeze(i),n.totalTime=i[i.length-1]*r/i.length}))},[I.interpreter.pause]:Object(zr.a)((function(e,t){e.paused=!0})),[I.interpreter.stop]:Object(zr.a)((function(e,t){e.running=!1})),[I.interpreter.unpause]:Object(zr.a)((function(e,t){e.currentTime>=e.totalTime-We&&(e.currentTime=0,e.currentLine=0),e.paused=!1})),[I.interpreter.run]:Object(zr.a)((function(e,t){e.running=!0})),[I.interpreter.setTimeMultiplier]:Object(zr.a)((function(e,t){e.timeMultiplier=t.payload})),[I.interpreter.previousLine]:Object(zr.a)((function(e,t){var n=Math.max(e.currentLine-1,0),a=e.times[n];return Object(O.a)(Object(O.a)({},e),{},{currentLine:n,currentTime:a,paused:!0})})),[I.interpreter.nextLine]:Object(zr.a)((function(e,t){var n=Math.min(e.currentLine+1,e.lines.length-1),a=e.times[n];e.currentLine=n,e.currentTime=a})),[I.interpreter.setCurrentLine]:Object(zr.a)((function(e,t){var n=Math.max(0,Math.min(e.lines.length-1,t.payload)),a=e.times[n];e.currentLine=n,e.currentTime=a})),[I.interpreter.incrementTime]:function(e,t){var n=e.currentTime,a=e.timeMultiplier,r=t.payload*a;return Zr(e,n+r,e.currentTime>=e.totalTime)},[I.interpreter.setCurrentLineWithTime]:function(e,t){return Zr(e,t.payload,e.paused)},[I.interpreter.setCurrentLineWithPercentage]:function(e,t){return Zr(e,e.totalTime*t.payload/100,!0)}},{fileName:"sim.ngc",lines:[],messages:[],states:[],initialState:{},times:[],linesPerIndex:1,loading:!1,loadingProgress:0,processing:!1,processingProgress:0,currentLine:0,totalTime:0,currentTime:0,paused:!0,running:!1,timeMultiplier:1}),Hr=Object(fr.a)({[F.viewer3d.parentCamera]:Object(zr.a)((function(e,t){e.cameraParent=t.payload})),[F.viewer3d.setPerspective]:Object(zr.a)((function(e,t){e.cameraMode="PERSPECTIVE"})),[F.viewer3d.setOrthographic]:Object(zr.a)((function(e,t){e.cameraMode="ORTHOGRAPHIC"})),[F.viewer3d.loadModel]:Object(zr.a)((function(e,t){e.modelLoaded=!0})),[F.viewer3d.showModel]:Object(zr.a)((function(e,t){e.showModel=!0})),[F.viewer3d.hideModel]:Object(zr.a)((function(e,t){e.showModel=!1})),[F.viewer3d.setDimensions]:Object(zr.a)((function(e,t){e.width=t.payload.width,e.height=t.payload.height})),[F.viewer3d.cameraSetRadius]:Object(zr.a)((function(e,t){e.radius=t.payload})),[F.viewer3d.cameraSetOrthographicZoom]:Object(zr.a)((function(e,t){e.orthographicZoom=t.payload})),[F.viewer3d.cameraSetPhi]:Object(zr.a)((function(e,t){e.phi=t.payload})),[F.viewer3d.cameraSetTheta]:Object(zr.a)((function(e,t){e.theta=t.payload})),[F.viewer3d.cameraZoom]:Object(zr.a)((function(e,t){var n=e.radius,a=e.orthographicZoom,r=t.payload;r<0?(n*=.95,a/=.95):r>0&&(n/=.95,a*=.95),a=Math.min(50,Math.max(.1,a)),n=Math.min(50,Math.max(.1,n)),e.orthographicZoom=a,e.radius=n})),[F.viewer3d.cameraStartRotating]:Object(zr.a)((function(e,t){e.rotating=!0})),[F.viewer3d.cameraStopRotating]:Object(zr.a)((function(e,t){e.rotating=!1})),[F.viewer3d.cameraSetDirection]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.y,i=n.z,o=Math.sqrt(a*a+r*r+i*i),s=0,c=0;0!==o&&(c=Math.atan2(a,i),s=Math.acos(Math.max(Math.min(r/o,1),-1))),(s<=We||s>=Math.PI-We)&&(c=e.theta),e.phi=s,e.theta=c})),[F.viewer3d.cameraRotate]:Object(zr.a)((function(e,t){if(e.rotating){var n=e.width,a=e.height,r=t.payload,i=r.dx,o=r.dy,s=e.theta-2*Math.PI*i/n*2,c=Math.max(We,Math.min(Math.PI-We,e.phi-2*Math.PI*o/a*2));e.theta=s,e.phi=c}}))},{width:500,height:500,showModel:!1,modelLoaded:!1,cameraParent:ye,cameraMode:"PERSPECTIVE",rotating:!1,radius:10,orthographicZoom:1,phi:Math.PI/4,theta:-Math.PI/2}),Br=Object(fr.a)({[_.ui.gcodePane.setWidth]:Object(zr.a)((function(e,t){e.width=t.payload})),[_.ui.gcodePane.setSelected]:Object(zr.a)((function(e,t){e.selectedLine=t.payload})),[_.ui.gcodePane.setLineOffset]:Object(zr.a)((function(e,t){e.lineOffset=t.payload})),[_.ui.gcodePane.setShowLines]:Object(zr.a)((function(e,t){e.showLines=t.payload})),[_.ui.gcodePane.scroll]:Object(zr.a)((function(e,t){e.lineOffset+=t.payload})),[_.ui.gcodePane.setTab]:Object(zr.a)((function(e,t){e.currentTab=t.payload})),[_.ui.gcodePane.togglePane]:Object(zr.a)((function(e,t){e.visible=!e.visible}))},{width:320,visible:!0,lineOffset:0,showLines:50,selectedLine:0,currentTab:0}),Ur=Object(fr.a)({[_.ui.controlsOverlay.setVisible]:Object(zr.a)((function(e,t){e.visible=t.payload}))},{visible:!1}),Xr=Object(fr.a)({[V.iframe.initialize]:Object(zr.a)((function(e,t){e.visible=!1}))},{visible:!0}),Yr=Object(hr.combineReducers)({gcodePane:Br,controlsOverlay:Ur,titleBar:Xr}),Wr=function(e){var t=e.posx,n=e.posy,a=e.posz,r=e.dirx,i=e.diry,o=e.dirz,s=e.toolOffsetZ,c=e.offsetZ,l=e.xform,u=new ie.Vector3(t,n,a),d=new ie.Vector4(r,i,o,0),h=new ie.Matrix4;h.makeRotationFromEuler(new ie.Euler(l.rx/180*Math.PI,l.ry/180*Math.PI,l.rz/180*Math.PI)),h.multiplyScalar(l.s),h.setPosition(new ie.Vector3(l.tx,l.ty,l.tz)),u.applyMatrix4(h),d.applyMatrix4(h);var p=Math.asin(d.y),m=Math.atan2(-d.x,d.z),f=bt({A:180*p/Math.PI,B:180*m/Math.PI,X:u.x/25.4,Y:u.y/25.4,Z:u.z/25.4},s);return Object(zr.a)(f,(function(e){e[2]+=c}))},Kr={machine:"V2_50",width:500,height:500,toolOffsetZ:-3,editingOffsetZ:1.5,previewingOffsetZ:0,gettingStatus:!1,step:Ve,modelFinalized:!1,finalizeModelClicked:!1,modelLoaded:!1,modelUploaded:!1,finishedProcessingModel:!1,scannersDetected:0,xform:{s:1,rx:0,ry:0,rz:0,tx:0,ty:0,tz:0},loading:{},points:[],closePath:!1,pointsNeedSaving:!1,xformNeedsSaving:!1,activePoint:-1,highlightedPoint:-1,showGhostSphere:!1,ghostSpherePosition:{x:0,y:0,z:0},ghostSphereOpacity:.5,scannerKey:"",rfid:"",label:"",joints:[0,(5+Ye)/25.4,0,0,0],machineRotating:!1,rotateStartX:0,rotateStartY:0,modelHighlighted:!1,dragModelStartX:0,dragModelStartZ:0,paused:!0,time:0,timeMultiplier:1,times:[0]},Jr=Object(zr.a)(Kr,(function(e){delete e.scannersDetected,delete e.width,delete e.height})),qr=Object(fr.a)({[V.alignerState.setTimes]:Object(zr.a)((function(e,t){e.times=t.payload})),[V.alignerState.setMachine]:Object(zr.a)((function(e,t){e.machine=t.payload})),[V.alignerState.play]:Object(zr.a)((function(e,t){var n=.5*e.points.length;e.time>=n&&(e.time=0),e.paused=!1})),[V.alignerState.pause]:Object(zr.a)((function(e,t){e.paused=!0})),[V.alignerState.incrementTime]:function(e,t){var n,a,r,i,o,s,c,l,u,d,h,p,m,f,v,g=e.time,b=e.timeMultiplier,O=e.times,M=e.points,y=t.payload*b,S=O.times.length-1,x=Math.min(g+y,S),j=e.closePath,w=0;if(g>=S)w=1;else if(0===g)w=0;else{n=0,a=O.length-1;for(var E=Math.floor(O.length/2);n+1<a;)O[E]>g?a=E:n=E,E=Math.floor(.5*(n+a));w=(n+(g-O[n])/(O[a]-O[n]))/(O.length-1)}j?(o=(r=M.length)*w-(i=Math.floor(r*w)),i>=M.length&&(i=0)):o=(r=M.length-1)*w-(i=Math.floor(r*w)),j?(v=((f=((m=i)+1)%r)+1)%r,p=(m+r-1)%r):((m=i)>=r&&(m=r),(f=m+1)>=r&&(f=r),(v=f+1)>=r&&(v=r),(p=m-1)<0&&(p=0));var T=new ie.Vector3(M[p][0],M[p][1],M[p][2]),P=new ie.Vector3(M[m][0],M[m][1],M[m][2]),A=new ie.Vector3(M[f][0],M[f][1],M[f][2]),C=new ie.Vector3(M[v][0],M[v][1],M[v][2]),k=new ie.Vector3,R=new ie.Vector3,L=new ie.Vector3,I=new ie.Vector3;k.copy(P),R.copy(A);L.copy(A),L.sub(T),L.multiplyScalar(.5),I.copy(C),I.sub(P),I.multiplyScalar(.5);var G=(1+2*o)*(1-o)*(1-o)*k.x+o*(1-o)*(1-o)*L.x+o*o*(3-2*o)*R.x+o*o*(o-1)*I.x,N=(1+2*o)*(1-o)*(1-o)*k.y+o*(1-o)*(1-o)*L.y+o*o*(3-2*o)*R.y+o*o*(o-1)*I.y,_=(1+2*o)*(1-o)*(1-o)*k.z+o*(1-o)*(1-o)*L.z+o*o*(3-2*o)*R.z+o*o*(o-1)*I.z,D=new ie.Vector3(M[m][3],M[m][4],M[m][5]),F=new ie.Vector3(M[f][3],M[f][4],M[f][5]),z=D.angleTo(F),Z=new ie.Vector3;Z.crossVectors(D,F),Z.normalize();var V=new ie.Vector3;V.copy(D),V.applyAxisAngle(Z,z*o),s=G,c=N,l=_,u=V.x,d=V.y,h=V.z;var H=e.xform,B=e.step,U=e.toolOffsetZ,X=B===Be?e.editingOffsetZ:e.previewingOffsetZ,Y=Wr({posx:s,posy:c,posz:l,dirx:u,diry:d,dirz:h,toolOffsetZ:U,offsetZ:X,xform:H});return Object(zr.a)(e,(function(e){x>=S&&(e.paused=!0),e.time=x,e.joints=Y,e.activePoint=i}))},[V.alignerState.setTimeWithPercentage]:function(e,t){var n,a,r,i,o,s,c,l,u,d,h,p,m,f,v,g,b=e.points,O=e.times,M=O[O.length-1],y=Math.min(t.payload/100*M,M),S=e.closePath;if(y>=M)n=1;else if(0===y)n=0;else{a=0,r=O.length-1;for(var x=Math.floor(O.length/2);a+1<r;)O[x]>y?r=x:a=x,x=Math.floor(.5*(a+r));n=(a+(y-O[a])/(O[r]-O[a]))/(O.length-1)}S?(s=(i=b.length)*n-(o=Math.floor(i*n)),o>=b.length&&(o=0)):s=(i=b.length-1)*n-(o=Math.floor(i*n)),S?(g=((v=((f=o)+1)%i)+1)%i,m=(f+i-1)%i):((f=o)>=i&&(f=i),(v=f+1)>=i&&(v=i),(g=v+1)>=i&&(g=i),(m=f-1)<0&&(m=0));var j=new ie.Vector3(b[m][0],b[m][1],b[m][2]),w=new ie.Vector3(b[f][0],b[f][1],b[f][2]),E=new ie.Vector3(b[v][0],b[v][1],b[v][2]),T=new ie.Vector3(b[g][0],b[g][1],b[g][2]),P=new ie.Vector3,A=new ie.Vector3,C=new ie.Vector3,k=new ie.Vector3;P.copy(w),A.copy(E);C.copy(E),C.sub(j),C.multiplyScalar(.5),k.copy(T),k.sub(w),k.multiplyScalar(.5);var R=(1+2*s)*(1-s)*(1-s)*P.x+s*(1-s)*(1-s)*C.x+s*s*(3-2*s)*A.x+s*s*(s-1)*k.x,L=(1+2*s)*(1-s)*(1-s)*P.y+s*(1-s)*(1-s)*C.y+s*s*(3-2*s)*A.y+s*s*(s-1)*k.y,I=(1+2*s)*(1-s)*(1-s)*P.z+s*(1-s)*(1-s)*C.z+s*s*(3-2*s)*A.z+s*s*(s-1)*k.z,G=new ie.Vector3(b[f][3],b[f][4],b[f][5]),N=new ie.Vector3(b[v][3],b[v][4],b[v][5]),_=G.angleTo(N),D=new ie.Vector3;D.crossVectors(G,N),D.normalize();var F=new ie.Vector3;F.copy(G),F.applyAxisAngle(D,_*s),c=R,l=L,u=I,d=F.x,h=F.y,p=F.z;var z=e.xform,Z=e.step,V=e.toolOffsetZ,H=Z===Be?e.editingOffsetZ:e.previewingOffsetZ,B=Wr({posx:c,posy:l,posz:u,dirx:d,diry:h,dirz:p,toolOffsetZ:V,offsetZ:H,xform:z});return Object(zr.a)(e,(function(e){y>=M&&(e.paused=!0),e.time=y,e.joints=B,e.activePoint=o}))},[V.alignerState.setTimeMultiplier]:Object(zr.a)((function(e,t){e.timeMultiplier=t.payload})),[V.alignerState.closePath]:Object(zr.a)((function(e,t){e.closePath=!0,e.pointsNeedSaving=!0})),[V.alignerState.setDragModelStartPoint]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.z;e.dragModelStartX=a,e.dragModelStartZ=r})),[V.alignerState.setModelPosition]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.y,i=n.z,o=e.xform;o.tx=a,o.ty=r,o.tz=i,e.xformNeedsSaving=!0})),[V.alignerState.setModelOrientation]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.y,i=n.z;e.xform.rx=a,e.xform.ry=r,e.xform.rz=i,e.xformNeedsSaving=!0})),[V.alignerState.dragModel]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.z,i=a-e.dragModelStartX,o=r-e.dragModelStartZ,s=e.xform;s.tx+=i,s.tz+=o,e.dragModelStartX=a,e.dragModelStartZ=r,e.xformNeedsSaving=!0})),[V.alignerState.setHighlightModel]:Object(zr.a)((function(e,t){e.highlightModel=!!t.payload})),[V.alignerState.resetState]:function(e,t){return Object(O.a)(Object(O.a)({},e),Jr)},[V.alignerState.setDimensions]:Object(zr.a)((function(e,t){var n=t.payload,a=n.width,r=n.height;e.width=a,e.height=r})),[V.alignerState.startRotatingMachine]:Object(zr.a)((function(e,t){var n=t.payload,a=n.x,r=n.y;e.rotateStartX=a,e.rotateStartY=r,e.machineRotating=!0})),[V.alignerState.stopRotatingMachine]:Object(zr.a)((function(e,t){e.machineRotating=!1})),[V.alignerState.rotateMachine]:function(e,t){var n=t.payload,a=n.x,r=n.y;if(e.machineRotating){var i,o=e.rotateStartX,s=e.rotateStartY,c=e.width,l=e.height,u=a/c*2-1-(o/c*2-1),d=r/l*2-1-(s/l*2-1),h=e.joints[3]+300*d,p=e.joints[4]+300*u,m=e.points,f=m,v=!1;if(m.length>0){var g=e.activePoint,b=m[g],O=e.step,M=e.toolOffsetZ,y=O===Be?e.editingOffsetZ:e.previewingOffsetZ,S=e.xform,x=new ie.Vector3(b[0],b[1],b[2]),j=new ie.Matrix4;j.makeRotationFromEuler(new ie.Euler(S.rx/180*Math.PI,S.ry/180*Math.PI,S.rz/180*Math.PI)),j.multiplyScalar(S.s),j.setPosition(new ie.Vector3(S.tx,S.ty,S.tz)),x.applyMatrix4(j),i=bt({A:h,B:p,X:x.x/25.4,Y:x.y/25.4,Z:x.z/25.4},M),i=Object(zr.a)(i,(function(e){e[2]+=y}));var w=new ie.Matrix4;w.getInverse(j);var E=new ie.Vector4(-Math.sin(p*Math.PI/180),Math.sin(h*Math.PI/180),Math.cos(p*Math.PI/180),0);E.applyMatrix4(w),E.normalize();var T=Object(zr.a)(b,(function(e){e[3]=E.x,e[4]=E.y,e[5]=E.z}));f=Object(zr.a)(m,(function(e){e[g]=T})),v=!0}else i=Object(zr.a)(e.joints,(function(e){e[3]=h,e[4]=p}));return Object(zr.a)(e,(function(e){e.joints=i,e.rotateStartX=a,e.rotateStartY=r,e.points=f,e.pointsNeedSaving=v}))}return e},[V.alignerState.pointsSaved]:Object(zr.a)((function(e,t){e.pointsNeedSaving=!1})),[V.alignerState.transformSaved]:Object(zr.a)((function(e,t){e.xformNeedsSaving=!1})),[V.alignerState.nextPoint]:Object(zr.a)((function(e,t){var n=e.points,a=e.times,r=(e.activePoint+1)%n.length,i=n[r],o=e.step,s=e.toolOffsetZ,c=o===Be?e.editingOffsetZ:e.previewingOffsetZ,l=e.xform,u=Wr({posx:i[0],posy:i[1],posz:i[2],dirx:i[3],diry:i[4],dirz:i[5],toolOffsetZ:s,offsetZ:c,xform:l});e.activePoint=r,e.joints=u,e.time=a[r]})),[V.alignerState.prevPoint]:Object(zr.a)((function(e,t){var n=e.times,a=e.points,r=e.closePath,i=e.time,o=e.activePoint;n[o]===i&&(o=r?(o-1+a.length)%a.length:Math.max(o-1,0));var s=n[o],c=a[o],l=e.step,u=e.toolOffsetZ,d=l===Be?e.editingOffsetZ:e.previewingOffsetZ,h=e.xform,p=Wr({posx:c[0],posy:c[1],posz:c[2],dirx:c[3],diry:c[4],dirz:c[5],toolOffsetZ:u,offsetZ:d,xform:h});e.activePoint=o,e.joints=p,e.time=s})),[V.alignerState.setActivePoint]:Object(zr.a)((function(e,t){var n=t.payload,a=e.points,r=.5*a.length,i=a[n],o=e.closePath,s=e.step,c=e.toolOffsetZ,l=s===Be?e.editingOffsetZ:e.previewingOffsetZ,u=e.xform,d=Wr({posx:i[0],posy:i[1],posz:i[2],dirx:i[3],diry:i[4],dirz:i[5],toolOffsetZ:c,offsetZ:l,xform:u});e.activePoint=n,e.joints=d,e.time=r*n/(o?a.length:a.length-1)})),[V.alignerState.setHighlightedPoint]:Object(zr.a)((function(e,t){e.highlightedPoint=t.payload})),[V.alignerState.updatePointPosition]:Object(zr.a)((function(e,t){var n=t.payload,a=n.posx,r=n.posy,i=n.posz,o=e.points,s=e.activePoint,c=o[s];c[0]=a,c[1]=r,c[2]=i,o[s]=c,e.pointsNeedSaving=!0})),[V.alignerState.deletePoint]:function(e,t){var n=e.activePoint,a=e.points;if(a.length>0){var r=e.closePath,i=Object(zr.a)(e,(function(e){e.points.splice(n,1),e.activePoint=1===a.length?-1:0===n?r?Math.max(a.length-2,0):0:n-1})),o=i.activePoint;if(o>-1){var s=i.points[o],c=e.step,l=e.toolOffsetZ,u=c===Be?e.editingOffsetZ:e.previewingOffsetZ,d=e.xform,h=Wr({posx:s[0],posy:s[1],posz:s[2],dirx:s[3],diry:s[4],dirz:s[5],toolOffsetZ:l,xform:d,offsetZ:u});return Object(zr.a)(i,(function(e){e.joints=h}))}return Object(zr.a)(i,(function(e){e.joints=Kr.joints}))}return e},[V.alignerState.addPoint]:Object(zr.a)((function(e,t){var n=t.payload,a=n.posx,r=n.posy,i=n.posz,o=n.dirx,s=n.diry,c=n.dirz,l=e.step,u=e.toolOffsetZ,d=l===Be?e.editingOffsetZ:e.previewingOffsetZ,h=e.xform,p=Wr(Object(O.a)(Object(O.a)({},t.payload),{},{toolOffsetZ:u,offsetZ:d,xform:h})),m=e.activePoint;e.points.splice(m,0,[a,r,i,o,s,c]),e.activePoint=m+1,e.joints=p,e.pointsNeedSaving=!0})),[V.alignerState.showGhostSphere]:Object(zr.a)((function(e,t){e.showGhostSphere=!0})),[V.alignerState.hideGhostSphere]:Object(zr.a)((function(e,t){e.showGhostSphere=!1})),[V.alignerState.setGhostSpherePosition]:Object(zr.a)((function(e,t){e.ghostSpherePosition.x=t.payload.x,e.ghostSpherePosition.y=t.payload.y,e.ghostSpherePosition.z=t.payload.z})),[V.alignerState.setGhostSphereOpacity]:Object(zr.a)((function(e,t){e.ghostSphereOpacity=t.payload})),[V.alignerState.setJoints]:Object(zr.a)((function(e,t){e.joints=t.payload})),[V.alignerState.setRfid]:Object(zr.a)((function(e,t){e.rfid=t.payload})),[V.alignerState.setStep]:Object(zr.a)((function(e,t){var n=t.payload;if(e.step=n,e.points.length>0){var a=e.activePoint,r=e.points[a],i=e.toolOffsetZ,o=n===Be?e.editingOffsetZ:e.previewingOffsetZ,s=e.xform,c=Wr({posx:r[0],posy:r[1],posz:r[2],dirx:r[3],diry:r[4],dirz:r[5],xform:s,toolOffsetZ:i,offsetZ:o});e.joints=c}else e.joints=Kr.joints})),[V.alignerState.modelLoaded]:Object(zr.a)((function(e,t){e.modelLoaded=!0})),[V.alignerState.modelUploaded]:Object(zr.a)((function(e,t){e.modelUploaded=!0})),[V.alignerState.finalizeModel]:Object(zr.a)((function(e,t){e.modelFinalized=!0})),[V.alignerState.finalizeModelClick]:Object(zr.a)((function(e,t){e.finalizeModelClicked=!0})),[V.alignerState.clearFinalizeModelClick]:Object(zr.a)((function(e,t){e.finalizeModelClicked=!1})),[V.alignerState.finishedProcessing]:Object(zr.a)((function(e,t){e.finishedProcessingModel=!0})),[V.alignerState.importedTransformAndPoints]:Object(zr.a)((function(e,t){e.points=t.payload.points.points,t.payload.points.points.length>0&&(e.activePoint=0),e.closePath=t.payload.points.closed,e.xform=t.payload.xform})),[V.alignerState.importTransformAndPoints]:Object(zr.a)((function(e,t){e.loading.waitingForScannerToScanRFIDToImport={label:"Please scan RFID to import...",variant:"indeterminate"}})),[V.alignerState.cancelImportTransformAndPoints]:Object(zr.a)((function(e,t){delete e.loading.waitingForScannerToScanRFIDToImport})),[V.alignerState.loading]:Object(zr.a)((function(e,t){var n=t.payload,a=n.id,r=n.label,i=n.variant,o=n.progress;e.loading[a]={label:r,variant:i,progress:o}})),[V.alignerState.loadingProgress]:Object(zr.a)((function(e,t){var n=t.payload,a=n.id,r=n.progress;e.loading[a].progress=r})),[V.alignerState.stopLoading]:Object(zr.a)((function(e,t){var n=t.payload.id;delete e.loading[n]})),[V.alignerState.rotateCW]:Object(zr.a)((function(e,t){var n=e.xform,a=new ie.Matrix4;a.makeRotationFromEuler(new ie.Euler(n.rx/180*Math.PI,n.ry/180*Math.PI,n.rz/180*Math.PI)),a.setPosition(new ie.Vector3(n.tx,n.ty,n.tz));var r=new ie.Matrix4;r.makeRotationY(-Math.PI/2),a.premultiply(r);var i=new ie.Euler;i.setFromRotationMatrix(a);var o=new ie.Vector3;o.setFromMatrixPosition(a),e.xform={s:n.get("s"),rx:180*i.x/Math.PI,ry:180*i.y/Math.PI,rz:180*i.z/Math.PI,tx:o.x,ty:o.y,tz:o.z},e.xformNeedsSaving=!0})),[V.alignerState.rotateCCW]:Object(zr.a)((function(e,t){var n=e.xform,a=new ie.Matrix4;a.makeRotationFromEuler(new ie.Euler(n.rx/180*Math.PI,n.ry/180*Math.PI,n.rz/180*Math.PI)),a.setPosition(new ie.Vector3(n.tx,n.ty,n.tz));var r=new ie.Matrix4;r.makeRotationY(Math.PI/2),a.premultiply(r);var i=new ie.Euler;i.setFromRotationMatrix(a);var o=new ie.Vector3;o.setFromMatrixPosition(a),e.xform={s:n.get("s"),rx:180*i.x/Math.PI,ry:180*i.y/Math.PI,rz:180*i.z/Math.PI,tx:o.x,ty:o.y,tz:o.z},e.xformNeedsSaving=!0})),[V.alignerState.alignerStatusResponse]:Object(zr.a)((function(e,t){var n=t.payload,a=n.model,r=n.xform,i=n.finalized,o=n.processing,s=n.processedModel,c=n.points;if(e.modelFinalized=i,e.finalizeModelClicked=i,e.modelLoaded=!1,e.modelUploaded=!!a,e.processingModel=o,e.finishedProcessingModel=s,e.xform=r||Kr.xform,c){var l=c.points;if(e.closePath=c.closed,e.points=l,l.length>0){e.activePoint=l.length-1;var u=l[0],d=e.toolOffsetZ,h=e.previewingOffsetZ,p=e.xform,m=Wr({posx:u[0],posy:u[1],posz:u[2],dirx:u[3],diry:u[4],dirz:u[5],toolOffsetZ:d,xform:p,offsetZ:h});e.joints=m}else e.activePoint=-1;e.highlightedPoint=-1}else e.points=[],e.activePoint=-1,e.highlightedPoint=-1})),[V.rfid.connectedScanner]:Object(zr.a)((function(e,t){e.scannersDetected+=1})),[V.rfid.disconnectedScanner]:Object(zr.a)((function(e,t){e.scannersDetected-=1})),[V.rfid.receivedRfidScanMessage]:Object(zr.a)((function(e,t){var n=t.payload,a=n.rfid,r=n.label,i=n.scannerKey;e.loading.waitingForScannerToScanRFIDToImport||(e.rfid=a,e.label=r,e.scannerKey=i)}))},Kr),$r=Object(hr.combineReducers)({machineState:Fr,alignerState:qr,interpreter:Vr,ui:Yr,viewer3d:Hr}),Qr=Object(mr.a)($r,(function(e,t){var n,a=(n=e,Object(fr.a)({[Object(vr.a)(V.interpreter.previousLine,V.interpreter.nextLine,V.interpreter.incrementTime,V.interpreter.setCurrentLineWithPercentage,V.interpreter.setCurrentLineWithTime,V.interpreter.setCurrentLine)]:function(e,t){var a=n.interpreter.currentLine,r=a-1,i=n.interpreter.linesPerIndex,o=n.interpreter.states.length;if(o>0){var s=Math.min(Math.floor(r/i),o-1),c=s<0?n.interpreter.initialState:n.interpreter.states[s],l=Math.max(s*i,-1),u=c,d=n.interpreter.lines,h=null,p=null,m=Math.min(Math.floor(a/i),o-1);if(r>l||m*i!==a){h=new _r({machineState:u});for(var f=l;f<=r;)u=h.interpret(d[f]),f++}p=m*i===a?n.interpreter.states[m]:h.interpret(d[a]);var v=kt[p.machine],g=u.joints,b=v.kinematics.forwardKinematics(Object(O.a)(Object(O.a)({},p),{},{joints:g})),M=p.motion.position,y=n.interpreter.times,S=r<0?0:y[r],x=y[a],j=n.interpreter.currentTime,w=1;x-S>0&&(w=(j-S)/(x-S));var E=p.motion.mode,T=p.motion.turns,P=p.planeSelect,A=br(E,b,M,w,P,T),C=Object(O.a)(Object(O.a)({},p),{},{motion:Object(O.a)(Object(O.a)({},p.motion),{},{position:A})}),k=v.kinematics.inverseKinematics(C);return Object(O.a)(Object(O.a)({},C),{},{joints:k})}return e}},n.machineState))(e.machineState,t);return Object(zr.a)(e,(function(e){e.machineState=a}))})),ei=n(10),ti=n.n(ei),ni=n(2),ai=ti.a.mark(si),ri=ti.a.mark(ci),ii=ee();function oi(e,t,n,a,r,i){return new Promise((function(o){return setTimeout((function(){for(var s,c=[],l=[],u=[],d=[],h=e.getState(),p=0;p<a&&n<t.length;p++){s=e.interpret(t[n]),e.messages.length>0&&e.messages.forEach(function(e){return function(t){d.push(mt(t,e))}}(n));var m=kt[s.machine],f=h.joints,v=s.joints,g=h.motion.position,b=s.motion.position;if(s.motion.issuedMotionCommand){var M=s.motion.turns,y=s.motion.mode,S=s.planeSelect,x=s.units,j=0,w=s.feedRate,E=s.feedRateMode;if(E!==Pe&&x===ze&&(w/=25.4),"RAPID"!==y)if(E===Pe)w<We?d.push(mt({message:"Feed rate must be greater than 0 for linear or arc moves.",severity:"error",type:"ZERO_FEED_RATE"},n)):j=1/w*60;else if(E===Ae)if("LINEAR"===y)if(w<We)d.push(mt({message:"Feed rate must be greater than 0 for linear or arc moves.",severity:"error",type:"ZERO_FEED_RATE"},n));else{for(var T=0,P=0;P<3;P++){var A=Math.abs(v[P]-f[P]);T=Math.max(T,A),j=Math.max(j,A/w*60)}if(T>-We&&T<We)for(var C=3;C<f.length;C++){var k=Math.abs(v[C]-f[C]);j=Math.max(j,k/w*60)}}else if("ARC_CW"===y||"ARC_CCW"===y){if(w<We)d.push(mt({message:"Feed rate must be greater than 0 for linear or arc moves.",severity:"error",type:"ZERO_FEED_RATE"},n));else j=gr(g,b,S,y,M)/w*60}else j=0;else j=3;for(var R=m.limits.velocities,L=m.limits.accelerations,I=0,G=3;G<f.length;G++){var N=Math.abs(v[G]-f[G]);I=Math.max(N,I)}for(var _=0;_<f.length;_++){var D=R[_]*R[_]/(.5*L[_]),F=Math.abs(v[_]-f[_]),z=0;z=I<We&&I>-We?F/R[_]:F>=D?Math.max(F-D)/R[_]+2*R[_]/(.5*L[_]):2*Math.sqrt(F/L[_]),j=Math.max(j,z)}i+=j;var Z=f,V=v,H=s,B=m.kinematics.forwardKinematics(Object(O.a)(Object(O.a)({},H),{},{joints:Z})),U=H.motion.position,X=H.kinematicsMode,Y=Math.abs(V[3]-Z[3]),W=Math.abs(V[4]-Z[4]);if((Y>We||W>We)&&X!==ke||"RAPID"!==y&&"LINEAR"!==y){var K=40,J=!0,q=[];if("RAPID"!==y&&"LINEAR"!==y||!(W>-We||Y>-We)){if("ARC_CW"===y||"ARC_CCW"===y){var $=gr(g,b,S,y,M);K=Math.max(Math.ceil($/.1),5)}}else{var Q=Math.max(V[0],Z[0]),ee=Math.max(V[1],Z[1]),te=Math.max(6-V[2],6-Z[2]),ne=Math.sqrt(Q*Q+te*te),ae=Math.sqrt(ee*ee+te*te),re=Y*Math.PI/180*ae,ie=W*Math.PI/180*ne;K=Math.max(Math.ceil(ie/.1),Math.ceil(re/.1),5)}for(;J;){for(var ce=0,le=void 0,ue=0;ue<K;ue++){var de=ue/(K-1),he=i-j+de*j,pe=void 0;pe=0===de?.01/j:-.01/j;var me=s.motion.turns,fe=br(y,B,U,de,S,me),ve=br(y,B,U,de+pe,S,me),ge=m.kinematics.inverseKinematics(Object(O.a)(Object(O.a)({},H),{},{motion:Object(O.a)(Object(O.a)({},H.motion),{},{position:fe})})),be=m.kinematics.inverseKinematics(Object(O.a)(Object(O.a)({},H),{},{motion:Object(O.a)(Object(O.a)({},H.motion),{},{position:ve})})),Oe=m.workPieceSpace(ge,ra(H).Z),Me=m.toolOrientation(ge),ye=m.workPieceSpace(be,ra(H).Z),Se=[Oe.X,Oe.Y,Oe.Z],xe=[ye.X,ye.Y,ye.Z],je=[Me.X,Me.Y,Me.Z],we=void 0;if(pe>0){var Ee=xe[0]-Se[0],Te=xe[1]-Se[1],Ce=xe[2]-Se[2];we=Math.sqrt(Ee*Ee+Te*Te+Ce*Ce)/.01}else{var Re=Se[0]-xe[0],Le=Se[1]-xe[1],Ie=Se[2]-xe[2];we=Math.sqrt(Re*Re+Le*Le+Ie*Ie)/.01}if("RAPID"===y?q.push({position:Se,color:oe,speed:we,time:he,line:n,normal:je}):q.push({position:Se,color:se,speed:we,time:he,line:n,normal:je}),ue>0){var Ge=Se[0]-le[0],Ne=Se[1]-le[1],_e=Se[2]-le[2],De=Math.sqrt(Ge*Ge+Ne*Ne+_e*_e);ce=Math.max(ce,De)}le=Se}ce>1.5*.1?(K=Math.ceil(K*ce/.1),q=[]):J=!1}for(var Fe=0;Fe<q.length;Fe++)u.push(q[Fe])}else{var Ze=ra(h).Z,Ve=ra(s).Z,He=m.workPieceSpace(f,Ze),Be=m.workPieceSpace(v,Ve),Ue=m.toolOrientation(f),Xe=m.toolOrientation(v),Ye=Ue.X,Ke=Ue.Y,Je=Ue.Z,qe=Xe.X,$e=Xe.Y,Qe=Xe.Z,et=He.X,tt=He.Y,nt=He.Z,at=Be.X,rt=Be.Y,it=Be.Z,ot=at-et,st=rt-tt,ct=it-nt,lt=Math.sqrt(ot*ot+st*st+ct*ct)/j;switch(y){case"RAPID":u.push({position:[et,tt,nt],color:oe,speed:lt,time:i-j,line:n,normal:[Ye,Ke,Je]}),u.push({position:[at,rt,it],color:oe,speed:lt,time:i,line:n,normal:[qe,$e,Qe]});break;case"LINEAR":u.push({position:[et,tt,nt],color:se,speed:lt,time:i-j,line:n,normal:[Ye,Ke,Je]}),u.push({position:[at,rt,it],color:se,speed:lt,time:i,line:n,normal:[qe,$e,Qe]});break;default:console.error("shouldn't get here")}}}l.push(i),n%r===0&&c.push(s),h=s,n++}o({line:n,states:c,times:l,points:u,messages:d})}))}))}function si(e){var t,n,a,r,i,o,s,c,l,u,d,h,p,m,f,v,g,b,O,M,y,S,x;return ti.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:return t=K()(),j.next=3,Object(ni.e)(V.interpreter.startProcessing());case 3:return j.next=5,Object(ni.f)(ea);case 5:return n=j.sent,j.next=8,Object(ni.f)(ta);case 8:return a=j.sent,j.next=11,Object(ni.f)(na);case 11:return r=j.sent,i=new _r({machineState:n}),j.next=15,Object(ni.e)(V.interpreter.setInitialState(n));case 15:o=le.getInstance(),s=10,c=12,l=240,u=10,d=200,o.clear(),h=0,p=0,m=[],f=[],v=[];case 27:if(!(p<a.length)){j.next=54;break}return M=K()(),j.next=31,Object(ni.b)(oi,i,a,p,s,r,h);case 31:if(y=j.sent,S=K()(),s=document.hasFocus()?Math.max(Math.floor(s*c/(S-M)),u):Math.max(Math.floor(s*l/(S-M)),u),(g=f).push.apply(g,Object(Y.a)(y.times)),(b=v).push.apply(b,Object(Y.a)(y.states)),(O=m).push.apply(O,Object(Y.a)(y.messages)),h=y.times[y.times.length-1],p=y.line,o.addPoints(y.points),!(f.length>=d||p>=a.length)){j.next=52;break}return j.next=43,Object(ni.e)(V.interpreter.appendIndices(v));case 43:return j.next=45,Object(ni.e)(V.interpreter.appendTimes(f));case 45:return j.next=47,Object(ni.e)(V.interpreter.appendMessages(m));case 47:return j.next=49,Object(ni.e)(V.interpreter.setProcessingProgress(p/a.length*100));case 49:v=[],f=[],m=[];case 52:j.next=27;break;case 54:return j.next=56,Object(ni.e)(V.interpreter.endProcessing());case 56:if(e.preview){j.next=67;break}return ii.timing("interpreter","parsed gcode",Math.round(K()()-t)),j.next=60,Object(ni.f)(aa);case 60:return x=j.sent,ii.event("interpreter","calculated approximate run time","calculated approximate run time",Math.round(1e3*x)),j.next=64,Object(ni.f)(Yn);case 64:j.sent.forEach((function(e){ii.event("interpreter","unimplemented code "+e.code)})),ii.send();case 67:case"end":return j.stop()}}),ai)}function ci(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.i)(V.interpreter.setLines,si);case 2:case"end":return e.stop()}}),ri)}var li=ti.a.mark(hi),ui=ti.a.mark(pi);function di(){return new Promise((function(e){return window.requestAnimationFrame((function(){e()}))}))}function hi(e){var t,n,a,r,i,o;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.016;case 1:return e.next=4,Object(ni.f)(Qn);case 4:if(n=e.sent,a=n.running,r=n.paused,!a||r){e.next=17;break}return i=performance.now(),e.next=11,Object(ni.b)(di);case 11:return e.next=13,Object(ni.e)(V.interpreter.incrementTime(t));case 13:o=performance.now(),t=(o-i)/1e3,e.next=18;break;case 17:return e.abrupt("break",20);case 18:e.next=1;break;case 20:case"end":return e.stop()}}),li)}function pi(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.i)([V.interpreter.setLines,V.interpreter.pause,V.interpreter.unpause,V.interpreter.run,V.interpreter.nextLine,V.interpreter.previousLine,V.interpreter.setCurrentLineWithPercentage],hi);case 2:case"end":return e.stop()}}),ui)}var mi=ti.a.mark(fi);function fi(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.e)(V.interpreter.setLines("%\nG20\nG90 G94 G40 G17\nG53 G0 Z0\nG0 A0 B0\nG0 X0\nM5\nM0\nT4 M6\nG43\nS8500 M3\nF20\n\nG0 A90\nG0 X1 Y1\nG1 Z0\nG1 X-1\nG1 y-1\nG1 X1\nG1 Y1\n\nG49\nG53 G0 Z0\n\nM5\nM30\n%\n".split("\n")));case 2:case"end":return e.stop()}}),mi)}var vi=ti.a.mark(bi),gi=ti.a.mark(Oi);function bi(e){var t;return ti.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),t=dr.getInstance(),console.log(t.windows),t.sendMessage(e),void(n.next=6);case 6:case"end":return n.stop()}}),vi)}function Oi(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.h)(V.iframe.toRockhopper,bi);case 2:case"end":return e.stop()}}),gi)}var Mi=ti.a.mark(ji),yi=ti.a.mark(wi),Si=function(e){return e.open().then((function(){return e.selectConfiguration(1)})).then((function(){return e.claimInterface(2)})).then((function(){return e.selectAlternateInterface(2,0)})).then((function(){return e.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:2})})).then((function(){return{device:e}})).catch((function(e){return{error:e}}))},xi=function(e){return e.transferIn(5,64).then((function(e){return{data:(new TextDecoder).decode(e.data)}})).catch((function(e){return{error:e}}))};function ji(e,t){var n,a,r,i,o,s,c,l,u,d;return ti.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Object(ni.b)(Si,e);case 2:if(n=h.sent,!(a=n.device)){h.next=49;break}return h.next=7,Object(ni.e)(V.rfid.connectedScanner());case 7:r="",i=!0;case 9:if(!i){h.next=47;break}return h.next=12,Object(ni.b)(xi,a);case 12:if(o=h.sent,s=o.data,c=o.error,!s){h.next=40;break}if(!((l=(r+=s).indexOf("\r\n"))>-1)){h.next=38;break}if(u=r.slice(0,l),h.prev=20,!(d=JSON.parse(u)).error){h.next=27;break}return h.next=25,Object(ni.e)(V.rfid.receivedErrorMessage(d));case 25:h.next=30;break;case 27:if(!d.rfid){h.next=30;break}return h.next=30,Object(ni.e)(V.rfid.receivedRfidScanMessage(d));case 30:h.next=37;break;case 32:return h.prev=32,h.t0=h.catch(20),console.error(h.t0),h.next=37,Object(ni.e)(V.rfid.receivedIncompleteMessage());case 37:r=r.slice(l+2);case 38:h.next=45;break;case 40:if(!c){h.next=45;break}return h.next=43,Object(ni.e)(V.rfid.disconnectedScanner());case 43:t(a),i=!1;case 45:h.next=9;break;case 47:h.next=50;break;case 49:t(a);case 50:case"end":return h.stop()}}),Mi,null,[[20,32]])}function wi(){var e;return ti.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!1;try{e=window.self!==window.top}catch(n){e=!0}if(e||!navigator.usb){t.next=6;break}return t.delegateYield(ti.a.mark((function e(){var t,n,a;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},a=ti.a.mark((function e(){var a,r;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.getDevices();case 2:return a=e.sent,r=[],a.forEach((function(e){t.includes(e)||(t.push(e),r.push(e))})),e.next=7,Object(ni.a)(r.map((function(e){return Object(ni.d)(ji,e,n)})));case 7:return e.next=9,Object(ni.c)(1e3);case 9:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(a(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:t.next=9;break;case 6:return console.log("blah2"),t.next=9,Object(ni.c)(1e3);case 9:case"end":return t.stop()}}),yi)}var Ei=n(382),Ti=n.n(Ei),Pi=n(147),Ai=n.n(Pi),Ci=n(236),ki=function(e,t,n){var a=new te.Vector3(e[0],e[1],e[2]),r=new te.Vector3(t[0],t[1],t[2]);a.multiplyScalar(1/25.4);var i=Math.asin(r.y),o=Math.atan2(-r.x,r.z),s=Math.cos(i),c=Math.sin(i),l=Math.cos(o),u=Math.sin(o),d=new te.Vector3;return n?(d.x=a.x*l+a.z*u,d.y=a.x*u*c+a.y*s-a.z*l*c,d.z=-a.x*u*s+a.y*c+a.z*l*s):(d.x=a.x,d.y=a.y,d.z=a.z),{X:d.x,Y:d.y,Z:d.z,A:180*i/Math.PI,B:180*o/Math.PI}};function Ri(e){for(var t=e.map((function(e){return[[e[0],e[1],e[2]],[e[3],e[4],e[5]]]})),n=[],a=new te.Vector3,r=new te.Vector3,i=new te.Vector3,o=new te.Vector3,s=new te.Vector3,c=new te.Vector3,l=new te.Vector3(1,0,0),u=0;u<t.length;u++){i.set(t[u][0][0],t[u][0][1],t[u][0][2]),s.set(t[u][1][0],t[u][1][1],t[u][1][2]),u===t.length-1?(o.set(t[0][0][0],t[0][0][1],t[0][0][2]),c.set(t[0][1][0],t[0][1][1],t[0][1][2])):(o.set(t[u+1][0][0],t[u+1][0][1],t[u+1][0][2]),c.set(t[u+1][1][0],t[u+1][1][1],t[u+1][1][2])),s.normalize(),c.normalize();var d=s.angleTo(c);d>1e-5&&(l.crossVectors(s,c),l.normalize());var h=ki([i.x,i.y,i.z],[s.x,s.y,s.z],!0),p=ki([o.x,o.y,o.z],[c.x,c.y,c.z],!0),m=Math.abs(h.A-p.A),f=Math.abs(h.B-p.B);m>180&&(m=360-m),f>180&&(f=360-f);for(var v=Math.PI/180,g=Math.max(Math.ceil(d/v),2,Math.ceil(m),Math.ceil(f)),b=0;b<g;b++){var O=b/(g-1);a.lerpVectors(i,o,O),r.copy(s),r.applyAxisAngle(l,d*O),n.push([[a.x,a.y,a.z],[r.x,r.y,r.z]])}}var M=0,y=ki(n[0][0],n[0][1],!0),S=[],x=y;return n.forEach((function(e){var t=Object(Lt.a)(e,2),n=t[0],a=t[1],r=ki(n,a,!0);r.Z<M&&(M=r.Z);var i=r.X-x.X,o=r.Y-x.Y,s=r.Z-x.Z,c=r.A-x.A,l=r.B-x.B;l>180?l-=360:l<-180&&(l+=360);var u={};Math.abs(i)>1e-5&&(u.X=i),Math.abs(o)>1e-5&&(u.Y=o),Math.abs(s)>1e-5&&(u.Z=s),Math.abs(c)>1e-5&&(u.A=c),Math.abs(l)>1e-5&&(u.B=l),Object.keys(u).length>0&&S.push(u),x=r})),S}var Li="https://rfid-rest.pocketnc.com/aligner",Ii=function(e){var t=e.rfid,n=e.size,a=e.apiKey;return fetch(Li+"/"+t+"/getUploadModelPost?size="+n,{headers:{"x-api-key":a}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Gi=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/submitProcessModelJob",{method:"POST",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Ni=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/getDownloadProcessedModelUrl",{method:"GET",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},_i=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/getGCode",{method:"GET",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Di=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/processedModelExists",{method:"GET",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Fi=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/getStatus",{method:"GET",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},zi=function(e){var t=e.rfid,n=e.apiKey;return fetch(Li+"/"+t+"/finalize",{method:"PUT",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Zi=function(e){var t=e.rfid,n=e.apiKey,a=e.points;return fetch(Li+"/"+t+"/savePoints",{method:"PUT",headers:{"x-api-key":n},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Vi=function(e){var t=e.rfid,n=e.apiKey,a=e.rfidImport;return fetch(Li+"/"+t+"/importTransformAndPoints?rfidImport="+a,{method:"PUT",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Hi=function(e){var t=e.rfid,n=e.apiKey,a=e.xform;return fetch(Li+"/"+t+"/saveTransform",{method:"PUT",headers:{"x-api-key":n},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Bi=function(e){var t=e.rfid,n=e.apiKey,a=e.label;return fetch(Li+"/"+t+"/createLabel?label="+a,{method:"PUT",headers:{"x-api-key":n}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Ui=function(e){var t=e.rfid;return fetch(Li+"/"+t+"/getDemoKey",{headers:{}}).then((function(e){return e.json()})).then((function(e){return{data:e}})).catch((function(e){return{error:e}}))},Xi=ti.a.mark(so),Yi=ti.a.mark(co),Wi=ti.a.mark(lo),Ki=ti.a.mark(uo),Ji=ti.a.mark(ho),qi=ti.a.mark(po),$i=ti.a.mark(mo),Qi=ti.a.mark(fo),eo=ti.a.mark(vo),to=ti.a.mark(go),no=ti.a.mark(bo),ao=ti.a.mark(Mo),ro=ti.a.mark(yo),io=ti.a.mark(So),oo=ti.a.mark(xo);function so(e,t,n){var a,r,i,o;return ti.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:for(r in a=new FormData,e.fields)a.append(r,e.fields[r]);a.append("file",new File([new Blob([t])],"filename")),i=Object(pr.c)((function(t){var r;return Ai()({url:e.url,method:"POST",data:a,cancelToken:new Ai.a.CancelToken((function(e){return r=e})),onUploadProgress:function(e){t(n(e.loaded/e.total*100))}}).then((function(){t(pr.a)})).catch((function(e){console.error("upload error",e),t(pr.a)})),function(){return r()}})),s.prev=4;case 5:return s.next=8,Object(ni.g)(i);case 8:return o=s.sent,s.next=11,Object(ni.e)(o);case 11:s.next=5;break;case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}}),Xi,null,[[4,,13,15]])}function co(e,t){var n,a,r,i=arguments;return ti.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=i.length>2&&void 0!==i[2]?i[2]:"arraybuffer",a=Object(pr.c)((function(a){var r;return Ai()({url:e,method:"GET",responseType:n,cancelToken:new Ai.a.CancelToken((function(e){return r=e})),onDownloadProgress:function(e){a(t(e.loaded/e.total*100))}}).then((function(e){a(e.data),a(pr.a)})).catch((function(e){console.error("download error",e),a(pr.a)})),function(){return r()}})),o.prev=2;case 3:return o.next=6,Object(ni.g)(a);case 6:if((r=o.sent).type!==t(0).type){o.next=12;break}return o.next=10,Object(ni.e)(r);case 10:o.next=13;break;case 12:return o.abrupt("return",r);case 13:o.next=3;break;case 15:return o.prev=15,o.finish(15);case 17:case"end":return o.stop()}}),Yi,null,[[2,,15,17]])}function lo(e){var t,n,a,r;return ti.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=e.rfid,n=e.apiKey;case 1:return i.next=4,Object(ni.b)(Di,{rfid:t,apiKey:n});case 4:if(a=i.sent,r=a.data,a.error,!r.exists){i.next=12;break}return i.abrupt("break",16);case 12:return i.next=14,Object(ni.c)(5e3);case 14:i.next=1;break;case 16:return i.next=18,Object(ni.e)(V.alignerState.finishedProcessing());case 18:case"end":return i.stop()}}),Wi)}function uo(e){var t,n,a,r,i,o,s,c;return ti.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=new Uint8Array(e.payload),l.next=3,Object(ni.f)($n);case 3:if(n=l.sent,a=n.rfid,r=t.byteLength,i=n.scannerKey,!a||!i){l.next=29;break}return l.next=10,Object(ni.e)(V.alignerState.loading("preparingToUploadModel","Preparing to upload model...","indeterminate"));case 10:return l.next=12,Object(ni.b)(Ii,{rfid:a,size:r,apiKey:i});case 12:return o=l.sent,s=o.data,c=o.error,l.next=17,Object(ni.e)(V.alignerState.stopLoading("preparingToUploadModel"));case 17:if(!c){l.next=21;break}console.error(c),l.next=29;break;case 21:return l.next=23,Object(ni.e)(V.alignerState.loading("uploadModel","Uploading model...","determinate",0));case 23:return l.next=25,Object(ni.b)(so,s.post,t,(function(e){return V.alignerState.loadingProgress("uploadModel",e)}));case 25:return l.next=27,Object(ni.e)(V.alignerState.stopLoading("uploadModel"));case 27:return l.next=29,Object(ni.e)(V.alignerState.modelUploaded());case 29:case"end":return l.stop()}}),Ki)}function ho(e){var t,n,a,r,i,o;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.f)($n);case 2:if(t=e.sent,n=t.rfid,a=t.scannerKey,!n||!a){e.next=45;break}case 6:return e.next=9,Object(ni.f)($n);case 9:if(!e.sent.modelUploaded){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,Object(ni.c)(1e3);case 14:e.next=6;break;case 16:return e.next=18,Object(ni.e)(V.alignerState.loading("finalizing","Finalizing model...","indeterminate"));case 18:return e.next=20,Object(ni.b)(zi,{rfid:n,apiKey:a});case 20:return r=e.sent,e.next=23,Object(ni.e)(V.alignerState.stopLoading("finalizing"));case 23:if(!r.error){e.next=30;break}return console.error("Error finalizing model",r.error),e.next=27,Object(ni.e)(V.alignerState.clearFinalizeModelClick());case 27:return e.abrupt("return");case 30:return e.next=32,Object(ni.e)(V.alignerState.finalizeModel());case 32:return e.next=34,Object(ni.e)(V.alignerState.loading("processingModel","Processing model...","indeterminate"));case 34:return e.next=36,Object(ni.b)(Gi,{rfid:n,apiKey:a});case 36:if(i=e.sent,o=i.data,i.error,!o.success){e.next=43;break}return e.next=43,Object(ni.b)(lo,{rfid:n,apiKey:a});case 43:return e.next=45,Object(ni.e)(V.alignerState.stopLoading("processingModel"));case 45:case"end":return e.stop()}}),Ji)}function po(e){var t,n,a,r,i,o,s,c,l,u,d,h,p,m;return ti.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.rfid,a=t.label,r=t.scannerKey,i=r,f.next=4,Object(ni.f)($n);case 4:if(!(o=f.sent).loading.waitingForScannerToScanRFIDToImport){f.next=22;break}return f.next=8,Object(ni.e)(V.alignerState.stopLoading("waitingForScannerToScanRFIDToImport"));case 8:return f.next=10,Object(ni.e)(V.alignerState.loading("importingTransformAndPoints","Importing model position and points...","indeterminate"));case 10:return f.next=12,Vi({rfid:o.rfid,apiKey:i,rfidImport:n});case 12:return s=f.sent,c=s.data,(l=s.error)&&console.error(l),f.next=18,Object(ni.e)(V.alignerState.stopLoading("importingTransformAndPoints"));case 18:return f.next=20,Object(ni.e)(V.alignerState.importedTransformAndPoints(c));case 20:f.next=99;break;case 22:return f.next=24,Object(ni.e)(V.alignerState.loading("getStatus","Verifying scanned ID...","indeterminate"));case 24:return f.next=26,Fi({rfid:n,apiKey:i});case 26:return u=f.sent,d=u.data,h=u.error,f.next=31,Object(ni.e)(V.alignerState.stopLoading("getStatus"));case 31:if(!h){f.next=36;break}return console.error("Error fetching status",h),f.next=35,Object(ni.e)(V.alignerState.resetState());case 35:return f.abrupt("return");case 36:return f.next=38,Object(ni.e)(V.alignerState.alignerStatusResponse(d));case 38:if(!d.aligner){f.next=97;break}if(d.label){f.next=44;break}return f.next=42,Object(ni.b)(Bi,{rfid:n,apiKey:i,label:a});case 42:f.sent.success;case 44:if(p=qe.getInstance(),!d.model){f.next=91;break}if(!(d.points&&d.points.length>0)){f.next=53;break}return f.next=49,Object(ni.e)(V.viewer3d.parentCamera(Se));case 49:return f.next=51,Object(ni.e)(V.alignerState.setStep(Ue));case 51:f.next=55;break;case 53:return f.next=55,Object(ni.e)(V.alignerState.setStep(Be));case 55:return f.next=57,Object(ni.e)(V.alignerState.loading("downloadModel","Downloading model...","determinate",0));case 57:return f.next=59,Object(ni.b)(co,d.model,(function(e){return V.alignerState.loadingProgress("downloadModel",e)}),"arraybuffer");case 59:return m=f.sent,p.loadSTLModel(m),f.next=63,Object(ni.e)(V.viewer3d.loadModel());case 63:return f.next=65,Object(ni.e)(V.viewer3d.showModel());case 65:return f.next=67,Object(ni.e)(V.alignerState.modelLoaded());case 67:return f.next=69,Object(ni.e)(V.alignerState.stopLoading("downloadModel"));case 69:if(!d.finalized){f.next=87;break}if(!d.processing){f.next=79;break}return f.next=73,Object(ni.e)(V.alignerState.loading("processingModel","Processing model...","indeterminate"));case 73:return f.next=75,Object(ni.b)(lo,{rfid:n,apiKey:i});case 75:return f.next=77,Object(ni.e)(V.alignerState.stopLoading("processingModel"));case 77:f.next=85;break;case 79:if(d.processedModel||console.error("model and transform are finalized, but don't have a processed model or a processing job"),!d.points||!d.points.closed){f.next=85;break}return f.next=83,Object(ni.e)(V.viewer3d.parentCamera(Se));case 83:return f.next=85,Object(ni.e)(V.alignerState.setStep(Ue));case 85:f.next=89;break;case 87:return f.next=89,Object(ni.e)(V.alignerState.setStep(He));case 89:f.next=95;break;case 91:return f.next=93,Object(ni.e)(V.viewer3d.parentCamera(xe));case 93:return f.next=95,Object(ni.e)(V.alignerState.setStep(Ve));case 95:f.next=99;break;case 97:return f.next=99,Object(ni.e)(V.alignerState.resetState());case 99:case"end":return f.stop()}}),qi)}function mo(e){var t,n,a,r,i,o,s;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.f)($n);case 2:return t=e.sent,n=t.rfid,a=t.label,r=t.scannerKey,e.next=8,Object(ni.e)(V.alignerState.loading("preparingToDownloadProcessedModel","Preparing to download processed model...","indeterminate"));case 8:return e.next=10,Object(ni.b)(Ni,{rfid:n,apiKey:r});case 10:return i=e.sent,o=i.data,i.error,e.next=16,Object(ni.e)(V.alignerState.stopLoading("preparingToDownloadProcessedModel"));case 16:return e.next=18,Object(ni.e)(V.alignerState.loading("downloadProcessedModel","Downloading processed model...","determinate",0));case 18:return e.next=20,Object(ni.b)(co,o.url,(function(e){return V.alignerState.loadingProgress("downloadProcessedModel",e)}),"arraybuffer");case 20:return s=e.sent,e.next=23,Object(ni.e)(V.alignerState.stopLoading("downloadProcessedModel"));case 23:return e.next=25,Object(ni.b)(Ci.saveAs,new Blob([new Uint8Array(s)]),a+".stl");case 25:case"end":return e.stop()}}),$i)}function fo(e){var t,n,a,r,i,o,s;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.f)($n);case 2:return t=e.sent,n=t.rfid,a=t.label,r=t.scannerKey,e.next=8,Object(ni.e)(V.alignerState.loading("downloadGCode","Downloading G code...","indeterminate"));case 8:return e.next=10,Object(ni.b)(_i,{rfid:n,apiKey:r});case 10:return i=e.sent,o=i.data,s=i.error,e.next=15,Object(ni.e)(V.alignerState.stopLoading("downloadGCode"));case 15:if(!o.error&&!s){e.next=18;break}return console.error(o.error,s),e.abrupt("return");case 18:return e.next=20,Object(ni.b)(Ci.saveAs,new Blob([o.gcode]),a+".ngc");case 20:case"end":return e.stop()}}),Qi)}function vo(e){var t,n,a,r,i,o,s;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.f)($n);case 2:if(t=e.sent,n=t.rfid,a=t.scannerKey,!n||!a){e.next=24;break}if(!t.pointsNeedSaving){e.next=24;break}return r={points:t.points,closed:t.closePath},e.next=11,Object(ni.e)(V.alignerState.loading("savingPoints","Saving points...","indeterminate"));case 11:return e.next=13,Object(ni.b)(Zi,{rfid:n,apiKey:a,points:r});case 13:return i=e.sent,o=i.data,s=i.error,e.next=18,Object(ni.e)(V.alignerState.stopLoading("savingPoints"));case 18:if(!s&&o.success){e.next=22;break}console.error("error saving points",s),e.next=24;break;case 22:return e.next=24,Object(ni.e)(V.alignerState.pointsSaved());case 24:case"end":return e.stop()}}),eo)}function go(e){var t,n,a,r,i,o,s;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.f)($n);case 2:if(t=e.sent,n=t.rfid,a=t.scannerKey,!n||!a){e.next=24;break}if(!t.xformNeedsSaving){e.next=24;break}return r={xform:t.xform},e.next=11,Object(ni.e)(V.alignerState.loading("savingTransform","Saving model position...","indeterminate"));case 11:return e.next=13,Object(ni.b)(Hi,{rfid:n,apiKey:a,xform:r});case 13:return i=e.sent,o=i.data,s=i.error,e.next=18,Object(ni.e)(V.alignerState.stopLoading("savingTransform"));case 18:if(!s&&o.success){e.next=22;break}console.error("error saving transform",s),e.next=24;break;case 22:return e.next=24,Object(ni.e)(V.alignerState.transformSaved());case 24:case"end":return e.stop()}}),to)}function bo(e){var t,n,a,r,i,o,s,c,l;return ti.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=de.getInstance(),n=le.getInstance(),t.clear(),n.clear(),a=K()(),e.type!==V.alignerState.alignerStatusResponse().type){u.next=10;break}return u.next=8,Object(ni.g)(V.alignerState.modelLoaded);case 8:return u.next=10,Object(ni.c)(1e3);case 10:return u.next=12,Object(ni.f)($n);case 12:if(r=u.sent,!(i=qe.getInstance()).parts.model){u.next=22;break}if(o=new ie.Vector3,s=new ie.Vector4,c=r.points,l=c.length,300,!(l>0)){u.next=22;break}return u.delegateYield(ti.a.mark((function e(){var n,u,d,h,p,m,f,v,g,b,O,M,y,S,x,j,w,E,T,P,A,C,k,R,L,I,G,N,_,D,F,z,Z,H,B,U,X,Y,W,J,q,$,Q,ee,te,ne,ae,re,oe,se,ce,le,ue,de,he,pe,me,fe,ve,ge,be,Oe;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=-.002,u=new ie.Vector3,d=new ie.Vector3,h=new ie.Vector3,p=new ie.Vector3,m=new ie.Vector3,f=new ie.Vector3,v=new ie.Vector3,g=new ie.Vector3,b=new ie.Vector3,O=new ie.Vector3,M=new ie.Vector3,y=new ie.Vector4,S=new ie.Vector3,x=new ie.Vector3,j=new ie.Vector3,w=new ie.Vector3,E=[],T=[],(P=new ie.Matrix4).getInverse(i.parts.bAxis.object.matrixWorld),A=0;case 22:if(!(A<300)){e.next=76;break}if(C=A/299,k=void 0,R=void 0,L=void 0,I=void 0,G=void 0,r.closePath?(k=l*C-Math.floor(l*C),L=Math.floor(l*C)%l,G=((I=(L+1)%l)+1)%l,R=(L+l-1)%l):(k=(l-1)*C-Math.floor((l-1)*C),(L=Math.floor((l-1)*C))>=l&&(L=l-1),(I=L+1)>=l&&(I=l-1),(G=I+1)>=l&&(G=l-1),(R=L-1)<0&&(R=0)),u.set(c[R][0],c[R][1],c[R][2]),d.set(c[L][0],c[L][1],c[L][2]),h.set(c[I][0],c[I][1],c[I][2]),p.set(c[G][0],c[G][1],c[G][2]),v.copy(d),g.copy(h),.5,m.copy(h),m.sub(u),m.multiplyScalar(.5),f.copy(p),f.sub(d),f.multiplyScalar(.5),N=(1+2*k)*(1-k)*(1-k)*v.x+k*(1-k)*(1-k)*m.x+k*k*(3-2*k)*g.x+k*k*(k-1)*f.x,_=(1+2*k)*(1-k)*(1-k)*v.y+k*(1-k)*(1-k)*m.y+k*k*(3-2*k)*g.y+k*k*(k-1)*f.y,D=(1+2*k)*(1-k)*(1-k)*v.z+k*(1-k)*(1-k)*m.z+k*k*(3-2*k)*g.z+k*k*(k-1)*f.z,b.set(c[L][3],c[L][4],c[L][5]),O.set(c[I][3],c[I][4],c[I][5]),F=b.angleTo(O),S.crossVectors(b,O),S.normalize(),x.copy(b),x.applyAxisAngle(S,F*k),o.set(N,_,D),s.set(x.x,x.y,x.z,0),o.applyMatrix4(i.parts.model.object.matrixWorld),s.applyMatrix4(i.parts.model.object.matrixWorld),s.normalize(),j.set(o.x+5*s.x/25.4,o.y+5*s.y/25.4,o.z+5*s.z/25.4),w.set(-s.x,-s.y,-s.z),i.raycaster.set(j,w),T.length=0,T.length>0?(M.x=T[0].point.x-s.x*n,M.y=T[0].point.y-s.y*n,M.z=T[0].point.z-s.z*n):(M.x=o.x-s.x*n,M.y=o.y-s.y*n,M.z=o.z-s.z*n),y.set(s.x,s.y,s.z,0),y.applyMatrix4(P),M.applyMatrix4(P),E.push([M.x,M.y,M.z,y.x,y.y,y.z,L,k]),!(K()()-a>6)){e.next=73;break}return e.next=71,Object(ni.c)(0);case 71:a=K()(),P.getInverse(i.parts.bAxis.object.matrixWorld);case 73:A++,e.next=22;break;case 76:for(z=r.closePath,Z=z?l:l-1,H=[0],B=kt.V2.limits.velocities,U=kt.V2.limits.accelerations,X=0;X<Z;X++){for(Y=void 0,void 0,J=void 0,q=void 0,W=X,z?(Y=(W-1+l)%l,q=((J=(W+1)%l)+1)%l):(Y=Math.max(W-1,0),J=W+1,q=Math.min(J+1,l-1)),u.set(c[Y][0],c[Y][1],c[Y][2]),d.set(c[W][0],c[W][1],c[W][2]),h.set(c[J][0],c[J][1],c[J][2]),p.set(c[q][0],c[q][1],c[q][2]),v.copy(d),g.copy(h),.5,m.copy(h),m.sub(u),m.multiplyScalar(.5),f.copy(p),f.sub(d),f.multiplyScalar(.5),b.set(c[W][3],c[W][4],c[W][5]),O.set(c[J][3],c[J][4],c[J][5]),$=b.angleTo(O),S.crossVectors(b,O),S.normalize(),5,Q=[],ee=0;ee<5;ee++)ne=(1+2*(te=ee/4))*(1-te)*(1-te)*v.x+te*(1-te)*(1-te)*m.x+te*te*(3-2*te)*g.x+te*te*(te-1)*f.x,ae=(1+2*te)*(1-te)*(1-te)*v.y+te*(1-te)*(1-te)*m.y+te*te*(3-2*te)*g.y+te*te*(te-1)*f.y,re=(1+2*te)*(1-te)*(1-te)*v.z+te*(1-te)*(1-te)*m.z+te*te*(3-2*te)*g.z+te*te*(te-1)*f.z,x.copy(b),x.applyAxisAngle(S,$*te),o.set(ne,ae,re),s.set(x.x,x.y,x.z,0),o.applyMatrix4(i.parts.model.object.matrixWorld),s.applyMatrix4(i.parts.model.object.matrixWorld),s.normalize(),Q.push([25.4*o.x,25.4*o.y,25.4*o.z,s.x,s.y,s.z]);oe=Ri(Q),se=0,oe.forEach((function(e){var t={X:0,Y:1,Z:2,A:3,B:4},n={X:0,Y:1,Z:2},a=0;for(var r in{A:3,B:4})"undefined"!==typeof e[r]&&(a=Math.max(a,Math.abs(e[r])));var i=0;if(a<We)for(var o in n)"undefined"!==typeof e[o]&&(i=Math.max(i,Math.abs(e[o])/B[n[o]]));else for(var s in t)"undefined"!==typeof e[s]&&(i=Math.max(i,.7*Math.sqrt(Math.abs(e[s])/U[t[s]])));se+=i})),ce=H[H.length-1],H.push(ce+se)}return e.next=84,Object(ni.e)(V.alignerState.setTimes(H));case 84:le=new ie.Vector3,ue=new ie.Vector3,de=1/25.4,he=new ie.Vector3,(pe=new ie.Vector4).w=0,me=new ie.Vector3(1,0,0),fe=new ie.Vector3(0,1,0),ve=0;case 93:if(!(ve<E.length)){e.next=117;break}if(ge=E[ve],he.x=ge[0],he.y=ge[1],he.z=ge[2],pe.x=ge[3],pe.y=ge[4],pe.z=ge[5],le.x=pe.x,le.y=pe.y,le.z=pe.z,be=Math.asin(pe.y),Oe=Math.atan2(-pe.x,pe.z),ue.set(0,1,0),ue.applyAxisAngle(me,-be).applyAxisAngle(fe,-Oe),t.addPoints([{position:[he.x+.5*ue.x*de,he.y+.5*ue.y*de,he.z+.5*ue.z*de],color:[1,1,1],normal:[le.x,le.y,le.z],line:0,time:0},{position:[he.x-.5*ue.x*de,he.y-.5*ue.y*de,he.z-.5*ue.z*de],color:[1,1,1],normal:[le.x,le.y,le.z],line:0,time:0}]),!(K()()-a>6)){e.next=114;break}return e.next=113,Object(ni.c)(0);case 113:a=K()();case 114:ve++,e.next=93;break;case 117:case"end":return e.stop()}}),e)}))(),"t0",22);case 22:case"end":return u.stop()}}),no)}function Oo(){return new Promise((function(e){return window.requestAnimationFrame((function(){e()}))}))}function Mo(e){var t,n,a,r;return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.016;case 1:return e.next=4,Object(ni.f)($n);case 4:if(n=e.sent,!n.paused){e.next=10;break}return e.abrupt("break",19);case 10:return a=performance.now(),e.next=13,Object(ni.b)(Oo);case 13:return e.next=15,Object(ni.e)(V.alignerState.incrementTime(t));case 15:r=performance.now(),t=(r-a)/1e3;case 17:e.next=1;break;case 19:case"end":return e.stop()}}),ao)}function yo(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.i)([V.alignerState.play,V.alignerState.pause,V.alignerState.setActivePoint,V.alignerState.nextPoint,V.alignerState.prevPoint],Mo);case 2:case"end":return e.stop()}}),ro)}function So(){var e,t,n,a,r;return ti.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=Ti.a.parse(document.location.search),!(t=e.demoKey)){i.next=15;break}return i.next=5,Object(ni.e)(V.alignerState.loading("verifyingDemoKey","Verifying demo key...","indeterminate"));case 5:return i.next=7,Object(ni.b)(Ui,{rfid:t});case 7:return n=i.sent,a=n.data,r=n.error,i.next=12,Object(ni.e)(V.alignerState.stopLoading("verifyingDemoKey"));case 12:return r&&console.error("Error fetching demo key",r),i.next=15,Object(ni.e)(V.rfid.receivedRfidScanMessage(a));case 15:case"end":return i.stop()}}),io)}function xo(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.a)([yo(),So(),Object(ni.i)(V.rfid.receivedRfidScanMessage,po),Object(ni.i)(V.alignerState.uploadModel,uo),Object(ni.i)(V.alignerState.finalizeModelClick,ho),Object(ni.i)(V.alignerState.downloadProcessedModel,mo),Object(ni.i)(V.alignerState.downloadGCode,fo),Object(ni.i)(V.alignerState.savePoints,vo),Object(ni.i)(V.alignerState.saveTransform,go),Object(ni.i)([V.alignerState.addPoint,V.alignerState.rotateMachine,V.alignerState.updatePointPosition,V.alignerState.deletePoint,V.alignerState.closePath,V.alignerState.alignerStatusResponse,V.alignerState.importedTransformAndPoints],bo)]);case 2:case"end":return e.stop()}}),oo)}var jo=ti.a.mark(wo);function wo(){return ti.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ni.a)([ci(),pi(),fi(),Oi(),wi(),xo()]);case 2:case"end":return e.stop()}}),jo)}var Eo=n(383),To=Object(pr.b)(),Po=Object(hr.createStore)(Qr,{},Object(Eo.composeWithDevTools)(Object(hr.applyMiddleware)(To)));To.run(wo),ee().pageview("/",document.location.href,document.title).send(),console.log("Pocket NC Simulator v0.4.1"),console.log("Commit","3bc541a1c36a37c38dba9a65763fe7633703e1a0"),window.addEventListener("message",(function(e){if(e.origin!==document.location.origin){var t=V.iframe.initialize().type,n=V.iframe.rockhopper({}).type,a=V.iframe.embedGcode().type,r=dr.getInstance();switch(e.data.type){case t:Po.dispatch(V.iframe.initialize(e.data.payload)),r.addWindow(e.source,e.origin);break;case n:if("file_content"===e.data.payload.id){var i=e.data.payload.data.split("\n").map((function(e){return e.replace("\r","")}));Po.dispatch(V.interpreter.setLines(i))}else if(e.data.payload.id.startsWith("tool_table")){var o=e.data.payload.id.split(":")[1],s=e.data.payload.data[3],c=e.data.payload.data[10];Po.dispatch(V.machineState.tool.table.setTool({P:o,Z:s,R:c}))}break;case a:var l=e.data.payload.split("\n").map((function(e){return e.trim()}));Po.dispatch(V.interpreter.setLines(l))}}})),window.focus(),g.a.render(f.a.createElement(b.a,{store:Po},f.a.createElement(lr.a,{hashType:"noslash"},f.a.createElement(ur.a,{path:"/",exact:!0,component:or}))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");sr?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):cr(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):cr(e)}))}}()}},[[407,1,2]]]);
//# sourceMappingURL=main.04c30f9b.chunk.js.map